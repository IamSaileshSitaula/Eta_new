(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function o(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=o(l);fetch(l.href,d)}})();function Of(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rf={exports:{}},jr={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function G0(){if(og)return jr;og=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function o(a,l,d){var h=null;if(d!==void 0&&(h=""+d),l.key!==void 0&&(h=""+l.key),"key"in l){d={};for(var v in l)v!=="key"&&(d[v]=l[v])}else d=l;return l=d.ref,{$$typeof:n,type:a,key:h,ref:l!==void 0?l:null,props:d}}return jr.Fragment=e,jr.jsx=o,jr.jsxs=o,jr}var sg;function V0(){return sg||(sg=1,rf.exports=G0()),rf.exports}var A=V0(),lf={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function F0(){if(ag)return Ke;ag=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),M=Symbol.iterator;function R(z){return z===null||typeof z!="object"?null:(z=M&&z[M]||z["@@iterator"],typeof z=="function"?z:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},P=Object.assign,H={};function I(z,$,fe){this.props=z,this.context=$,this.refs=H,this.updater=fe||O}I.prototype.isReactComponent={},I.prototype.setState=function(z,$){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,$,"setState")},I.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function q(){}q.prototype=I.prototype;function B(z,$,fe){this.props=z,this.context=$,this.refs=H,this.updater=fe||O}var ee=B.prototype=new q;ee.constructor=B,P(ee,I.prototype),ee.isPureReactComponent=!0;var j=Array.isArray;function X(){}var Y={H:null,A:null,T:null,S:null},oe=Object.prototype.hasOwnProperty;function le(z,$,fe){var he=fe.ref;return{$$typeof:n,type:z,key:$,ref:he!==void 0?he:null,props:fe}}function pe(z,$){return le(z.type,$,z.props)}function me(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function ne(z){var $={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(fe){return $[fe]})}var Pe=/\/+/g;function ve(z,$){return typeof z=="object"&&z!==null&&z.key!=null?ne(""+z.key):$.toString(36)}function Ge(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(X,X):(z.status="pending",z.then(function($){z.status==="pending"&&(z.status="fulfilled",z.value=$)},function($){z.status==="pending"&&(z.status="rejected",z.reason=$)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Z(z,$,fe,he,ye){var ge=typeof z;(ge==="undefined"||ge==="boolean")&&(z=null);var Ae=!1;if(z===null)Ae=!0;else switch(ge){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(z.$$typeof){case n:case e:Ae=!0;break;case x:return Ae=z._init,Z(Ae(z._payload),$,fe,he,ye)}}if(Ae)return ye=ye(z),Ae=he===""?"."+ve(z,0):he,j(ye)?(fe="",Ae!=null&&(fe=Ae.replace(Pe,"$&/")+"/"),Z(ye,$,fe,"",function(Ee){return Ee})):ye!=null&&(me(ye)&&(ye=pe(ye,fe+(ye.key==null||z&&z.key===ye.key?"":(""+ye.key).replace(Pe,"$&/")+"/")+Ae)),$.push(ye)),1;Ae=0;var Ie=he===""?".":he+":";if(j(z))for(var Oe=0;Oe<z.length;Oe++)he=z[Oe],ge=Ie+ve(he,Oe),Ae+=Z(he,$,fe,ge,ye);else if(Oe=R(z),typeof Oe=="function")for(z=Oe.call(z),Oe=0;!(he=z.next()).done;)he=he.value,ge=Ie+ve(he,Oe++),Ae+=Z(he,$,fe,ge,ye);else if(ge==="object"){if(typeof z.then=="function")return Z(Ge(z),$,fe,he,ye);throw $=String(z),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function ue(z,$,fe){if(z==null)return z;var he=[],ye=0;return Z(z,he,"","",function(ge){return $.call(fe,ge,ye++)}),he}function de(z){if(z._status===-1){var $=z._result;$=$(),$.then(function(fe){(z._status===0||z._status===-1)&&(z._status=1,z._result=fe)},function(fe){(z._status===0||z._status===-1)&&(z._status=2,z._result=fe)}),z._status===-1&&(z._status=0,z._result=$)}if(z._status===1)return z._result.default;throw z._result}var Fe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},_e={map:ue,forEach:function(z,$,fe){ue(z,function(){$.apply(this,arguments)},fe)},count:function(z){var $=0;return ue(z,function(){$++}),$},toArray:function(z){return ue(z,function($){return $})||[]},only:function(z){if(!me(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ke.Activity=E,Ke.Children=_e,Ke.Component=I,Ke.Fragment=o,Ke.Profiler=l,Ke.PureComponent=B,Ke.StrictMode=a,Ke.Suspense=y,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(z){return Y.H.useMemoCache(z)}},Ke.cache=function(z){return function(){return z.apply(null,arguments)}},Ke.cacheSignal=function(){return null},Ke.cloneElement=function(z,$,fe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var he=P({},z.props),ye=z.key;if($!=null)for(ge in $.key!==void 0&&(ye=""+$.key),$)!oe.call($,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&$.ref===void 0||(he[ge]=$[ge]);var ge=arguments.length-2;if(ge===1)he.children=fe;else if(1<ge){for(var Ae=Array(ge),Ie=0;Ie<ge;Ie++)Ae[Ie]=arguments[Ie+2];he.children=Ae}return le(z.type,ye,he)},Ke.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:d,_context:z},z},Ke.createElement=function(z,$,fe){var he,ye={},ge=null;if($!=null)for(he in $.key!==void 0&&(ge=""+$.key),$)oe.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ye[he]=$[he]);var Ae=arguments.length-2;if(Ae===1)ye.children=fe;else if(1<Ae){for(var Ie=Array(Ae),Oe=0;Oe<Ae;Oe++)Ie[Oe]=arguments[Oe+2];ye.children=Ie}if(z&&z.defaultProps)for(he in Ae=z.defaultProps,Ae)ye[he]===void 0&&(ye[he]=Ae[he]);return le(z,ge,ye)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(z){return{$$typeof:v,render:z}},Ke.isValidElement=me,Ke.lazy=function(z){return{$$typeof:x,_payload:{_status:-1,_result:z},_init:de}},Ke.memo=function(z,$){return{$$typeof:_,type:z,compare:$===void 0?null:$}},Ke.startTransition=function(z){var $=Y.T,fe={};Y.T=fe;try{var he=z(),ye=Y.S;ye!==null&&ye(fe,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(X,Fe)}catch(ge){Fe(ge)}finally{$!==null&&fe.types!==null&&($.types=fe.types),Y.T=$}},Ke.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ke.use=function(z){return Y.H.use(z)},Ke.useActionState=function(z,$,fe){return Y.H.useActionState(z,$,fe)},Ke.useCallback=function(z,$){return Y.H.useCallback(z,$)},Ke.useContext=function(z){return Y.H.useContext(z)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(z,$){return Y.H.useDeferredValue(z,$)},Ke.useEffect=function(z,$){return Y.H.useEffect(z,$)},Ke.useEffectEvent=function(z){return Y.H.useEffectEvent(z)},Ke.useId=function(){return Y.H.useId()},Ke.useImperativeHandle=function(z,$,fe){return Y.H.useImperativeHandle(z,$,fe)},Ke.useInsertionEffect=function(z,$){return Y.H.useInsertionEffect(z,$)},Ke.useLayoutEffect=function(z,$){return Y.H.useLayoutEffect(z,$)},Ke.useMemo=function(z,$){return Y.H.useMemo(z,$)},Ke.useOptimistic=function(z,$){return Y.H.useOptimistic(z,$)},Ke.useReducer=function(z,$,fe){return Y.H.useReducer(z,$,fe)},Ke.useRef=function(z){return Y.H.useRef(z)},Ke.useState=function(z){return Y.H.useState(z)},Ke.useSyncExternalStore=function(z,$,fe){return Y.H.useSyncExternalStore(z,$,fe)},Ke.useTransition=function(){return Y.H.useTransition()},Ke.version="19.2.0",Ke}var rg;function Bf(){return rg||(rg=1,lf.exports=F0()),lf.exports}var D=Bf();const on=Of(D);var uf={exports:{}},el={},cf={exports:{}},df={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function Z0(){return lg||(lg=1,(function(n){function e(Z,ue){var de=Z.length;Z.push(ue);e:for(;0<de;){var Fe=de-1>>>1,_e=Z[Fe];if(0<l(_e,ue))Z[Fe]=ue,Z[de]=_e,de=Fe;else break e}}function o(Z){return Z.length===0?null:Z[0]}function a(Z){if(Z.length===0)return null;var ue=Z[0],de=Z.pop();if(de!==ue){Z[0]=de;e:for(var Fe=0,_e=Z.length,z=_e>>>1;Fe<z;){var $=2*(Fe+1)-1,fe=Z[$],he=$+1,ye=Z[he];if(0>l(fe,de))he<_e&&0>l(ye,fe)?(Z[Fe]=ye,Z[he]=de,Fe=he):(Z[Fe]=fe,Z[$]=de,Fe=$);else if(he<_e&&0>l(ye,de))Z[Fe]=ye,Z[he]=de,Fe=he;else break e}}return ue}function l(Z,ue){var de=Z.sortIndex-ue.sortIndex;return de!==0?de:Z.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;n.unstable_now=function(){return d.now()}}else{var h=Date,v=h.now();n.unstable_now=function(){return h.now()-v}}var y=[],_=[],x=1,E=null,M=3,R=!1,O=!1,P=!1,H=!1,I=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function ee(Z){for(var ue=o(_);ue!==null;){if(ue.callback===null)a(_);else if(ue.startTime<=Z)a(_),ue.sortIndex=ue.expirationTime,e(y,ue);else break;ue=o(_)}}function j(Z){if(P=!1,ee(Z),!O)if(o(y)!==null)O=!0,X||(X=!0,ne());else{var ue=o(_);ue!==null&&Ge(j,ue.startTime-Z)}}var X=!1,Y=-1,oe=5,le=-1;function pe(){return H?!0:!(n.unstable_now()-le<oe)}function me(){if(H=!1,X){var Z=n.unstable_now();le=Z;var ue=!0;try{e:{O=!1,P&&(P=!1,q(Y),Y=-1),R=!0;var de=M;try{t:{for(ee(Z),E=o(y);E!==null&&!(E.expirationTime>Z&&pe());){var Fe=E.callback;if(typeof Fe=="function"){E.callback=null,M=E.priorityLevel;var _e=Fe(E.expirationTime<=Z);if(Z=n.unstable_now(),typeof _e=="function"){E.callback=_e,ee(Z),ue=!0;break t}E===o(y)&&a(y),ee(Z)}else a(y);E=o(y)}if(E!==null)ue=!0;else{var z=o(_);z!==null&&Ge(j,z.startTime-Z),ue=!1}}break e}finally{E=null,M=de,R=!1}ue=void 0}}finally{ue?ne():X=!1}}}var ne;if(typeof B=="function")ne=function(){B(me)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,ve=Pe.port2;Pe.port1.onmessage=me,ne=function(){ve.postMessage(null)}}else ne=function(){I(me,0)};function Ge(Z,ue){Y=I(function(){Z(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Z){Z.callback=null},n.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<Z?Math.floor(1e3/Z):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(Z){switch(M){case 1:case 2:case 3:var ue=3;break;default:ue=M}var de=M;M=ue;try{return Z()}finally{M=de}},n.unstable_requestPaint=function(){H=!0},n.unstable_runWithPriority=function(Z,ue){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var de=M;M=Z;try{return ue()}finally{M=de}},n.unstable_scheduleCallback=function(Z,ue,de){var Fe=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Fe+de:Fe):de=Fe,Z){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=de+_e,Z={id:x++,callback:ue,priorityLevel:Z,startTime:de,expirationTime:_e,sortIndex:-1},de>Fe?(Z.sortIndex=de,e(_,Z),o(y)===null&&Z===o(_)&&(P?(q(Y),Y=-1):P=!0,Ge(j,de-Fe))):(Z.sortIndex=_e,e(y,Z),O||R||(O=!0,X||(X=!0,ne()))),Z},n.unstable_shouldYield=pe,n.unstable_wrapCallback=function(Z){var ue=M;return function(){var de=M;M=ue;try{return Z.apply(this,arguments)}finally{M=de}}}})(df)),df}var ug;function Y0(){return ug||(ug=1,cf.exports=Z0()),cf.exports}var ff={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function J0(){if(cg)return Un;cg=1;var n=Bf();function e(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)_+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(e(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(y,_,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:y,containerInfo:_,implementation:x}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Un.createPortal=function(y,_){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(y,_,null,x)},Un.flushSync=function(y){var _=h.T,x=a.p;try{if(h.T=null,a.p=2,y)return y()}finally{h.T=_,a.p=x,a.d.f()}},Un.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(y,_))},Un.prefetchDNS=function(y){typeof y=="string"&&a.d.D(y)},Un.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var x=_.as,E=v(x,_.crossOrigin),M=typeof _.integrity=="string"?_.integrity:void 0,R=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;x==="style"?a.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:E,integrity:M,fetchPriority:R}):x==="script"&&a.d.X(y,{crossOrigin:E,integrity:M,fetchPriority:R,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Un.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var x=v(_.as,_.crossOrigin);a.d.M(y,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(y)},Un.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var x=_.as,E=v(x,_.crossOrigin);a.d.L(y,x,{crossOrigin:E,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Un.preloadModule=function(y,_){if(typeof y=="string")if(_){var x=v(_.as,_.crossOrigin);a.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(y)},Un.requestFormReset=function(y){a.d.r(y)},Un.unstable_batchedUpdates=function(y,_){return y(_)},Un.useFormState=function(y,_,x){return h.H.useFormState(y,_,x)},Un.useFormStatus=function(){return h.H.useHostTransitionStatus()},Un.version="19.2.0",Un}var dg;function h_(){if(dg)return ff.exports;dg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ff.exports=J0(),ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg;function K0(){if(fg)return el;fg=1;var n=Y0(),e=Bf(),o=h_();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)i+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var i=t,r=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(r=i.return),t=i.return;while(t)}return i.tag===3?r:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function v(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(d(t)!==t)throw Error(a(188))}function _(t){var i=t.alternate;if(!i){if(i=d(t),i===null)throw Error(a(188));return i!==t?null:t}for(var r=t,c=i;;){var g=r.return;if(g===null)break;var S=g.alternate;if(S===null){if(c=g.return,c!==null){r=c;continue}break}if(g.child===S.child){for(S=g.child;S;){if(S===r)return y(g),t;if(S===c)return y(g),i;S=S.sibling}throw Error(a(188))}if(r.return!==c.return)r=g,c=S;else{for(var w=!1,N=g.child;N;){if(N===r){w=!0,r=g,c=S;break}if(N===c){w=!0,c=g,r=S;break}N=N.sibling}if(!w){for(N=S.child;N;){if(N===r){w=!0,r=S,c=g;break}if(N===c){w=!0,c=S,r=g;break}N=N.sibling}if(!w)throw Error(a(189))}}if(r.alternate!==c)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:i}function x(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=x(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,M=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),q=Symbol.for("react.consumer"),B=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function ne(t){return t===null||typeof t!="object"?null:(t=me&&t[me]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Symbol.for("react.client.reference");function ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Pe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case I:return"Profiler";case H:return"StrictMode";case j:return"Suspense";case X:return"SuspenseList";case le:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case B:return t.displayName||"Context";case q:return(t._context.displayName||"Context")+".Consumer";case ee:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Y:return i=t.displayName||null,i!==null?i:ve(t.type)||"Memo";case oe:i=t._payload,t=t._init;try{return ve(t(i))}catch{}}return null}var Ge=Array.isArray,Z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Fe=[],_e=-1;function z(t){return{current:t}}function $(t){0>_e||(t.current=Fe[_e],Fe[_e]=null,_e--)}function fe(t,i){_e++,Fe[_e]=t.current,t.current=i}var he=z(null),ye=z(null),ge=z(null),Ae=z(null);function Ie(t,i){switch(fe(ge,i),fe(ye,t),fe(he,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Mp(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Mp(i),t=bp(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(he),fe(he,t)}function Oe(){$(he),$(ye),$(ge)}function Ee(t){t.memoizedState!==null&&fe(Ae,t);var i=he.current,r=bp(i,t.type);i!==r&&(fe(ye,t),fe(he,r))}function sn(t){ye.current===t&&($(he),$(ye)),Ae.current===t&&($(Ae),Xr._currentValue=de)}var nt,bn;function Ne(t){if(nt===void 0)try{throw Error()}catch(r){var i=r.stack.trim().match(/\n( *(at )?)/);nt=i&&i[1]||"",bn=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+t+bn}var Ot=!1;function pn(t,i){if(!t||Ot)return"";Ot=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(te){var W=te}Reflect.construct(t,[],re)}else{try{re.call()}catch(te){W=te}t.call(re.prototype)}}else{try{throw Error()}catch(te){W=te}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(te){if(te&&W&&typeof te.stack=="string")return[te.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=c.DetermineComponentFrameRoot(),w=S[0],N=S[1];if(w&&N){var k=w.split(`
`),K=N.split(`
`);for(g=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;g<K.length&&!K[g].includes("DetermineComponentFrameRoot");)g++;if(c===k.length||g===K.length)for(c=k.length-1,g=K.length-1;1<=c&&0<=g&&k[c]!==K[g];)g--;for(;1<=c&&0<=g;c--,g--)if(k[c]!==K[g]){if(c!==1||g!==1)do if(c--,g--,0>g||k[c]!==K[g]){var ie=`
`+k[c].replace(" at new "," at ");return t.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",t.displayName)),ie}while(1<=c&&0<=g);break}}}finally{Ot=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?Ne(r):""}function ni(t,i){switch(t.tag){case 26:case 27:case 5:return Ne(t.type);case 16:return Ne("Lazy");case 13:return t.child!==i&&i!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return pn(t.type,!1);case 11:return pn(t.type.render,!1);case 1:return pn(t.type,!0);case 31:return Ne("Activity");default:return""}}function Be(t){try{var i="",r=null;do i+=ni(t,r),r=t,t=t.return;while(t);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ue=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,Xe=n.unstable_cancelCallback,Ye=n.unstable_shouldYield,St=n.unstable_requestPaint,tt=n.unstable_now,an=n.unstable_getCurrentPriorityLevel,Jt=n.unstable_ImmediatePriority,ze=n.unstable_UserBlockingPriority,Ut=n.unstable_NormalPriority,rn=n.unstable_LowPriority,Ft=n.unstable_IdlePriority,wt=n.log,Kt=n.unstable_setDisableYieldValue,gn=null,dt=null;function ce(t){if(typeof wt=="function"&&Kt(t),dt&&typeof dt.setStrictMode=="function")try{dt.setStrictMode(gn,t)}catch{}}var Te=Math.clz32?Math.clz32:Tt,be=Math.log,Et=Math.LN2;function Tt(t){return t>>>=0,t===0?32:31-(be(t)/Et|0)|0}var He=256,it=262144,we=4194304;function ht(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Qe(t,i,r){var c=t.pendingLanes;if(c===0)return 0;var g=0,S=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var N=c&134217727;return N!==0?(c=N&~S,c!==0?g=ht(c):(w&=N,w!==0?g=ht(w):r||(r=N&~t,r!==0&&(g=ht(r))))):(N=c&~S,N!==0?g=ht(N):w!==0?g=ht(w):r||(r=c&~t,r!==0&&(g=ht(r)))),g===0?0:i!==0&&i!==g&&(i&S)===0&&(S=g&-g,r=i&-i,S>=r||S===32&&(r&4194048)!==0)?i:g}function Ct(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Bt(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mt(){var t=we;return we<<=1,(we&62914560)===0&&(we=4194304),t}function $e(t){for(var i=[],r=0;31>r;r++)i.push(t);return i}function en(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Zt(t,i,r,c,g,S){var w=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var N=t.entanglements,k=t.expirationTimes,K=t.hiddenUpdates;for(r=w&~r;0<r;){var ie=31-Te(r),re=1<<ie;N[ie]=0,k[ie]=-1;var W=K[ie];if(W!==null)for(K[ie]=null,ie=0;ie<W.length;ie++){var te=W[ie];te!==null&&(te.lane&=-536870913)}r&=~re}c!==0&&kn(t,c,0),S!==0&&g===0&&t.tag!==0&&(t.suspendedLanes|=S&~(w&~i))}function kn(t,i,r){t.pendingLanes|=i,t.suspendedLanes&=~i;var c=31-Te(i);t.entangledLanes|=i,t.entanglements[c]=t.entanglements[c]|1073741824|r&261930}function ln(t,i){var r=t.entangledLanes|=i;for(t=t.entanglements;r;){var c=31-Te(r),g=1<<c;g&i|t[c]&i&&(t[c]|=i),r&=~g}}function Tn(t,i){var r=i&-i;return r=(r&42)!==0?1:Xt(r),(r&(t.suspendedLanes|i))!==0?0:r}function Xt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ce(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gn(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:Wp(t.type))}function Ai(t,i){var r=ue.p;try{return ue.p=t,i()}finally{ue.p=r}}var Hn=Math.random().toString(36).slice(2),un="__reactFiber$"+Hn,xn="__reactProps$"+Hn,eo="__reactContainer$"+Hn,ki="__reactEvents$"+Hn,gl="__reactListeners$"+Hn,pc="__reactHandles$"+Hn,vl="__reactResources$"+Hn,ps="__reactMarker$"+Hn;function er(t){delete t[un],delete t[xn],delete t[ki],delete t[gl],delete t[pc]}function to(t){var i=t[un];if(i)return i;for(var r=t.parentNode;r;){if(i=r[eo]||r[un]){if(r=i.alternate,i.child!==null||r!==null&&r.child!==null)for(t=Up(t);t!==null;){if(r=t[un])return r;t=Up(t)}return i}t=r,r=t.parentNode}return null}function wo(t){if(t=t[un]||t[eo]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function Hi(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function Mo(t){var i=t[vl];return i||(i=t[vl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function cn(t){t[ps]=!0}var _l=new Set,yl={};function no(t,i){Oi(t,i),Oi(t+"Capture",i)}function Oi(t,i){for(yl[t]=i,t=0;t<i.length;t++)_l.add(i[t])}var gs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tr={},nr={};function vs(t){return Ue.call(nr,t)?!0:Ue.call(tr,t)?!1:gs.test(t)?nr[t]=!0:(tr[t]=!0,!1)}function ot(t,i,r){if(vs(i))if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+r)}}function Rt(t,i,r){if(r===null)t.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+r)}}function Vn(t,i,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(i,r,""+c)}}function vn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function io(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ir(t,i,r){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,S=c.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return g.call(this)},set:function(w){r=""+w,S.call(this,w)}}),Object.defineProperty(t,i,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(w){r=""+w},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Je(t){if(!t._valueTracker){var i=io(t)?"checked":"value";t._valueTracker=ir(t,i,""+t[i])}}function qt(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var r=i.getValue(),c="";return t&&(c=io(t)?t.checked?"true":"false":t.value),t=c,t!==r?(i.setValue(t),!0):!1}function bo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var js=/[\n"\\]/g;function zt(t){return t.replace(js,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function or(t,i,r,c,g,S,w,N){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),i!=null?w==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+vn(i)):t.value!==""+vn(i)&&(t.value=""+vn(i)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),i!=null?wi(t,w,vn(i)):r!=null?wi(t,w,vn(r)):c!=null&&t.removeAttribute("value"),g==null&&S!=null&&(t.defaultChecked=!!S),g!=null&&(t.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.name=""+vn(N):t.removeAttribute("name")}function _s(t,i,r,c,g,S,w,N){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.type=S),i!=null||r!=null){if(!(S!=="submit"&&S!=="reset"||i!=null)){Je(t);return}r=r!=null?""+vn(r):"",i=i!=null?""+vn(i):r,N||i===t.value||(t.value=i),t.defaultValue=i}c=c??g,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=N?t.checked:!!c,t.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),Je(t)}function wi(t,i,r){i==="number"&&bo(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function Lt(t,i,r,c){if(t=t.options,i){i={};for(var g=0;g<r.length;g++)i["$"+r[g]]=!0;for(r=0;r<t.length;r++)g=i.hasOwnProperty("$"+t[r].value),t[r].selected!==g&&(t[r].selected=g),g&&c&&(t[r].defaultSelected=!0)}else{for(r=""+vn(r),i=null,g=0;g<t.length;g++){if(t[g].value===r){t[g].selected=!0,c&&(t[g].defaultSelected=!0);return}i!==null||t[g].disabled||(i=t[g])}i!==null&&(i.selected=!0)}}function Bi(t,i,r){if(i!=null&&(i=""+vn(i),i!==t.value&&(t.value=i),r==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=r!=null?""+vn(r):""}function Ro(t,i,r,c){if(i==null){if(c!=null){if(r!=null)throw Error(a(92));if(Ge(c)){if(1<c.length)throw Error(a(93));c=c[0]}r=c}r==null&&(r=""),i=r}r=vn(i),t.defaultValue=r,c=t.textContent,c===r&&c!==""&&c!==null&&(t.value=c),Je(t)}function fi(t,i){if(i){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=i;return}}t.textContent=i}var sr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function No(t,i,r){var c=i.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":c?t.setProperty(i,r):typeof r!="number"||r===0||sr.has(i)?i==="float"?t.cssFloat=r:t[i]=(""+r).trim():t[i]=r+"px"}function ea(t,i,r){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var g in i)c=i[g],i.hasOwnProperty(g)&&r[g]!==c&&No(t,g,c)}else for(var S in i)i.hasOwnProperty(S)&&No(t,S,i[S])}function ys(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ta=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Io(t){return ar.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fn(){}var na=null;function Ss(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Do=null,Ve=null;function ii(t){var i=wo(t);if(i&&(t=i.stateNode)){var r=t[xn]||null;e:switch(t=i.stateNode,i.type){case"input":if(or(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),i=r.name,r.type==="radio"&&i!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+zt(""+i)+'"][type="radio"]'),i=0;i<r.length;i++){var c=r[i];if(c!==t&&c.form===t.form){var g=c[xn]||null;if(!g)throw Error(a(90));or(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(i=0;i<r.length;i++)c=r[i],c.form===t.form&&qt(c)}break e;case"textarea":Bi(t,r.value,r.defaultValue);break e;case"select":i=r.value,i!=null&&Lt(t,!!r.multiple,i,!1)}}}var At=!1;function rr(t,i,r){if(At)return t(i,r);At=!0;try{var c=t(i);return c}finally{if(At=!1,(Do!==null||Ve!==null)&&(pu(),Do&&(i=Do,t=Ve,Ve=Do=null,ii(i),t)))for(i=0;i<t.length;i++)ii(t[i])}}function oo(t,i){var r=t.stateNode;if(r===null)return null;var c=r[xn]||null;if(c===null)return null;r=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,i,typeof r));return r}var oi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(oi)try{var si={};Object.defineProperty(si,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{Ts=!1}var hi=null,so=null,Qt=null;function qi(){if(Qt)return Qt;var t,i=so,r=i.length,c,g="value"in hi?hi.value:hi.textContent,S=g.length;for(t=0;t<r&&i[t]===g[t];t++);var w=r-t;for(c=1;c<=w&&i[r-c]===g[S-c];c++);return Qt=g.slice(t,1<c?1-c:void 0)}function xs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Es(){return!0}function Sl(){return!1}function Rn(t){function i(r,c,g,S,w){this._reactName=r,this._targetInst=g,this.type=c,this.nativeEvent=S,this.target=w,this.currentTarget=null;for(var N in t)t.hasOwnProperty(N)&&(r=t[N],this[N]=r?r(S):S[N]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Es:Sl,this.isPropagationStopped=Sl,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),i}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ia=Rn(Mi),Lo=E({},Mi,{view:0,detail:0}),lt=Rn(Lo),lr,On,bi,Cs=E({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bi&&(bi&&t.type==="mousemove"?(lr=t.screenX-bi.screenX,On=t.screenY-bi.screenY):On=lr=0,bi=t),lr)},movementY:function(t){return"movementY"in t?t.movementY:On}}),Tl=Rn(Cs),ur=E({},Cs,{dataTransfer:0}),gc=Rn(ur),xl=E({},Lo,{relatedTarget:0}),cr=Rn(xl),vc=E({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=Rn(vc),_c=E({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mi=Rn(_c),yc=E({},Mi,{data:0}),fr=Rn(yc),Gi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},El={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hr(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Cl[t])?!!i[t]:!1}function mr(){return hr}var Al=E({},Lo,{key:function(t){if(t.key){var i=Gi[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=xs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?El[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(t){return t.type==="keypress"?xs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wl=Rn(Al),Sc=E({},Cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ml=Rn(Sc),pr=E({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),Tc=Rn(pr),bl=E({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rl=Rn(bl),oa=E({},Cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ao=Rn(oa),xc=E({},Mi,{newState:0,oldState:0}),As=Rn(xc),Zn=[9,13,27,32],sa=oi&&"CompositionEvent"in window,Po=null;oi&&"documentMode"in document&&(Po=document.documentMode);var Ec=oi&&"TextEvent"in window&&!Po,aa=oi&&(!sa||Po&&8<Po&&11>=Po),ra=" ",Nl=!1;function Il(t,i){switch(t){case"keyup":return Zn.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function ai(t,i){switch(t){case"compositionend":return gr(i);case"keypress":return i.which!==32?null:(Nl=!0,ra);case"textInput":return t=i.data,t===ra&&Nl?null:t;default:return null}}function zo(t,i){if(Uo)return t==="compositionend"||!sa&&Il(t,i)?(t=qi(),Qt=so=hi=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return aa&&i.locale!=="ko"?null:i.data;default:return null}}var Cc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pi(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Cc[t.type]:i==="textarea"}function Dl(t,i,r,c){Do?Ve?Ve.push(c):Ve=[c]:Do=c,i=xu(i,"onChange"),0<i.length&&(r=new ia("onChange","change",null,r,c),t.push({event:r,listeners:i}))}var gi=null,ws=null;function Ms(t){Tp(t,0)}function bs(t){var i=Hi(t);if(qt(i))return t}function Rs(t,i){if(t==="change")return i}var Ll=!1;if(oi){var vi;if(oi){var ko="oninput"in document;if(!ko){var Pl=document.createElement("div");Pl.setAttribute("oninput","return;"),ko=typeof Pl.oninput=="function"}vi=ko}else vi=!1;Ll=vi&&(!document.documentMode||9<document.documentMode)}function la(){gi&&(gi.detachEvent("onpropertychange",Ul),ws=gi=null)}function Ul(t){if(t.propertyName==="value"&&bs(ws)){var i=[];Dl(i,ws,t,Ss(t)),rr(Ms,i)}}function Ri(t,i,r){t==="focusin"?(la(),gi=i,ws=r,gi.attachEvent("onpropertychange",Ul)):t==="focusout"&&la()}function Ac(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bs(ws)}function Ho(t,i){if(t==="click")return bs(i)}function wc(t,i){if(t==="input"||t==="change")return bs(i)}function Ni(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var En=typeof Object.is=="function"?Object.is:Ni;function Oo(t,i){if(En(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var r=Object.keys(t),c=Object.keys(i);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var g=r[c];if(!Ue.call(i,g)||!En(t[g],i[g]))return!1}return!0}function ua(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ns(t,i){var r=ua(t);t=0;for(var c;r;){if(r.nodeType===3){if(c=t+r.textContent.length,t<=i&&c>=i)return{node:r,offset:i-t};t=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ua(r)}}function ca(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ca(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Is(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bo(t.document);i instanceof t.HTMLIFrameElement;){try{var r=typeof i.contentWindow.location.href=="string"}catch{r=!1}if(r)t=i.contentWindow;else break;i=bo(t.document)}return i}function Vi(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var da=oi&&"documentMode"in document&&11>=document.documentMode,Fi=null,fa=null,Ds=null,Bo=!1;function zl(t,i,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Bo||Fi==null||Fi!==bo(c)||(c=Fi,"selectionStart"in c&&Vi(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ds&&Oo(Ds,c)||(Ds=c,c=xu(fa,"onSelect"),0<c.length&&(i=new ia("onSelect","select",null,i,r),t.push({event:i,listeners:c}),i.target=Fi)))}function Zi(t,i){var r={};return r[t.toLowerCase()]=i.toLowerCase(),r["Webkit"+t]="webkit"+i,r["Moz"+t]="moz"+i,r}var qo={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},ha={},kl={};oi&&(kl=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Cn(t){if(ha[t])return ha[t];if(!qo[t])return t;var i=qo[t],r;for(r in i)if(i.hasOwnProperty(r)&&r in kl)return ha[t]=i[r];return t}var Ls=Cn("animationend"),Hl=Cn("animationiteration"),Ps=Cn("animationstart"),Mc=Cn("transitionrun"),Ol=Cn("transitionstart"),bc=Cn("transitioncancel"),Go=Cn("transitionend"),Bl=new Map,Yi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yi.push("scrollEnd");function Yn(t,i){Bl.set(t,i),no(i,[t])}var Us=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Jn=[],Ln=0,ma=0;function zs(){for(var t=Ln,i=ma=Ln=0;i<t;){var r=Jn[i];Jn[i++]=null;var c=Jn[i];Jn[i++]=null;var g=Jn[i];Jn[i++]=null;var S=Jn[i];if(Jn[i++]=null,c!==null&&g!==null){var w=c.pending;w===null?g.next=g:(g.next=w.next,w.next=g),c.pending=g}S!==0&&Vo(r,g,S)}}function Ji(t,i,r,c){Jn[Ln++]=t,Jn[Ln++]=i,Jn[Ln++]=r,Jn[Ln++]=c,ma|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function vr(t,i,r,c){return Ji(t,i,r,c),ks(t)}function _i(t,i){return Ji(t,null,null,i),ks(t)}function Vo(t,i,r){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r);for(var g=!1,S=t.return;S!==null;)S.childLanes|=r,c=S.alternate,c!==null&&(c.childLanes|=r),S.tag===22&&(t=S.stateNode,t===null||t._visibility&1||(g=!0)),t=S,S=S.return;return t.tag===3?(S=t.stateNode,g&&i!==null&&(g=31-Te(r),t=S.hiddenUpdates,c=t[g],c===null?t[g]=[i]:c.push(i),i.lane=r|536870912),S):null}function ks(t){if(50<Gr)throw Gr=0,Nd=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ro={};function Rc(t,i,r,c){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,i,r,c){return new Rc(t,i,r,c)}function pa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yi(t,i){var r=t.alternate;return r===null?(r=Pn(t.tag,i,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=i,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,i=t.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function _r(t,i){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,i=r.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Hs(t,i,r,c,g,S){var w=0;if(c=t,typeof t=="function")pa(t)&&(w=1);else if(typeof t=="string")w=N0(t,r,he.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case le:return t=Pn(31,r,i,g),t.elementType=le,t.lanes=S,t;case P:return lo(r.children,g,S,i);case H:w=8,g|=24;break;case I:return t=Pn(12,r,i,g|2),t.elementType=I,t.lanes=S,t;case j:return t=Pn(13,r,i,g),t.elementType=j,t.lanes=S,t;case X:return t=Pn(19,r,i,g),t.elementType=X,t.lanes=S,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B:w=10;break e;case q:w=9;break e;case ee:w=11;break e;case Y:w=14;break e;case oe:w=16,c=null;break e}w=29,r=Error(a(130,t===null?"null":typeof t,"")),c=null}return i=Pn(w,r,i,g),i.elementType=t,i.type=c,i.lanes=S,i}function lo(t,i,r,c){return t=Pn(7,t,c,i),t.lanes=r,t}function ga(t,i,r){return t=Pn(6,t,null,i),t.lanes=r,t}function yr(t){var i=Pn(18,null,null,0);return i.stateNode=t,i}function Sr(t,i,r){return i=Pn(4,t.children!==null?t.children:[],t.key,i),i.lanes=r,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var s=new WeakMap;function u(t,i){if(typeof t=="object"&&t!==null){var r=s.get(t);return r!==void 0?r:(i={value:t,source:i,stack:Be(i)},s.set(t,i),i)}return{value:t,source:i,stack:Be(i)}}var p=[],T=0,C=null,b=0,U=[],F=0,Q=null,ae=1,Se="";function De(t,i){p[T++]=b,p[T++]=C,C=t,b=i}function je(t,i,r){U[F++]=ae,U[F++]=Se,U[F++]=Q,Q=t;var c=ae;t=Se;var g=32-Te(c)-1;c&=~(1<<g),r+=1;var S=32-Te(i)+g;if(30<S){var w=g-g%5;S=(c&(1<<w)-1).toString(32),c>>=w,g-=w,ae=1<<32-Te(i)+g|r<<g|c,Se=S+t}else ae=1<<S|r<<g|c,Se=t}function _n(t){t.return!==null&&(De(t,1),je(t,1,0))}function Wt(t){for(;t===C;)C=p[--T],p[T]=null,b=p[--T],p[T]=null;for(;t===Q;)Q=U[--F],U[F]=null,Se=U[--F],U[F]=null,ae=U[--F],U[F]=null}function Bn(t,i){U[F++]=ae,U[F++]=Se,U[F++]=Q,ae=i.id,Se=i.overflow,Q=t}var pt=null,gt=null,st=!1,Ki=null,Kn=!1,va=Error(a(519));function Xi(t){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Os(u(i,t)),va}function Tr(t){var i=t.stateNode,r=t.type,c=t.memoizedProps;switch(i[un]=t,i[xn]=c,r){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(r=0;r<Fr.length;r++)rt(Fr[r],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":rt("invalid",i),_s(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":rt("invalid",i);break;case"textarea":rt("invalid",i),Ro(i,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||i.textContent===""+r||c.suppressHydrationWarning===!0||Ap(i.textContent,r)?(c.popover!=null&&(rt("beforetoggle",i),rt("toggle",i)),c.onScroll!=null&&rt("scroll",i),c.onScrollEnd!=null&&rt("scrollend",i),c.onClick!=null&&(i.onclick=Fn),i=!0):i=!1,i||Xi(t,!0)}function Yt(t){for(pt=t.return;pt;)switch(pt.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:pt=pt.return}}function Ii(t){if(t!==pt)return!1;if(!st)return Yt(t),st=!0,!1;var i=t.tag,r;if((r=i!==3&&i!==27)&&((r=i===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Zd(t.type,t.memoizedProps)),r=!r),r&&gt&&Xi(t),Yt(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));gt=Pp(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));gt=Pp(t)}else i===27?(i=gt,is(t.type)?(t=Qd,Qd=null,gt=t):gt=i):gt=pt?Ti(t.stateNode.nextSibling):null;return!0}function uo(){gt=pt=null,st=!1}function xr(){var t=Ki;return t!==null&&($n===null?$n=t:$n.push.apply($n,t),Ki=null),t}function Os(t){Ki===null?Ki=[t]:Ki.push(t)}var Bs=z(null),Qi=null,Di=null;function Fo(t,i,r){fe(Bs,i._currentValue),i._currentValue=r}function co(t){t._currentValue=Bs.current,$(Bs)}function Nc(t,i,r){for(;t!==null;){var c=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),t===r)break;t=t.return}}function Ic(t,i,r,c){var g=t.child;for(g!==null&&(g.return=t);g!==null;){var S=g.dependencies;if(S!==null){var w=g.child;S=S.firstContext;e:for(;S!==null;){var N=S;S=g;for(var k=0;k<i.length;k++)if(N.context===i[k]){S.lanes|=r,N=S.alternate,N!==null&&(N.lanes|=r),Nc(S.return,r,t),c||(w=null);break e}S=N.next}}else if(g.tag===18){if(w=g.return,w===null)throw Error(a(341));w.lanes|=r,S=w.alternate,S!==null&&(S.lanes|=r),Nc(w,r,t),w=null}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===t){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}}function _a(t,i,r,c){t=null;for(var g=i,S=!1;g!==null;){if(!S){if((g.flags&524288)!==0)S=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var w=g.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var N=g.type;En(g.pendingProps.value,w.value)||(t!==null?t.push(N):t=[N])}}else if(g===Ae.current){if(w=g.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(t!==null?t.push(Xr):t=[Xr])}g=g.return}t!==null&&Ic(i,t,r,c),i.flags|=262144}function ql(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qs(t){Qi=t,Di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Nn(t){return ch(Qi,t)}function Gl(t,i){return Qi===null&&qs(t),ch(t,i)}function ch(t,i){var r=i._currentValue;if(i={context:i,memoizedValue:r,next:null},Di===null){if(t===null)throw Error(a(308));Di=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Di=Di.next=i;return r}var wy=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(r,c){t.push(c)}};this.abort=function(){i.aborted=!0,t.forEach(function(r){return r()})}},My=n.unstable_scheduleCallback,by=n.unstable_NormalPriority,dn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dc(){return{controller:new wy,data:new Map,refCount:0}}function Er(t){t.refCount--,t.refCount===0&&My(by,function(){t.controller.abort()})}var Cr=null,Lc=0,ya=0,Sa=null;function Ry(t,i){if(Cr===null){var r=Cr=[];Lc=0,ya=zd(),Sa={status:"pending",value:void 0,then:function(c){r.push(c)}}}return Lc++,i.then(dh,dh),i}function dh(){if(--Lc===0&&Cr!==null){Sa!==null&&(Sa.status="fulfilled");var t=Cr;Cr=null,ya=0,Sa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Ny(t,i){var r=[],c={status:"pending",value:null,reason:null,then:function(g){r.push(g)}};return t.then(function(){c.status="fulfilled",c.value=i;for(var g=0;g<r.length;g++)(0,r[g])(i)},function(g){for(c.status="rejected",c.reason=g,g=0;g<r.length;g++)(0,r[g])(void 0)}),c}var fh=Z.S;Z.S=function(t,i){Xm=tt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Ry(t,i),fh!==null&&fh(t,i)};var Gs=z(null);function Pc(){var t=Gs.current;return t!==null?t:Pt.pooledCache}function Vl(t,i){i===null?fe(Gs,Gs.current):fe(Gs,i.pool)}function hh(){var t=Pc();return t===null?null:{parent:dn._currentValue,pool:t}}var Ta=Error(a(460)),Uc=Error(a(474)),Fl=Error(a(542)),Zl={then:function(){}};function mh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ph(t,i,r){switch(r=t[r],r===void 0?t.push(i):r!==i&&(i.then(Fn,Fn),i=r),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vh(t),t;default:if(typeof i.status=="string")i.then(Fn,Fn);else{if(t=Pt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(c){if(i.status==="pending"){var g=i;g.status="fulfilled",g.value=c}},function(c){if(i.status==="pending"){var g=i;g.status="rejected",g.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,vh(t),t}throw Fs=i,Ta}}function Vs(t){try{var i=t._init;return i(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Fs=r,Ta):r}}var Fs=null;function gh(){if(Fs===null)throw Error(a(459));var t=Fs;return Fs=null,t}function vh(t){if(t===Ta||t===Fl)throw Error(a(483))}var xa=null,Ar=0;function Yl(t){var i=Ar;return Ar+=1,xa===null&&(xa=[]),ph(xa,t,i)}function wr(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Jl(t,i){throw i.$$typeof===M?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function _h(t){function i(V,G){if(t){var J=V.deletions;J===null?(V.deletions=[G],V.flags|=16):J.push(G)}}function r(V,G){if(!t)return null;for(;G!==null;)i(V,G),G=G.sibling;return null}function c(V){for(var G=new Map;V!==null;)V.key!==null?G.set(V.key,V):G.set(V.index,V),V=V.sibling;return G}function g(V,G){return V=yi(V,G),V.index=0,V.sibling=null,V}function S(V,G,J){return V.index=J,t?(J=V.alternate,J!==null?(J=J.index,J<G?(V.flags|=67108866,G):J):(V.flags|=67108866,G)):(V.flags|=1048576,G)}function w(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function N(V,G,J,se){return G===null||G.tag!==6?(G=ga(J,V.mode,se),G.return=V,G):(G=g(G,J),G.return=V,G)}function k(V,G,J,se){var ke=J.type;return ke===P?ie(V,G,J.props.children,se,J.key):G!==null&&(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===oe&&Vs(ke)===G.type)?(G=g(G,J.props),wr(G,J),G.return=V,G):(G=Hs(J.type,J.key,J.props,null,V.mode,se),wr(G,J),G.return=V,G)}function K(V,G,J,se){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Sr(J,V.mode,se),G.return=V,G):(G=g(G,J.children||[]),G.return=V,G)}function ie(V,G,J,se,ke){return G===null||G.tag!==7?(G=lo(J,V.mode,se,ke),G.return=V,G):(G=g(G,J),G.return=V,G)}function re(V,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=ga(""+G,V.mode,J),G.return=V,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case R:return J=Hs(G.type,G.key,G.props,null,V.mode,J),wr(J,G),J.return=V,J;case O:return G=Sr(G,V.mode,J),G.return=V,G;case oe:return G=Vs(G),re(V,G,J)}if(Ge(G)||ne(G))return G=lo(G,V.mode,J,null),G.return=V,G;if(typeof G.then=="function")return re(V,Yl(G),J);if(G.$$typeof===B)return re(V,Gl(V,G),J);Jl(V,G)}return null}function W(V,G,J,se){var ke=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return ke!==null?null:N(V,G,""+J,se);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case R:return J.key===ke?k(V,G,J,se):null;case O:return J.key===ke?K(V,G,J,se):null;case oe:return J=Vs(J),W(V,G,J,se)}if(Ge(J)||ne(J))return ke!==null?null:ie(V,G,J,se,null);if(typeof J.then=="function")return W(V,G,Yl(J),se);if(J.$$typeof===B)return W(V,G,Gl(V,J),se);Jl(V,J)}return null}function te(V,G,J,se,ke){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return V=V.get(J)||null,N(G,V,""+se,ke);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case R:return V=V.get(se.key===null?J:se.key)||null,k(G,V,se,ke);case O:return V=V.get(se.key===null?J:se.key)||null,K(G,V,se,ke);case oe:return se=Vs(se),te(V,G,J,se,ke)}if(Ge(se)||ne(se))return V=V.get(J)||null,ie(G,V,se,ke,null);if(typeof se.then=="function")return te(V,G,J,Yl(se),ke);if(se.$$typeof===B)return te(V,G,J,Gl(G,se),ke);Jl(G,se)}return null}function Me(V,G,J,se){for(var ke=null,vt=null,Re=G,et=G=0,ct=null;Re!==null&&et<J.length;et++){Re.index>et?(ct=Re,Re=null):ct=Re.sibling;var _t=W(V,Re,J[et],se);if(_t===null){Re===null&&(Re=ct);break}t&&Re&&_t.alternate===null&&i(V,Re),G=S(_t,G,et),vt===null?ke=_t:vt.sibling=_t,vt=_t,Re=ct}if(et===J.length)return r(V,Re),st&&De(V,et),ke;if(Re===null){for(;et<J.length;et++)Re=re(V,J[et],se),Re!==null&&(G=S(Re,G,et),vt===null?ke=Re:vt.sibling=Re,vt=Re);return st&&De(V,et),ke}for(Re=c(Re);et<J.length;et++)ct=te(Re,V,et,J[et],se),ct!==null&&(t&&ct.alternate!==null&&Re.delete(ct.key===null?et:ct.key),G=S(ct,G,et),vt===null?ke=ct:vt.sibling=ct,vt=ct);return t&&Re.forEach(function(ls){return i(V,ls)}),st&&De(V,et),ke}function qe(V,G,J,se){if(J==null)throw Error(a(151));for(var ke=null,vt=null,Re=G,et=G=0,ct=null,_t=J.next();Re!==null&&!_t.done;et++,_t=J.next()){Re.index>et?(ct=Re,Re=null):ct=Re.sibling;var ls=W(V,Re,_t.value,se);if(ls===null){Re===null&&(Re=ct);break}t&&Re&&ls.alternate===null&&i(V,Re),G=S(ls,G,et),vt===null?ke=ls:vt.sibling=ls,vt=ls,Re=ct}if(_t.done)return r(V,Re),st&&De(V,et),ke;if(Re===null){for(;!_t.done;et++,_t=J.next())_t=re(V,_t.value,se),_t!==null&&(G=S(_t,G,et),vt===null?ke=_t:vt.sibling=_t,vt=_t);return st&&De(V,et),ke}for(Re=c(Re);!_t.done;et++,_t=J.next())_t=te(Re,V,et,_t.value,se),_t!==null&&(t&&_t.alternate!==null&&Re.delete(_t.key===null?et:_t.key),G=S(_t,G,et),vt===null?ke=_t:vt.sibling=_t,vt=_t);return t&&Re.forEach(function(q0){return i(V,q0)}),st&&De(V,et),ke}function Dt(V,G,J,se){if(typeof J=="object"&&J!==null&&J.type===P&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case R:e:{for(var ke=J.key;G!==null;){if(G.key===ke){if(ke=J.type,ke===P){if(G.tag===7){r(V,G.sibling),se=g(G,J.props.children),se.return=V,V=se;break e}}else if(G.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===oe&&Vs(ke)===G.type){r(V,G.sibling),se=g(G,J.props),wr(se,J),se.return=V,V=se;break e}r(V,G);break}else i(V,G);G=G.sibling}J.type===P?(se=lo(J.props.children,V.mode,se,J.key),se.return=V,V=se):(se=Hs(J.type,J.key,J.props,null,V.mode,se),wr(se,J),se.return=V,V=se)}return w(V);case O:e:{for(ke=J.key;G!==null;){if(G.key===ke)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){r(V,G.sibling),se=g(G,J.children||[]),se.return=V,V=se;break e}else{r(V,G);break}else i(V,G);G=G.sibling}se=Sr(J,V.mode,se),se.return=V,V=se}return w(V);case oe:return J=Vs(J),Dt(V,G,J,se)}if(Ge(J))return Me(V,G,J,se);if(ne(J)){if(ke=ne(J),typeof ke!="function")throw Error(a(150));return J=ke.call(J),qe(V,G,J,se)}if(typeof J.then=="function")return Dt(V,G,Yl(J),se);if(J.$$typeof===B)return Dt(V,G,Gl(V,J),se);Jl(V,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(r(V,G.sibling),se=g(G,J),se.return=V,V=se):(r(V,G),se=ga(J,V.mode,se),se.return=V,V=se),w(V)):r(V,G)}return function(V,G,J,se){try{Ar=0;var ke=Dt(V,G,J,se);return xa=null,ke}catch(Re){if(Re===Ta||Re===Fl)throw Re;var vt=Pn(29,Re,null,V.mode);return vt.lanes=se,vt.return=V,vt}finally{}}}var Zs=_h(!0),yh=_h(!1),Zo=!1;function zc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kc(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Yo(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Jo(t,i,r){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(xt&2)!==0){var g=c.pending;return g===null?i.next=i:(i.next=g.next,g.next=i),c.pending=i,i=ks(t),Vo(t,null,r),i}return Ji(t,c,i,r),ks(t)}function Mr(t,i,r){if(i=i.updateQueue,i!==null&&(i=i.shared,(r&4194048)!==0)){var c=i.lanes;c&=t.pendingLanes,r|=c,i.lanes=r,ln(t,r)}}function Hc(t,i){var r=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var g=null,S=null;if(r=r.firstBaseUpdate,r!==null){do{var w={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};S===null?g=S=w:S=S.next=w,r=r.next}while(r!==null);S===null?g=S=i:S=S.next=i}else g=S=i;r={baseState:c.baseState,firstBaseUpdate:g,lastBaseUpdate:S,shared:c.shared,callbacks:c.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=i:t.next=i,r.lastBaseUpdate=i}var Oc=!1;function br(){if(Oc){var t=Sa;if(t!==null)throw t}}function Rr(t,i,r,c){Oc=!1;var g=t.updateQueue;Zo=!1;var S=g.firstBaseUpdate,w=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var k=N,K=k.next;k.next=null,w===null?S=K:w.next=K,w=k;var ie=t.alternate;ie!==null&&(ie=ie.updateQueue,N=ie.lastBaseUpdate,N!==w&&(N===null?ie.firstBaseUpdate=K:N.next=K,ie.lastBaseUpdate=k))}if(S!==null){var re=g.baseState;w=0,ie=K=k=null,N=S;do{var W=N.lane&-536870913,te=W!==N.lane;if(te?(ut&W)===W:(c&W)===W){W!==0&&W===ya&&(Oc=!0),ie!==null&&(ie=ie.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Me=t,qe=N;W=i;var Dt=r;switch(qe.tag){case 1:if(Me=qe.payload,typeof Me=="function"){re=Me.call(Dt,re,W);break e}re=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=qe.payload,W=typeof Me=="function"?Me.call(Dt,re,W):Me,W==null)break e;re=E({},re,W);break e;case 2:Zo=!0}}W=N.callback,W!==null&&(t.flags|=64,te&&(t.flags|=8192),te=g.callbacks,te===null?g.callbacks=[W]:te.push(W))}else te={lane:W,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ie===null?(K=ie=te,k=re):ie=ie.next=te,w|=W;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;te=N,N=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);ie===null&&(k=re),g.baseState=k,g.firstBaseUpdate=K,g.lastBaseUpdate=ie,S===null&&(g.shared.lanes=0),$o|=w,t.lanes=w,t.memoizedState=re}}function Sh(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Th(t,i){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Sh(r[t],i)}var Ea=z(null),Kl=z(0);function xh(t,i){t=So,fe(Kl,t),fe(Ea,i),So=t|i.baseLanes}function Bc(){fe(Kl,So),fe(Ea,Ea.current)}function qc(){So=Kl.current,$(Ea),$(Kl)}var ri=z(null),Si=null;function Ko(t){var i=t.alternate;fe(tn,tn.current&1),fe(ri,t),Si===null&&(i===null||Ea.current!==null||i.memoizedState!==null)&&(Si=t)}function Gc(t){fe(tn,tn.current),fe(ri,t),Si===null&&(Si=t)}function Eh(t){t.tag===22?(fe(tn,tn.current),fe(ri,t),Si===null&&(Si=t)):Xo()}function Xo(){fe(tn,tn.current),fe(ri,ri.current)}function li(t){$(ri),Si===t&&(Si=null),$(tn)}var tn=z(0);function Xl(t){for(var i=t;i!==null;){if(i.tag===13){var r=i.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Kd(r)||Xd(r)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fo=0,We=null,Nt=null,fn=null,Ql=!1,Ca=!1,Ys=!1,Wl=0,Nr=0,Aa=null,Iy=0;function $t(){throw Error(a(321))}function Vc(t,i){if(i===null)return!1;for(var r=0;r<i.length&&r<t.length;r++)if(!En(t[r],i[r]))return!1;return!0}function Fc(t,i,r,c,g,S){return fo=S,We=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Z.H=t===null||t.memoizedState===null?am:sd,Ys=!1,S=r(c,g),Ys=!1,Ca&&(S=Ah(i,r,c,g)),Ch(t),S}function Ch(t){Z.H=Lr;var i=Nt!==null&&Nt.next!==null;if(fo=0,fn=Nt=We=null,Ql=!1,Nr=0,Aa=null,i)throw Error(a(300));t===null||hn||(t=t.dependencies,t!==null&&ql(t)&&(hn=!0))}function Ah(t,i,r,c){We=t;var g=0;do{if(Ca&&(Aa=null),Nr=0,Ca=!1,25<=g)throw Error(a(301));if(g+=1,fn=Nt=null,t.updateQueue!=null){var S=t.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}Z.H=rm,S=i(r,c)}while(Ca);return S}function Dy(){var t=Z.H,i=t.useState()[0];return i=typeof i.then=="function"?Ir(i):i,t=t.useState()[0],(Nt!==null?Nt.memoizedState:null)!==t&&(We.flags|=1024),i}function Zc(){var t=Wl!==0;return Wl=0,t}function Yc(t,i,r){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~r}function Jc(t){if(Ql){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Ql=!1}fo=0,fn=Nt=We=null,Ca=!1,Nr=Wl=0,Aa=null}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?We.memoizedState=fn=t:fn=fn.next=t,fn}function nn(){if(Nt===null){var t=We.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var i=fn===null?We.memoizedState:fn.next;if(i!==null)fn=i,Nt=t;else{if(t===null)throw We.alternate===null?Error(a(467)):Error(a(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},fn===null?We.memoizedState=fn=t:fn=fn.next=t}return fn}function $l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ir(t){var i=Nr;return Nr+=1,Aa===null&&(Aa=[]),t=ph(Aa,t,i),i=We,(fn===null?i.memoizedState:fn.next)===null&&(i=i.alternate,Z.H=i===null||i.memoizedState===null?am:sd),t}function jl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ir(t);if(t.$$typeof===B)return Nn(t)}throw Error(a(438,String(t)))}function Kc(t){var i=null,r=We.updateQueue;if(r!==null&&(i=r.memoCache),i==null){var c=We.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(g){return g.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),r===null&&(r=$l(),We.updateQueue=r),r.memoCache=i,r=i.data[i.index],r===void 0)for(r=i.data[i.index]=Array(t),c=0;c<t;c++)r[c]=pe;return i.index++,r}function ho(t,i){return typeof i=="function"?i(t):i}function eu(t){var i=nn();return Xc(i,Nt,t)}function Xc(t,i,r){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=r;var g=t.baseQueue,S=c.pending;if(S!==null){if(g!==null){var w=g.next;g.next=S.next,S.next=w}i.baseQueue=g=S,c.pending=null}if(S=t.baseState,g===null)t.memoizedState=S;else{i=g.next;var N=w=null,k=null,K=i,ie=!1;do{var re=K.lane&-536870913;if(re!==K.lane?(ut&re)===re:(fo&re)===re){var W=K.revertLane;if(W===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),re===ya&&(ie=!0);else if((fo&W)===W){K=K.next,W===ya&&(ie=!0);continue}else re={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(N=k=re,w=S):k=k.next=re,We.lanes|=W,$o|=W;re=K.action,Ys&&r(S,re),S=K.hasEagerState?K.eagerState:r(S,re)}else W={lane:re,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},k===null?(N=k=W,w=S):k=k.next=W,We.lanes|=re,$o|=re;K=K.next}while(K!==null&&K!==i);if(k===null?w=S:k.next=N,!En(S,t.memoizedState)&&(hn=!0,ie&&(r=Sa,r!==null)))throw r;t.memoizedState=S,t.baseState=w,t.baseQueue=k,c.lastRenderedState=S}return g===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Qc(t){var i=nn(),r=i.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var c=r.dispatch,g=r.pending,S=i.memoizedState;if(g!==null){r.pending=null;var w=g=g.next;do S=t(S,w.action),w=w.next;while(w!==g);En(S,i.memoizedState)||(hn=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),r.lastRenderedState=S}return[S,c]}function wh(t,i,r){var c=We,g=nn(),S=st;if(S){if(r===void 0)throw Error(a(407));r=r()}else r=i();var w=!En((Nt||g).memoizedState,r);if(w&&(g.memoizedState=r,hn=!0),g=g.queue,jc(Rh.bind(null,c,g,t),[t]),g.getSnapshot!==i||w||fn!==null&&fn.memoizedState.tag&1){if(c.flags|=2048,wa(9,{destroy:void 0},bh.bind(null,c,g,r,i),null),Pt===null)throw Error(a(349));S||(fo&127)!==0||Mh(c,i,r)}return r}function Mh(t,i,r){t.flags|=16384,t={getSnapshot:i,value:r},i=We.updateQueue,i===null?(i=$l(),We.updateQueue=i,i.stores=[t]):(r=i.stores,r===null?i.stores=[t]:r.push(t))}function bh(t,i,r,c){i.value=r,i.getSnapshot=c,Nh(i)&&Ih(t)}function Rh(t,i,r){return r(function(){Nh(i)&&Ih(t)})}function Nh(t){var i=t.getSnapshot;t=t.value;try{var r=i();return!En(t,r)}catch{return!0}}function Ih(t){var i=_i(t,2);i!==null&&jn(i,t,2)}function Wc(t){var i=qn();if(typeof t=="function"){var r=t;if(t=r(),Ys){ce(!0);try{r()}finally{ce(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:t},i}function Dh(t,i,r,c){return t.baseState=r,Xc(t,Nt,typeof c=="function"?c:ho)}function Ly(t,i,r,c,g){if(iu(t))throw Error(a(485));if(t=i.action,t!==null){var S={payload:g,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){S.listeners.push(w)}};Z.T!==null?r(!0):S.isTransition=!1,c(S),r=i.pending,r===null?(S.next=i.pending=S,Lh(i,S)):(S.next=r.next,i.pending=r.next=S)}}function Lh(t,i){var r=i.action,c=i.payload,g=t.state;if(i.isTransition){var S=Z.T,w={};Z.T=w;try{var N=r(g,c),k=Z.S;k!==null&&k(w,N),Ph(t,i,N)}catch(K){$c(t,i,K)}finally{S!==null&&w.types!==null&&(S.types=w.types),Z.T=S}}else try{S=r(g,c),Ph(t,i,S)}catch(K){$c(t,i,K)}}function Ph(t,i,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Uh(t,i,c)},function(c){return $c(t,i,c)}):Uh(t,i,r)}function Uh(t,i,r){i.status="fulfilled",i.value=r,zh(i),t.state=r,i=t.pending,i!==null&&(r=i.next,r===i?t.pending=null:(r=r.next,i.next=r,Lh(t,r)))}function $c(t,i,r){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=r,zh(i),i=i.next;while(i!==c)}t.action=null}function zh(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function kh(t,i){return i}function Hh(t,i){if(st){var r=Pt.formState;if(r!==null){e:{var c=We;if(st){if(gt){t:{for(var g=gt,S=Kn;g.nodeType!==8;){if(!S){g=null;break t}if(g=Ti(g.nextSibling),g===null){g=null;break t}}S=g.data,g=S==="F!"||S==="F"?g:null}if(g){gt=Ti(g.nextSibling),c=g.data==="F!";break e}}Xi(c)}c=!1}c&&(i=r[0])}}return r=qn(),r.memoizedState=r.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kh,lastRenderedState:i},r.queue=c,r=im.bind(null,We,c),c.dispatch=r,c=Wc(!1),S=od.bind(null,We,!1,c.queue),c=qn(),g={state:i,dispatch:null,action:t,pending:null},c.queue=g,r=Ly.bind(null,We,g,S,r),g.dispatch=r,c.memoizedState=t,[i,r,!1]}function Oh(t){var i=nn();return Bh(i,Nt,t)}function Bh(t,i,r){if(i=Xc(t,i,kh)[0],t=eu(ho)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ir(i)}catch(w){throw w===Ta?Fl:w}else c=i;i=nn();var g=i.queue,S=g.dispatch;return r!==i.memoizedState&&(We.flags|=2048,wa(9,{destroy:void 0},Py.bind(null,g,r),null)),[c,S,t]}function Py(t,i){t.action=i}function qh(t){var i=nn(),r=Nt;if(r!==null)return Bh(i,r,t);nn(),i=i.memoizedState,r=nn();var c=r.queue.dispatch;return r.memoizedState=t,[i,c,!1]}function wa(t,i,r,c){return t={tag:t,create:r,deps:c,inst:i,next:null},i=We.updateQueue,i===null&&(i=$l(),We.updateQueue=i),r=i.lastEffect,r===null?i.lastEffect=t.next=t:(c=r.next,r.next=t,t.next=c,i.lastEffect=t),t}function Gh(){return nn().memoizedState}function tu(t,i,r,c){var g=qn();We.flags|=t,g.memoizedState=wa(1|i,{destroy:void 0},r,c===void 0?null:c)}function nu(t,i,r,c){var g=nn();c=c===void 0?null:c;var S=g.memoizedState.inst;Nt!==null&&c!==null&&Vc(c,Nt.memoizedState.deps)?g.memoizedState=wa(i,S,r,c):(We.flags|=t,g.memoizedState=wa(1|i,S,r,c))}function Vh(t,i){tu(8390656,8,t,i)}function jc(t,i){nu(2048,8,t,i)}function Uy(t){We.flags|=4;var i=We.updateQueue;if(i===null)i=$l(),We.updateQueue=i,i.events=[t];else{var r=i.events;r===null?i.events=[t]:r.push(t)}}function Fh(t){var i=nn().memoizedState;return Uy({ref:i,nextImpl:t}),function(){if((xt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function Zh(t,i){return nu(4,2,t,i)}function Yh(t,i){return nu(4,4,t,i)}function Jh(t,i){if(typeof i=="function"){t=t();var r=i(t);return function(){typeof r=="function"?r():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Kh(t,i,r){r=r!=null?r.concat([t]):null,nu(4,4,Jh.bind(null,i,t),r)}function ed(){}function Xh(t,i){var r=nn();i=i===void 0?null:i;var c=r.memoizedState;return i!==null&&Vc(i,c[1])?c[0]:(r.memoizedState=[t,i],t)}function Qh(t,i){var r=nn();i=i===void 0?null:i;var c=r.memoizedState;if(i!==null&&Vc(i,c[1]))return c[0];if(c=t(),Ys){ce(!0);try{t()}finally{ce(!1)}}return r.memoizedState=[c,i],c}function td(t,i,r){return r===void 0||(fo&1073741824)!==0&&(ut&261930)===0?t.memoizedState=i:(t.memoizedState=r,t=Wm(),We.lanes|=t,$o|=t,r)}function Wh(t,i,r,c){return En(r,i)?r:Ea.current!==null?(t=td(t,r,c),En(t,i)||(hn=!0),t):(fo&42)===0||(fo&1073741824)!==0&&(ut&261930)===0?(hn=!0,t.memoizedState=r):(t=Wm(),We.lanes|=t,$o|=t,i)}function $h(t,i,r,c,g){var S=ue.p;ue.p=S!==0&&8>S?S:8;var w=Z.T,N={};Z.T=N,od(t,!1,i,r);try{var k=g(),K=Z.S;if(K!==null&&K(N,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ie=Ny(k,c);Dr(t,i,ie,di(t))}else Dr(t,i,c,di(t))}catch(re){Dr(t,i,{then:function(){},status:"rejected",reason:re},di())}finally{ue.p=S,w!==null&&N.types!==null&&(w.types=N.types),Z.T=w}}function zy(){}function nd(t,i,r,c){if(t.tag!==5)throw Error(a(476));var g=jh(t).queue;$h(t,g,i,de,r===null?zy:function(){return em(t),r(c)})}function jh(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:de},next:null};var r={};return i.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:r},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function em(t){var i=jh(t);i.next===null&&(i=t.alternate.memoizedState),Dr(t,i.next.queue,{},di())}function id(){return Nn(Xr)}function tm(){return nn().memoizedState}function nm(){return nn().memoizedState}function ky(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var r=di();t=Yo(r);var c=Jo(i,t,r);c!==null&&(jn(c,i,r),Mr(c,i,r)),i={cache:Dc()},t.payload=i;return}i=i.return}}function Hy(t,i,r){var c=di();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},iu(t)?om(i,r):(r=vr(t,i,r,c),r!==null&&(jn(r,t,c),sm(r,i,c)))}function im(t,i,r){var c=di();Dr(t,i,r,c)}function Dr(t,i,r,c){var g={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(iu(t))om(i,g);else{var S=t.alternate;if(t.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var w=i.lastRenderedState,N=S(w,r);if(g.hasEagerState=!0,g.eagerState=N,En(N,w))return Ji(t,i,g,0),Pt===null&&zs(),!1}catch{}finally{}if(r=vr(t,i,g,c),r!==null)return jn(r,t,c),sm(r,i,c),!0}return!1}function od(t,i,r,c){if(c={lane:2,revertLane:zd(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},iu(t)){if(i)throw Error(a(479))}else i=vr(t,r,c,2),i!==null&&jn(i,t,2)}function iu(t){var i=t.alternate;return t===We||i!==null&&i===We}function om(t,i){Ca=Ql=!0;var r=t.pending;r===null?i.next=i:(i.next=r.next,r.next=i),t.pending=i}function sm(t,i,r){if((r&4194048)!==0){var c=i.lanes;c&=t.pendingLanes,r|=c,i.lanes=r,ln(t,r)}}var Lr={readContext:Nn,use:jl,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Lr.useEffectEvent=$t;var am={readContext:Nn,use:jl,useCallback:function(t,i){return qn().memoizedState=[t,i===void 0?null:i],t},useContext:Nn,useEffect:Vh,useImperativeHandle:function(t,i,r){r=r!=null?r.concat([t]):null,tu(4194308,4,Jh.bind(null,i,t),r)},useLayoutEffect:function(t,i){return tu(4194308,4,t,i)},useInsertionEffect:function(t,i){tu(4,2,t,i)},useMemo:function(t,i){var r=qn();i=i===void 0?null:i;var c=t();if(Ys){ce(!0);try{t()}finally{ce(!1)}}return r.memoizedState=[c,i],c},useReducer:function(t,i,r){var c=qn();if(r!==void 0){var g=r(i);if(Ys){ce(!0);try{r(i)}finally{ce(!1)}}}else g=i;return c.memoizedState=c.baseState=g,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:g},c.queue=t,t=t.dispatch=Hy.bind(null,We,t),[c.memoizedState,t]},useRef:function(t){var i=qn();return t={current:t},i.memoizedState=t},useState:function(t){t=Wc(t);var i=t.queue,r=im.bind(null,We,i);return i.dispatch=r,[t.memoizedState,r]},useDebugValue:ed,useDeferredValue:function(t,i){var r=qn();return td(r,t,i)},useTransition:function(){var t=Wc(!1);return t=$h.bind(null,We,t.queue,!0,!1),qn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,r){var c=We,g=qn();if(st){if(r===void 0)throw Error(a(407));r=r()}else{if(r=i(),Pt===null)throw Error(a(349));(ut&127)!==0||Mh(c,i,r)}g.memoizedState=r;var S={value:r,getSnapshot:i};return g.queue=S,Vh(Rh.bind(null,c,S,t),[t]),c.flags|=2048,wa(9,{destroy:void 0},bh.bind(null,c,S,r,i),null),r},useId:function(){var t=qn(),i=Pt.identifierPrefix;if(st){var r=Se,c=ae;r=(c&~(1<<32-Te(c)-1)).toString(32)+r,i="_"+i+"R_"+r,r=Wl++,0<r&&(i+="H"+r.toString(32)),i+="_"}else r=Iy++,i="_"+i+"r_"+r.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:id,useFormState:Hh,useActionState:Hh,useOptimistic:function(t){var i=qn();i.memoizedState=i.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=r,i=od.bind(null,We,!0,r),r.dispatch=i,[t,i]},useMemoCache:Kc,useCacheRefresh:function(){return qn().memoizedState=ky.bind(null,We)},useEffectEvent:function(t){var i=qn(),r={impl:t};return i.memoizedState=r,function(){if((xt&2)!==0)throw Error(a(440));return r.impl.apply(void 0,arguments)}}},sd={readContext:Nn,use:jl,useCallback:Xh,useContext:Nn,useEffect:jc,useImperativeHandle:Kh,useInsertionEffect:Zh,useLayoutEffect:Yh,useMemo:Qh,useReducer:eu,useRef:Gh,useState:function(){return eu(ho)},useDebugValue:ed,useDeferredValue:function(t,i){var r=nn();return Wh(r,Nt.memoizedState,t,i)},useTransition:function(){var t=eu(ho)[0],i=nn().memoizedState;return[typeof t=="boolean"?t:Ir(t),i]},useSyncExternalStore:wh,useId:tm,useHostTransitionStatus:id,useFormState:Oh,useActionState:Oh,useOptimistic:function(t,i){var r=nn();return Dh(r,Nt,t,i)},useMemoCache:Kc,useCacheRefresh:nm};sd.useEffectEvent=Fh;var rm={readContext:Nn,use:jl,useCallback:Xh,useContext:Nn,useEffect:jc,useImperativeHandle:Kh,useInsertionEffect:Zh,useLayoutEffect:Yh,useMemo:Qh,useReducer:Qc,useRef:Gh,useState:function(){return Qc(ho)},useDebugValue:ed,useDeferredValue:function(t,i){var r=nn();return Nt===null?td(r,t,i):Wh(r,Nt.memoizedState,t,i)},useTransition:function(){var t=Qc(ho)[0],i=nn().memoizedState;return[typeof t=="boolean"?t:Ir(t),i]},useSyncExternalStore:wh,useId:tm,useHostTransitionStatus:id,useFormState:qh,useActionState:qh,useOptimistic:function(t,i){var r=nn();return Nt!==null?Dh(r,Nt,t,i):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Kc,useCacheRefresh:nm};rm.useEffectEvent=Fh;function ad(t,i,r,c){i=t.memoizedState,r=r(c,i),r=r==null?i:E({},i,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var rd={enqueueSetState:function(t,i,r){t=t._reactInternals;var c=di(),g=Yo(c);g.payload=i,r!=null&&(g.callback=r),i=Jo(t,g,c),i!==null&&(jn(i,t,c),Mr(i,t,c))},enqueueReplaceState:function(t,i,r){t=t._reactInternals;var c=di(),g=Yo(c);g.tag=1,g.payload=i,r!=null&&(g.callback=r),i=Jo(t,g,c),i!==null&&(jn(i,t,c),Mr(i,t,c))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var r=di(),c=Yo(r);c.tag=2,i!=null&&(c.callback=i),i=Jo(t,c,r),i!==null&&(jn(i,t,r),Mr(i,t,r))}};function lm(t,i,r,c,g,S,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,S,w):i.prototype&&i.prototype.isPureReactComponent?!Oo(r,c)||!Oo(g,S):!0}function um(t,i,r,c){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(r,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(r,c),i.state!==t&&rd.enqueueReplaceState(i,i.state,null)}function Js(t,i){var r=i;if("ref"in i){r={};for(var c in i)c!=="ref"&&(r[c]=i[c])}if(t=t.defaultProps){r===i&&(r=E({},r));for(var g in t)r[g]===void 0&&(r[g]=t[g])}return r}function cm(t){Us(t)}function dm(t){console.error(t)}function fm(t){Us(t)}function ou(t,i){try{var r=t.onUncaughtError;r(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function hm(t,i,r){try{var c=t.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ld(t,i,r){return r=Yo(r),r.tag=3,r.payload={element:null},r.callback=function(){ou(t,i)},r}function mm(t){return t=Yo(t),t.tag=3,t}function pm(t,i,r,c){var g=r.type.getDerivedStateFromError;if(typeof g=="function"){var S=c.value;t.payload=function(){return g(S)},t.callback=function(){hm(i,r,c)}}var w=r.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){hm(i,r,c),typeof g!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function Oy(t,i,r,c,g){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=r.alternate,i!==null&&_a(i,r,g,!0),r=ri.current,r!==null){switch(r.tag){case 31:case 13:return Si===null?gu():r.alternate===null&&jt===0&&(jt=3),r.flags&=-257,r.flags|=65536,r.lanes=g,c===Zl?r.flags|=16384:(i=r.updateQueue,i===null?r.updateQueue=new Set([c]):i.add(c),Ld(t,c,g)),!1;case 22:return r.flags|=65536,c===Zl?r.flags|=16384:(i=r.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=i):(r=i.retryQueue,r===null?i.retryQueue=new Set([c]):r.add(c)),Ld(t,c,g)),!1}throw Error(a(435,r.tag))}return Ld(t,c,g),gu(),!1}if(st)return i=ri.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=g,c!==va&&(t=Error(a(422),{cause:c}),Os(u(t,r)))):(c!==va&&(i=Error(a(423),{cause:c}),Os(u(i,r))),t=t.current.alternate,t.flags|=65536,g&=-g,t.lanes|=g,c=u(c,r),g=ld(t.stateNode,c,g),Hc(t,g),jt!==4&&(jt=2)),!1;var S=Error(a(520),{cause:c});if(S=u(S,r),qr===null?qr=[S]:qr.push(S),jt!==4&&(jt=2),i===null)return!0;c=u(c,r),r=i;do{switch(r.tag){case 3:return r.flags|=65536,t=g&-g,r.lanes|=t,t=ld(r.stateNode,c,t),Hc(r,t),!1;case 1:if(i=r.type,S=r.stateNode,(r.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(jo===null||!jo.has(S))))return r.flags|=65536,g&=-g,r.lanes|=g,g=mm(g),pm(g,t,r,c),Hc(r,g),!1}r=r.return}while(r!==null);return!1}var ud=Error(a(461)),hn=!1;function In(t,i,r,c){i.child=t===null?yh(i,null,r,c):Zs(i,t.child,r,c)}function gm(t,i,r,c,g){r=r.render;var S=i.ref;if("ref"in c){var w={};for(var N in c)N!=="ref"&&(w[N]=c[N])}else w=c;return qs(i),c=Fc(t,i,r,w,S,g),N=Zc(),t!==null&&!hn?(Yc(t,i,g),mo(t,i,g)):(st&&N&&_n(i),i.flags|=1,In(t,i,c,g),i.child)}function vm(t,i,r,c,g){if(t===null){var S=r.type;return typeof S=="function"&&!pa(S)&&S.defaultProps===void 0&&r.compare===null?(i.tag=15,i.type=S,_m(t,i,S,c,g)):(t=Hs(r.type,null,c,i,i.mode,g),t.ref=i.ref,t.return=i,i.child=t)}if(S=t.child,!vd(t,g)){var w=S.memoizedProps;if(r=r.compare,r=r!==null?r:Oo,r(w,c)&&t.ref===i.ref)return mo(t,i,g)}return i.flags|=1,t=yi(S,c),t.ref=i.ref,t.return=i,i.child=t}function _m(t,i,r,c,g){if(t!==null){var S=t.memoizedProps;if(Oo(S,c)&&t.ref===i.ref)if(hn=!1,i.pendingProps=c=S,vd(t,g))(t.flags&131072)!==0&&(hn=!0);else return i.lanes=t.lanes,mo(t,i,g)}return cd(t,i,r,c,g)}function ym(t,i,r,c){var g=c.children,S=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((i.flags&128)!==0){if(S=S!==null?S.baseLanes|r:r,t!==null){for(c=i.child=t.child,g=0;c!==null;)g=g|c.lanes|c.childLanes,c=c.sibling;c=g&~S}else c=0,i.child=null;return Sm(t,i,S,r,c)}if((r&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vl(i,S!==null?S.cachePool:null),S!==null?xh(i,S):Bc(),Eh(i);else return c=i.lanes=536870912,Sm(t,i,S!==null?S.baseLanes|r:r,r,c)}else S!==null?(Vl(i,S.cachePool),xh(i,S),Xo(),i.memoizedState=null):(t!==null&&Vl(i,null),Bc(),Xo());return In(t,i,g,r),i.child}function Pr(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Sm(t,i,r,c,g){var S=Pc();return S=S===null?null:{parent:dn._currentValue,pool:S},i.memoizedState={baseLanes:r,cachePool:S},t!==null&&Vl(i,null),Bc(),Eh(i),t!==null&&_a(t,i,c,!0),i.childLanes=g,null}function su(t,i){return i=ru({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Tm(t,i,r){return Zs(i,t.child,null,r),t=su(i,i.pendingProps),t.flags|=2,li(i),i.memoizedState=null,t}function By(t,i,r){var c=i.pendingProps,g=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(st){if(c.mode==="hidden")return t=su(i,c),i.lanes=536870912,Pr(null,t);if(Gc(i),(t=gt)?(t=Lp(t,Kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Q!==null?{id:ae,overflow:Se}:null,retryLane:536870912,hydrationErrors:null},r=yr(t),r.return=i,i.child=r,pt=i,gt=null)):t=null,t===null)throw Xi(i);return i.lanes=536870912,null}return su(i,c)}var S=t.memoizedState;if(S!==null){var w=S.dehydrated;if(Gc(i),g)if(i.flags&256)i.flags&=-257,i=Tm(t,i,r);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(a(558));else if(hn||_a(t,i,r,!1),g=(r&t.childLanes)!==0,hn||g){if(c=Pt,c!==null&&(w=Tn(c,r),w!==0&&w!==S.retryLane))throw S.retryLane=w,_i(t,w),jn(c,t,w),ud;gu(),i=Tm(t,i,r)}else t=S.treeContext,gt=Ti(w.nextSibling),pt=i,st=!0,Ki=null,Kn=!1,t!==null&&Bn(i,t),i=su(i,c),i.flags|=4096;return i}return t=yi(t.child,{mode:c.mode,children:c.children}),t.ref=i.ref,i.child=t,t.return=i,t}function au(t,i){var r=i.ref;if(r===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(i.flags|=4194816)}}function cd(t,i,r,c,g){return qs(i),r=Fc(t,i,r,c,void 0,g),c=Zc(),t!==null&&!hn?(Yc(t,i,g),mo(t,i,g)):(st&&c&&_n(i),i.flags|=1,In(t,i,r,g),i.child)}function xm(t,i,r,c,g,S){return qs(i),i.updateQueue=null,r=Ah(i,c,r,g),Ch(t),c=Zc(),t!==null&&!hn?(Yc(t,i,S),mo(t,i,S)):(st&&c&&_n(i),i.flags|=1,In(t,i,r,S),i.child)}function Em(t,i,r,c,g){if(qs(i),i.stateNode===null){var S=ro,w=r.contextType;typeof w=="object"&&w!==null&&(S=Nn(w)),S=new r(c,S),i.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=rd,i.stateNode=S,S._reactInternals=i,S=i.stateNode,S.props=c,S.state=i.memoizedState,S.refs={},zc(i),w=r.contextType,S.context=typeof w=="object"&&w!==null?Nn(w):ro,S.state=i.memoizedState,w=r.getDerivedStateFromProps,typeof w=="function"&&(ad(i,r,w,c),S.state=i.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(w=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),w!==S.state&&rd.enqueueReplaceState(S,S.state,null),Rr(i,c,S,g),br(),S.state=i.memoizedState),typeof S.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(t===null){S=i.stateNode;var N=i.memoizedProps,k=Js(r,N);S.props=k;var K=S.context,ie=r.contextType;w=ro,typeof ie=="object"&&ie!==null&&(w=Nn(ie));var re=r.getDerivedStateFromProps;ie=typeof re=="function"||typeof S.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,ie||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N||K!==w)&&um(i,S,c,w),Zo=!1;var W=i.memoizedState;S.state=W,Rr(i,c,S,g),br(),K=i.memoizedState,N||W!==K||Zo?(typeof re=="function"&&(ad(i,r,re,c),K=i.memoizedState),(k=Zo||lm(i,r,k,c,W,K,w))?(ie||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(i.flags|=4194308)):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=K),S.props=c,S.state=K,S.context=w,c=k):(typeof S.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{S=i.stateNode,kc(t,i),w=i.memoizedProps,ie=Js(r,w),S.props=ie,re=i.pendingProps,W=S.context,K=r.contextType,k=ro,typeof K=="object"&&K!==null&&(k=Nn(K)),N=r.getDerivedStateFromProps,(K=typeof N=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(w!==re||W!==k)&&um(i,S,c,k),Zo=!1,W=i.memoizedState,S.state=W,Rr(i,c,S,g),br();var te=i.memoizedState;w!==re||W!==te||Zo||t!==null&&t.dependencies!==null&&ql(t.dependencies)?(typeof N=="function"&&(ad(i,r,N,c),te=i.memoizedState),(ie=Zo||lm(i,r,ie,c,W,te,k)||t!==null&&t.dependencies!==null&&ql(t.dependencies))?(K||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(c,te,k),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(c,te,k)),typeof S.componentDidUpdate=="function"&&(i.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof S.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=te),S.props=c,S.state=te,S.context=k,c=ie):(typeof S.componentDidUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&W===t.memoizedState||(i.flags|=1024),c=!1)}return S=c,au(t,i),c=(i.flags&128)!==0,S||c?(S=i.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:S.render(),i.flags|=1,t!==null&&c?(i.child=Zs(i,t.child,null,g),i.child=Zs(i,null,r,g)):In(t,i,r,g),i.memoizedState=S.state,t=i.child):t=mo(t,i,g),t}function Cm(t,i,r,c){return uo(),i.flags|=256,In(t,i,r,c),i.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(t){return{baseLanes:t,cachePool:hh()}}function hd(t,i,r){return t=t!==null?t.childLanes&~r:0,i&&(t|=ci),t}function Am(t,i,r){var c=i.pendingProps,g=!1,S=(i.flags&128)!==0,w;if((w=S)||(w=t!==null&&t.memoizedState===null?!1:(tn.current&2)!==0),w&&(g=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,t===null){if(st){if(g?Ko(i):Xo(),(t=gt)?(t=Lp(t,Kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Q!==null?{id:ae,overflow:Se}:null,retryLane:536870912,hydrationErrors:null},r=yr(t),r.return=i,i.child=r,pt=i,gt=null)):t=null,t===null)throw Xi(i);return Xd(t)?i.lanes=32:i.lanes=536870912,null}var N=c.children;return c=c.fallback,g?(Xo(),g=i.mode,N=ru({mode:"hidden",children:N},g),c=lo(c,g,r,null),N.return=i,c.return=i,N.sibling=c,i.child=N,c=i.child,c.memoizedState=fd(r),c.childLanes=hd(t,w,r),i.memoizedState=dd,Pr(null,c)):(Ko(i),md(i,N))}var k=t.memoizedState;if(k!==null&&(N=k.dehydrated,N!==null)){if(S)i.flags&256?(Ko(i),i.flags&=-257,i=pd(t,i,r)):i.memoizedState!==null?(Xo(),i.child=t.child,i.flags|=128,i=null):(Xo(),N=c.fallback,g=i.mode,c=ru({mode:"visible",children:c.children},g),N=lo(N,g,r,null),N.flags|=2,c.return=i,N.return=i,c.sibling=N,i.child=c,Zs(i,t.child,null,r),c=i.child,c.memoizedState=fd(r),c.childLanes=hd(t,w,r),i.memoizedState=dd,i=Pr(null,c));else if(Ko(i),Xd(N)){if(w=N.nextSibling&&N.nextSibling.dataset,w)var K=w.dgst;w=K,c=Error(a(419)),c.stack="",c.digest=w,Os({value:c,source:null,stack:null}),i=pd(t,i,r)}else if(hn||_a(t,i,r,!1),w=(r&t.childLanes)!==0,hn||w){if(w=Pt,w!==null&&(c=Tn(w,r),c!==0&&c!==k.retryLane))throw k.retryLane=c,_i(t,c),jn(w,t,c),ud;Kd(N)||gu(),i=pd(t,i,r)}else Kd(N)?(i.flags|=192,i.child=t.child,i=null):(t=k.treeContext,gt=Ti(N.nextSibling),pt=i,st=!0,Ki=null,Kn=!1,t!==null&&Bn(i,t),i=md(i,c.children),i.flags|=4096);return i}return g?(Xo(),N=c.fallback,g=i.mode,k=t.child,K=k.sibling,c=yi(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,K!==null?N=yi(K,N):(N=lo(N,g,r,null),N.flags|=2),N.return=i,c.return=i,c.sibling=N,i.child=c,Pr(null,c),c=i.child,N=t.child.memoizedState,N===null?N=fd(r):(g=N.cachePool,g!==null?(k=dn._currentValue,g=g.parent!==k?{parent:k,pool:k}:g):g=hh(),N={baseLanes:N.baseLanes|r,cachePool:g}),c.memoizedState=N,c.childLanes=hd(t,w,r),i.memoizedState=dd,Pr(t.child,c)):(Ko(i),r=t.child,t=r.sibling,r=yi(r,{mode:"visible",children:c.children}),r.return=i,r.sibling=null,t!==null&&(w=i.deletions,w===null?(i.deletions=[t],i.flags|=16):w.push(t)),i.child=r,i.memoizedState=null,r)}function md(t,i){return i=ru({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function ru(t,i){return t=Pn(22,t,null,i),t.lanes=0,t}function pd(t,i,r){return Zs(i,t.child,null,r),t=md(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function wm(t,i,r){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i),Nc(t.return,i,r)}function gd(t,i,r,c,g,S){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:g,treeForkCount:S}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=r,w.tailMode=g,w.treeForkCount=S)}function Mm(t,i,r){var c=i.pendingProps,g=c.revealOrder,S=c.tail;c=c.children;var w=tn.current,N=(w&2)!==0;if(N?(w=w&1|2,i.flags|=128):w&=1,fe(tn,w),In(t,i,c,r),c=st?b:0,!N&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wm(t,r,i);else if(t.tag===19)wm(t,r,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(g){case"forwards":for(r=i.child,g=null;r!==null;)t=r.alternate,t!==null&&Xl(t)===null&&(g=r),r=r.sibling;r=g,r===null?(g=i.child,i.child=null):(g=r.sibling,r.sibling=null),gd(i,!1,g,r,S,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,g=i.child,i.child=null;g!==null;){if(t=g.alternate,t!==null&&Xl(t)===null){i.child=g;break}t=g.sibling,g.sibling=r,r=g,g=t}gd(i,!0,r,null,S,c);break;case"together":gd(i,!1,null,null,void 0,c);break;default:i.memoizedState=null}return i.child}function mo(t,i,r){if(t!==null&&(i.dependencies=t.dependencies),$o|=i.lanes,(r&i.childLanes)===0)if(t!==null){if(_a(t,i,r,!1),(r&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,r=yi(t,t.pendingProps),i.child=r,r.return=i;t.sibling!==null;)t=t.sibling,r=r.sibling=yi(t,t.pendingProps),r.return=i;r.sibling=null}return i.child}function vd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ql(t)))}function qy(t,i,r){switch(i.tag){case 3:Ie(i,i.stateNode.containerInfo),Fo(i,dn,t.memoizedState.cache),uo();break;case 27:case 5:Ee(i);break;case 4:Ie(i,i.stateNode.containerInfo);break;case 10:Fo(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Gc(i),null;break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Ko(i),i.flags|=128,null):(r&i.child.childLanes)!==0?Am(t,i,r):(Ko(i),t=mo(t,i,r),t!==null?t.sibling:null);Ko(i);break;case 19:var g=(t.flags&128)!==0;if(c=(r&i.childLanes)!==0,c||(_a(t,i,r,!1),c=(r&i.childLanes)!==0),g){if(c)return Mm(t,i,r);i.flags|=128}if(g=i.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),fe(tn,tn.current),c)break;return null;case 22:return i.lanes=0,ym(t,i,r,i.pendingProps);case 24:Fo(i,dn,t.memoizedState.cache)}return mo(t,i,r)}function bm(t,i,r){if(t!==null)if(t.memoizedProps!==i.pendingProps)hn=!0;else{if(!vd(t,r)&&(i.flags&128)===0)return hn=!1,qy(t,i,r);hn=(t.flags&131072)!==0}else hn=!1,st&&(i.flags&1048576)!==0&&je(i,b,i.index);switch(i.lanes=0,i.tag){case 16:e:{var c=i.pendingProps;if(t=Vs(i.elementType),i.type=t,typeof t=="function")pa(t)?(c=Js(t,c),i.tag=1,i=Em(null,i,t,c,r)):(i.tag=0,i=cd(null,i,t,c,r));else{if(t!=null){var g=t.$$typeof;if(g===ee){i.tag=11,i=gm(null,i,t,c,r);break e}else if(g===Y){i.tag=14,i=vm(null,i,t,c,r);break e}}throw i=ve(t)||t,Error(a(306,i,""))}}return i;case 0:return cd(t,i,i.type,i.pendingProps,r);case 1:return c=i.type,g=Js(c,i.pendingProps),Em(t,i,c,g,r);case 3:e:{if(Ie(i,i.stateNode.containerInfo),t===null)throw Error(a(387));c=i.pendingProps;var S=i.memoizedState;g=S.element,kc(t,i),Rr(i,c,null,r);var w=i.memoizedState;if(c=w.cache,Fo(i,dn,c),c!==S.cache&&Ic(i,[dn],r,!0),br(),c=w.element,S.isDehydrated)if(S={element:c,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){i=Cm(t,i,c,r);break e}else if(c!==g){g=u(Error(a(424)),i),Os(g),i=Cm(t,i,c,r);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(gt=Ti(t.firstChild),pt=i,st=!0,Ki=null,Kn=!0,r=yh(i,null,c,r),i.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(uo(),c===g){i=mo(t,i,r);break e}In(t,i,c,r)}i=i.child}return i;case 26:return au(t,i),t===null?(r=Op(i.type,null,i.pendingProps,null))?i.memoizedState=r:st||(r=i.type,t=i.pendingProps,c=Eu(ge.current).createElement(r),c[un]=i,c[xn]=t,Dn(c,r,t),cn(c),i.stateNode=c):i.memoizedState=Op(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ee(i),t===null&&st&&(c=i.stateNode=zp(i.type,i.pendingProps,ge.current),pt=i,Kn=!0,g=gt,is(i.type)?(Qd=g,gt=Ti(c.firstChild)):gt=g),In(t,i,i.pendingProps.children,r),au(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&st&&((g=c=gt)&&(c=v0(c,i.type,i.pendingProps,Kn),c!==null?(i.stateNode=c,pt=i,gt=Ti(c.firstChild),Kn=!1,g=!0):g=!1),g||Xi(i)),Ee(i),g=i.type,S=i.pendingProps,w=t!==null?t.memoizedProps:null,c=S.children,Zd(g,S)?c=null:w!==null&&Zd(g,w)&&(i.flags|=32),i.memoizedState!==null&&(g=Fc(t,i,Dy,null,null,r),Xr._currentValue=g),au(t,i),In(t,i,c,r),i.child;case 6:return t===null&&st&&((t=r=gt)&&(r=_0(r,i.pendingProps,Kn),r!==null?(i.stateNode=r,pt=i,gt=null,t=!0):t=!1),t||Xi(i)),null;case 13:return Am(t,i,r);case 4:return Ie(i,i.stateNode.containerInfo),c=i.pendingProps,t===null?i.child=Zs(i,null,c,r):In(t,i,c,r),i.child;case 11:return gm(t,i,i.type,i.pendingProps,r);case 7:return In(t,i,i.pendingProps,r),i.child;case 8:return In(t,i,i.pendingProps.children,r),i.child;case 12:return In(t,i,i.pendingProps.children,r),i.child;case 10:return c=i.pendingProps,Fo(i,i.type,c.value),In(t,i,c.children,r),i.child;case 9:return g=i.type._context,c=i.pendingProps.children,qs(i),g=Nn(g),c=c(g),i.flags|=1,In(t,i,c,r),i.child;case 14:return vm(t,i,i.type,i.pendingProps,r);case 15:return _m(t,i,i.type,i.pendingProps,r);case 19:return Mm(t,i,r);case 31:return By(t,i,r);case 22:return ym(t,i,r,i.pendingProps);case 24:return qs(i),c=Nn(dn),t===null?(g=Pc(),g===null&&(g=Pt,S=Dc(),g.pooledCache=S,S.refCount++,S!==null&&(g.pooledCacheLanes|=r),g=S),i.memoizedState={parent:c,cache:g},zc(i),Fo(i,dn,g)):((t.lanes&r)!==0&&(kc(t,i),Rr(i,null,null,r),br()),g=t.memoizedState,S=i.memoizedState,g.parent!==c?(g={parent:c,cache:c},i.memoizedState=g,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=g),Fo(i,dn,c)):(c=S.cache,Fo(i,dn,c),c!==g.cache&&Ic(i,[dn],r,!0))),In(t,i,i.pendingProps.children,r),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function po(t){t.flags|=4}function _d(t,i,r,c,g){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(g&335544128)===g)if(t.stateNode.complete)t.flags|=8192;else if(tp())t.flags|=8192;else throw Fs=Zl,Uc}else t.flags&=-16777217}function Rm(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Fp(i))if(tp())t.flags|=8192;else throw Fs=Zl,Uc}function lu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?mt():536870912,t.lanes|=i,Na|=i)}function Ur(t,i){if(!st)switch(t.tailMode){case"hidden":i=t.tail;for(var r=null;i!==null;)i.alternate!==null&&(r=i),i=i.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function kt(t){var i=t.alternate!==null&&t.alternate.child===t.child,r=0,c=0;if(i)for(var g=t.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags&65011712,c|=g.flags&65011712,g.return=t,g=g.sibling;else for(g=t.child;g!==null;)r|=g.lanes|g.childLanes,c|=g.subtreeFlags,c|=g.flags,g.return=t,g=g.sibling;return t.subtreeFlags|=c,t.childLanes=r,i}function Gy(t,i,r){var c=i.pendingProps;switch(Wt(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(i),null;case 1:return kt(i),null;case 3:return r=i.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),co(dn),Oe(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ii(i)?po(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,xr())),kt(i),null;case 26:var g=i.type,S=i.memoizedState;return t===null?(po(i),S!==null?(kt(i),Rm(i,S)):(kt(i),_d(i,g,null,c,r))):S?S!==t.memoizedState?(po(i),kt(i),Rm(i,S)):(kt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==c&&po(i),kt(i),_d(i,g,t,c,r)),null;case 27:if(sn(i),r=ge.current,g=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==c&&po(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return kt(i),null}t=he.current,Ii(i)?Tr(i):(t=zp(g,c,r),i.stateNode=t,po(i))}return kt(i),null;case 5:if(sn(i),g=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==c&&po(i);else{if(!c){if(i.stateNode===null)throw Error(a(166));return kt(i),null}if(S=he.current,Ii(i))Tr(i);else{var w=Eu(ge.current);switch(S){case 1:S=w.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:S=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":S=w.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":S=w.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":S=w.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?S.multiple=!0:c.size&&(S.size=c.size);break;default:S=typeof c.is=="string"?w.createElement(g,{is:c.is}):w.createElement(g)}}S[un]=i,S[xn]=c;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)S.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=S;e:switch(Dn(S,g,c),g){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&po(i)}}return kt(i),_d(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,r),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==c&&po(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(a(166));if(t=ge.current,Ii(i)){if(t=i.stateNode,r=i.memoizedProps,c=null,g=pt,g!==null)switch(g.tag){case 27:case 5:c=g.memoizedProps}t[un]=i,t=!!(t.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Ap(t.nodeValue,r)),t||Xi(i,!0)}else t=Eu(t).createTextNode(c),t[un]=i,i.stateNode=t}return kt(i),null;case 31:if(r=i.memoizedState,t===null||t.memoizedState!==null){if(c=Ii(i),r!==null){if(t===null){if(!c)throw Error(a(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[un]=i}else uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),t=!1}else r=xr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return i.flags&256?(li(i),i):(li(i),null);if((i.flags&128)!==0)throw Error(a(558))}return kt(i),null;case 13:if(c=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(g=Ii(i),c!==null&&c.dehydrated!==null){if(t===null){if(!g)throw Error(a(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(a(317));g[un]=i}else uo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;kt(i),g=!1}else g=xr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=g),g=!0;if(!g)return i.flags&256?(li(i),i):(li(i),null)}return li(i),(i.flags&128)!==0?(i.lanes=r,i):(r=c!==null,t=t!==null&&t.memoizedState!==null,r&&(c=i.child,g=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(g=c.alternate.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==g&&(c.flags|=2048)),r!==t&&r&&(i.child.flags|=8192),lu(i,i.updateQueue),kt(i),null);case 4:return Oe(),t===null&&Bd(i.stateNode.containerInfo),kt(i),null;case 10:return co(i.type),kt(i),null;case 19:if($(tn),c=i.memoizedState,c===null)return kt(i),null;if(g=(i.flags&128)!==0,S=c.rendering,S===null)if(g)Ur(c,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(S=Xl(t),S!==null){for(i.flags|=128,Ur(c,!1),t=S.updateQueue,i.updateQueue=t,lu(i,t),i.subtreeFlags=0,t=r,r=i.child;r!==null;)_r(r,t),r=r.sibling;return fe(tn,tn.current&1|2),st&&De(i,c.treeForkCount),i.child}t=t.sibling}c.tail!==null&&tt()>hu&&(i.flags|=128,g=!0,Ur(c,!1),i.lanes=4194304)}else{if(!g)if(t=Xl(S),t!==null){if(i.flags|=128,g=!0,t=t.updateQueue,i.updateQueue=t,lu(i,t),Ur(c,!0),c.tail===null&&c.tailMode==="hidden"&&!S.alternate&&!st)return kt(i),null}else 2*tt()-c.renderingStartTime>hu&&r!==536870912&&(i.flags|=128,g=!0,Ur(c,!1),i.lanes=4194304);c.isBackwards?(S.sibling=i.child,i.child=S):(t=c.last,t!==null?t.sibling=S:i.child=S,c.last=S)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=tt(),t.sibling=null,r=tn.current,fe(tn,g?r&1|2:r&1),st&&De(i,c.treeForkCount),t):(kt(i),null);case 22:case 23:return li(i),qc(),c=i.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(r&536870912)!==0&&(i.flags&128)===0&&(kt(i),i.subtreeFlags&6&&(i.flags|=8192)):kt(i),r=i.updateQueue,r!==null&&lu(i,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==r&&(i.flags|=2048),t!==null&&$(Gs),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),i.memoizedState.cache!==r&&(i.flags|=2048),co(dn),kt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function Vy(t,i){switch(Wt(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return co(dn),Oe(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return sn(i),null;case 31:if(i.memoizedState!==null){if(li(i),i.alternate===null)throw Error(a(340));uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(li(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));uo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return $(tn),null;case 4:return Oe(),null;case 10:return co(i.type),null;case 22:case 23:return li(i),qc(),t!==null&&$(Gs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return co(dn),null;case 25:return null;default:return null}}function Nm(t,i){switch(Wt(i),i.tag){case 3:co(dn),Oe();break;case 26:case 27:case 5:sn(i);break;case 4:Oe();break;case 31:i.memoizedState!==null&&li(i);break;case 13:li(i);break;case 19:$(tn);break;case 10:co(i.type);break;case 22:case 23:li(i),qc(),t!==null&&$(Gs);break;case 24:co(dn)}}function zr(t,i){try{var r=i.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var g=c.next;r=g;do{if((r.tag&t)===t){c=void 0;var S=r.create,w=r.inst;c=S(),w.destroy=c}r=r.next}while(r!==g)}}catch(N){bt(i,i.return,N)}}function Qo(t,i,r){try{var c=i.updateQueue,g=c!==null?c.lastEffect:null;if(g!==null){var S=g.next;c=S;do{if((c.tag&t)===t){var w=c.inst,N=w.destroy;if(N!==void 0){w.destroy=void 0,g=i;var k=r,K=N;try{K()}catch(ie){bt(g,k,ie)}}}c=c.next}while(c!==S)}}catch(ie){bt(i,i.return,ie)}}function Im(t){var i=t.updateQueue;if(i!==null){var r=t.stateNode;try{Th(i,r)}catch(c){bt(t,t.return,c)}}}function Dm(t,i,r){r.props=Js(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(c){bt(t,i,c)}}function kr(t,i){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof r=="function"?t.refCleanup=r(c):r.current=c}}catch(g){bt(t,i,g)}}function Wi(t,i){var r=t.ref,c=t.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(g){bt(t,i,g)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(g){bt(t,i,g)}else r.current=null}function Lm(t){var i=t.type,r=t.memoizedProps,c=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(g){bt(t,t.return,g)}}function yd(t,i,r){try{var c=t.stateNode;d0(c,t.type,r,i),c[xn]=i}catch(g){bt(t,t.return,g)}}function Pm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&is(t.type)||t.tag===4}function Sd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Pm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Td(t,i,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,i):(i=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,i.appendChild(t),r=r._reactRootContainer,r!=null||i.onclick!==null||(i.onclick=Fn));else if(c!==4&&(c===27&&is(t.type)&&(r=t.stateNode,i=null),t=t.child,t!==null))for(Td(t,i,r),t=t.sibling;t!==null;)Td(t,i,r),t=t.sibling}function uu(t,i,r){var c=t.tag;if(c===5||c===6)t=t.stateNode,i?r.insertBefore(t,i):r.appendChild(t);else if(c!==4&&(c===27&&is(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(uu(t,i,r),t=t.sibling;t!==null;)uu(t,i,r),t=t.sibling}function Um(t){var i=t.stateNode,r=t.memoizedProps;try{for(var c=t.type,g=i.attributes;g.length;)i.removeAttributeNode(g[0]);Dn(i,c,r),i[un]=t,i[xn]=r}catch(S){bt(t,t.return,S)}}var go=!1,mn=!1,xd=!1,zm=typeof WeakSet=="function"?WeakSet:Set,An=null;function Fy(t,i){if(t=t.containerInfo,Vd=Nu,t=Is(t),Vi(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var g=c.anchorOffset,S=c.focusNode;c=c.focusOffset;try{r.nodeType,S.nodeType}catch{r=null;break e}var w=0,N=-1,k=-1,K=0,ie=0,re=t,W=null;t:for(;;){for(var te;re!==r||g!==0&&re.nodeType!==3||(N=w+g),re!==S||c!==0&&re.nodeType!==3||(k=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(te=re.firstChild)!==null;)W=re,re=te;for(;;){if(re===t)break t;if(W===r&&++K===g&&(N=w),W===S&&++ie===c&&(k=w),(te=re.nextSibling)!==null)break;re=W,W=re.parentNode}re=te}r=N===-1||k===-1?null:{start:N,end:k}}else r=null}r=r||{start:0,end:0}}else r=null;for(Fd={focusedElem:t,selectionRange:r},Nu=!1,An=i;An!==null;)if(i=An,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,An=t;else for(;An!==null;){switch(i=An,S=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)g=t[r],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&S!==null){t=void 0,r=i,g=S.memoizedProps,S=S.memoizedState,c=r.stateNode;try{var Me=Js(r.type,g);t=c.getSnapshotBeforeUpdate(Me,S),c.__reactInternalSnapshotBeforeUpdate=t}catch(qe){bt(r,r.return,qe)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,r=t.nodeType,r===9)Jd(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Jd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,An=t;break}An=i.return}}function km(t,i,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:_o(t,r),c&4&&zr(5,r);break;case 1:if(_o(t,r),c&4)if(t=r.stateNode,i===null)try{t.componentDidMount()}catch(w){bt(r,r.return,w)}else{var g=Js(r.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(g,i,t.__reactInternalSnapshotBeforeUpdate)}catch(w){bt(r,r.return,w)}}c&64&&Im(r),c&512&&kr(r,r.return);break;case 3:if(_o(t,r),c&64&&(t=r.updateQueue,t!==null)){if(i=null,r.child!==null)switch(r.child.tag){case 27:case 5:i=r.child.stateNode;break;case 1:i=r.child.stateNode}try{Th(t,i)}catch(w){bt(r,r.return,w)}}break;case 27:i===null&&c&4&&Um(r);case 26:case 5:_o(t,r),i===null&&c&4&&Lm(r),c&512&&kr(r,r.return);break;case 12:_o(t,r);break;case 31:_o(t,r),c&4&&Bm(t,r);break;case 13:_o(t,r),c&4&&qm(t,r),c&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=jy.bind(null,r),y0(t,r))));break;case 22:if(c=r.memoizedState!==null||go,!c){i=i!==null&&i.memoizedState!==null||mn,g=go;var S=mn;go=c,(mn=i)&&!S?yo(t,r,(r.subtreeFlags&8772)!==0):_o(t,r),go=g,mn=S}break;case 30:break;default:_o(t,r)}}function Hm(t){var i=t.alternate;i!==null&&(t.alternate=null,Hm(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&er(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Gt=null,Xn=!1;function vo(t,i,r){for(r=r.child;r!==null;)Om(t,i,r),r=r.sibling}function Om(t,i,r){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(gn,r)}catch{}switch(r.tag){case 26:mn||Wi(r,i),vo(t,i,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:mn||Wi(r,i);var c=Gt,g=Xn;is(r.type)&&(Gt=r.stateNode,Xn=!1),vo(t,i,r),Yr(r.stateNode),Gt=c,Xn=g;break;case 5:mn||Wi(r,i);case 6:if(c=Gt,g=Xn,Gt=null,vo(t,i,r),Gt=c,Xn=g,Gt!==null)if(Xn)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(r.stateNode)}catch(S){bt(r,i,S)}else try{Gt.removeChild(r.stateNode)}catch(S){bt(r,i,S)}break;case 18:Gt!==null&&(Xn?(t=Gt,Ip(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Ha(t)):Ip(Gt,r.stateNode));break;case 4:c=Gt,g=Xn,Gt=r.stateNode.containerInfo,Xn=!0,vo(t,i,r),Gt=c,Xn=g;break;case 0:case 11:case 14:case 15:Qo(2,r,i),mn||Qo(4,r,i),vo(t,i,r);break;case 1:mn||(Wi(r,i),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Dm(r,i,c)),vo(t,i,r);break;case 21:vo(t,i,r);break;case 22:mn=(c=mn)||r.memoizedState!==null,vo(t,i,r),mn=c;break;default:vo(t,i,r)}}function Bm(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ha(t)}catch(r){bt(i,i.return,r)}}}function qm(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ha(t)}catch(r){bt(i,i.return,r)}}function Zy(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new zm),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new zm),i;default:throw Error(a(435,t.tag))}}function cu(t,i){var r=Zy(t);i.forEach(function(c){if(!r.has(c)){r.add(c);var g=e0.bind(null,t,c);c.then(g,g)}})}function Qn(t,i){var r=i.deletions;if(r!==null)for(var c=0;c<r.length;c++){var g=r[c],S=t,w=i,N=w;e:for(;N!==null;){switch(N.tag){case 27:if(is(N.type)){Gt=N.stateNode,Xn=!1;break e}break;case 5:Gt=N.stateNode,Xn=!1;break e;case 3:case 4:Gt=N.stateNode.containerInfo,Xn=!0;break e}N=N.return}if(Gt===null)throw Error(a(160));Om(S,w,g),Gt=null,Xn=!1,S=g.alternate,S!==null&&(S.return=null),g.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Gm(i,t),i=i.sibling}var Li=null;function Gm(t,i){var r=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Qn(i,t),Wn(t),c&4&&(Qo(3,t,t.return),zr(3,t),Qo(5,t,t.return));break;case 1:Qn(i,t),Wn(t),c&512&&(mn||r===null||Wi(r,r.return)),c&64&&go&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var g=Li;if(Qn(i,t),Wn(t),c&512&&(mn||r===null||Wi(r,r.return)),c&4){var S=r!==null?r.memoizedState:null;if(c=t.memoizedState,r===null)if(c===null)if(t.stateNode===null){e:{c=t.type,r=t.memoizedProps,g=g.ownerDocument||g;t:switch(c){case"title":S=g.getElementsByTagName("title")[0],(!S||S[ps]||S[un]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=g.createElement(c),g.head.insertBefore(S,g.querySelector("head > title"))),Dn(S,c,r),S[un]=t,cn(S),c=S;break e;case"link":var w=Gp("link","href",g).get(c+(r.href||""));if(w){for(var N=0;N<w.length;N++)if(S=w[N],S.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&S.getAttribute("rel")===(r.rel==null?null:r.rel)&&S.getAttribute("title")===(r.title==null?null:r.title)&&S.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){w.splice(N,1);break t}}S=g.createElement(c),Dn(S,c,r),g.head.appendChild(S);break;case"meta":if(w=Gp("meta","content",g).get(c+(r.content||""))){for(N=0;N<w.length;N++)if(S=w[N],S.getAttribute("content")===(r.content==null?null:""+r.content)&&S.getAttribute("name")===(r.name==null?null:r.name)&&S.getAttribute("property")===(r.property==null?null:r.property)&&S.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&S.getAttribute("charset")===(r.charSet==null?null:r.charSet)){w.splice(N,1);break t}}S=g.createElement(c),Dn(S,c,r),g.head.appendChild(S);break;default:throw Error(a(468,c))}S[un]=t,cn(S),c=S}t.stateNode=c}else Vp(g,t.type,t.stateNode);else t.stateNode=qp(g,c,t.memoizedProps);else S!==c?(S===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):S.count--,c===null?Vp(g,t.type,t.stateNode):qp(g,c,t.memoizedProps)):c===null&&t.stateNode!==null&&yd(t,t.memoizedProps,r.memoizedProps)}break;case 27:Qn(i,t),Wn(t),c&512&&(mn||r===null||Wi(r,r.return)),r!==null&&c&4&&yd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(Qn(i,t),Wn(t),c&512&&(mn||r===null||Wi(r,r.return)),t.flags&32){g=t.stateNode;try{fi(g,"")}catch(Me){bt(t,t.return,Me)}}c&4&&t.stateNode!=null&&(g=t.memoizedProps,yd(t,g,r!==null?r.memoizedProps:g)),c&1024&&(xd=!0);break;case 6:if(Qn(i,t),Wn(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,r=t.stateNode;try{r.nodeValue=c}catch(Me){bt(t,t.return,Me)}}break;case 3:if(wu=null,g=Li,Li=Cu(i.containerInfo),Qn(i,t),Li=g,Wn(t),c&4&&r!==null&&r.memoizedState.isDehydrated)try{Ha(i.containerInfo)}catch(Me){bt(t,t.return,Me)}xd&&(xd=!1,Vm(t));break;case 4:c=Li,Li=Cu(t.stateNode.containerInfo),Qn(i,t),Wn(t),Li=c;break;case 12:Qn(i,t),Wn(t);break;case 31:Qn(i,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,cu(t,c)));break;case 13:Qn(i,t),Wn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(fu=tt()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,cu(t,c)));break;case 22:g=t.memoizedState!==null;var k=r!==null&&r.memoizedState!==null,K=go,ie=mn;if(go=K||g,mn=ie||k,Qn(i,t),mn=ie,go=K,Wn(t),c&8192)e:for(i=t.stateNode,i._visibility=g?i._visibility&-2:i._visibility|1,g&&(r===null||k||go||mn||Ks(t)),r=null,i=t;;){if(i.tag===5||i.tag===26){if(r===null){k=r=i;try{if(S=k.stateNode,g)w=S.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{N=k.stateNode;var re=k.memoizedProps.style,W=re!=null&&re.hasOwnProperty("display")?re.display:null;N.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(Me){bt(k,k.return,Me)}}}else if(i.tag===6){if(r===null){k=i;try{k.stateNode.nodeValue=g?"":k.memoizedProps}catch(Me){bt(k,k.return,Me)}}}else if(i.tag===18){if(r===null){k=i;try{var te=k.stateNode;g?Dp(te,!0):Dp(k.stateNode,!1)}catch(Me){bt(k,k.return,Me)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;r===i&&(r=null),i=i.return}r===i&&(r=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=t.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,cu(t,r))));break;case 19:Qn(i,t),Wn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,cu(t,c)));break;case 30:break;case 21:break;default:Qn(i,t),Wn(t)}}function Wn(t){var i=t.flags;if(i&2){try{for(var r,c=t.return;c!==null;){if(Pm(c)){r=c;break}c=c.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var g=r.stateNode,S=Sd(t);uu(t,S,g);break;case 5:var w=r.stateNode;r.flags&32&&(fi(w,""),r.flags&=-33);var N=Sd(t);uu(t,N,w);break;case 3:case 4:var k=r.stateNode.containerInfo,K=Sd(t);Td(t,K,k);break;default:throw Error(a(161))}}catch(ie){bt(t,t.return,ie)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Vm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Vm(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function _o(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)km(t,i.alternate,i),i=i.sibling}function Ks(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Qo(4,i,i.return),Ks(i);break;case 1:Wi(i,i.return);var r=i.stateNode;typeof r.componentWillUnmount=="function"&&Dm(i,i.return,r),Ks(i);break;case 27:Yr(i.stateNode);case 26:case 5:Wi(i,i.return),Ks(i);break;case 22:i.memoizedState===null&&Ks(i);break;case 30:Ks(i);break;default:Ks(i)}t=t.sibling}}function yo(t,i,r){for(r=r&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,g=t,S=i,w=S.flags;switch(S.tag){case 0:case 11:case 15:yo(g,S,r),zr(4,S);break;case 1:if(yo(g,S,r),c=S,g=c.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(K){bt(c,c.return,K)}if(c=S,g=c.updateQueue,g!==null){var N=c.stateNode;try{var k=g.shared.hiddenCallbacks;if(k!==null)for(g.shared.hiddenCallbacks=null,g=0;g<k.length;g++)Sh(k[g],N)}catch(K){bt(c,c.return,K)}}r&&w&64&&Im(S),kr(S,S.return);break;case 27:Um(S);case 26:case 5:yo(g,S,r),r&&c===null&&w&4&&Lm(S),kr(S,S.return);break;case 12:yo(g,S,r);break;case 31:yo(g,S,r),r&&w&4&&Bm(g,S);break;case 13:yo(g,S,r),r&&w&4&&qm(g,S);break;case 22:S.memoizedState===null&&yo(g,S,r),kr(S,S.return);break;case 30:break;default:yo(g,S,r)}i=i.sibling}}function Ed(t,i){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&Er(r))}function Cd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Er(t))}function Pi(t,i,r,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fm(t,i,r,c),i=i.sibling}function Fm(t,i,r,c){var g=i.flags;switch(i.tag){case 0:case 11:case 15:Pi(t,i,r,c),g&2048&&zr(9,i);break;case 1:Pi(t,i,r,c);break;case 3:Pi(t,i,r,c),g&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Er(t)));break;case 12:if(g&2048){Pi(t,i,r,c),t=i.stateNode;try{var S=i.memoizedProps,w=S.id,N=S.onPostCommit;typeof N=="function"&&N(w,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){bt(i,i.return,k)}}else Pi(t,i,r,c);break;case 31:Pi(t,i,r,c);break;case 13:Pi(t,i,r,c);break;case 23:break;case 22:S=i.stateNode,w=i.alternate,i.memoizedState!==null?S._visibility&2?Pi(t,i,r,c):Hr(t,i):S._visibility&2?Pi(t,i,r,c):(S._visibility|=2,Ma(t,i,r,c,(i.subtreeFlags&10256)!==0||!1)),g&2048&&Ed(w,i);break;case 24:Pi(t,i,r,c),g&2048&&Cd(i.alternate,i);break;default:Pi(t,i,r,c)}}function Ma(t,i,r,c,g){for(g=g&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var S=t,w=i,N=r,k=c,K=w.flags;switch(w.tag){case 0:case 11:case 15:Ma(S,w,N,k,g),zr(8,w);break;case 23:break;case 22:var ie=w.stateNode;w.memoizedState!==null?ie._visibility&2?Ma(S,w,N,k,g):Hr(S,w):(ie._visibility|=2,Ma(S,w,N,k,g)),g&&K&2048&&Ed(w.alternate,w);break;case 24:Ma(S,w,N,k,g),g&&K&2048&&Cd(w.alternate,w);break;default:Ma(S,w,N,k,g)}i=i.sibling}}function Hr(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var r=t,c=i,g=c.flags;switch(c.tag){case 22:Hr(r,c),g&2048&&Ed(c.alternate,c);break;case 24:Hr(r,c),g&2048&&Cd(c.alternate,c);break;default:Hr(r,c)}i=i.sibling}}var Or=8192;function ba(t,i,r){if(t.subtreeFlags&Or)for(t=t.child;t!==null;)Zm(t,i,r),t=t.sibling}function Zm(t,i,r){switch(t.tag){case 26:ba(t,i,r),t.flags&Or&&t.memoizedState!==null&&I0(r,Li,t.memoizedState,t.memoizedProps);break;case 5:ba(t,i,r);break;case 3:case 4:var c=Li;Li=Cu(t.stateNode.containerInfo),ba(t,i,r),Li=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=Or,Or=16777216,ba(t,i,r),Or=c):ba(t,i,r));break;default:ba(t,i,r)}}function Ym(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Br(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];An=c,Km(c,t)}Ym(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Jm(t),t=t.sibling}function Jm(t){switch(t.tag){case 0:case 11:case 15:Br(t),t.flags&2048&&Qo(9,t,t.return);break;case 3:Br(t);break;case 12:Br(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,du(t)):Br(t);break;default:Br(t)}}function du(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var r=0;r<i.length;r++){var c=i[r];An=c,Km(c,t)}Ym(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Qo(8,i,i.return),du(i);break;case 22:r=i.stateNode,r._visibility&2&&(r._visibility&=-3,du(i));break;default:du(i)}t=t.sibling}}function Km(t,i){for(;An!==null;){var r=An;switch(r.tag){case 0:case 11:case 15:Qo(8,r,i);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Er(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,An=c;else e:for(r=t;An!==null;){c=An;var g=c.sibling,S=c.return;if(Hm(c),c===r){An=null;break e}if(g!==null){g.return=S,An=g;break e}An=S}}}var Yy={getCacheForType:function(t){var i=Nn(dn),r=i.data.get(t);return r===void 0&&(r=t(),i.data.set(t,r)),r},cacheSignal:function(){return Nn(dn).controller.signal}},Jy=typeof WeakMap=="function"?WeakMap:Map,xt=0,Pt=null,at=null,ut=0,Mt=0,ui=null,Wo=!1,Ra=!1,Ad=!1,So=0,jt=0,$o=0,Xs=0,wd=0,ci=0,Na=0,qr=null,$n=null,Md=!1,fu=0,Xm=0,hu=1/0,mu=null,jo=null,yn=0,es=null,Ia=null,To=0,bd=0,Rd=null,Qm=null,Gr=0,Nd=null;function di(){return(xt&2)!==0&&ut!==0?ut&-ut:Z.T!==null?zd():Gn()}function Wm(){if(ci===0)if((ut&536870912)===0||st){var t=it;it<<=1,(it&3932160)===0&&(it=262144),ci=t}else ci=536870912;return t=ri.current,t!==null&&(t.flags|=32),ci}function jn(t,i,r){(t===Pt&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)&&(Da(t,0),ts(t,ut,ci,!1)),en(t,r),((xt&2)===0||t!==Pt)&&(t===Pt&&((xt&2)===0&&(Xs|=r),jt===4&&ts(t,ut,ci,!1)),$i(t))}function $m(t,i,r){if((xt&6)!==0)throw Error(a(327));var c=!r&&(i&127)===0&&(i&t.expiredLanes)===0||Ct(t,i),g=c?Qy(t,i):Dd(t,i,!0),S=c;do{if(g===0){Ra&&!c&&ts(t,i,0,!1);break}else{if(r=t.current.alternate,S&&!Ky(r)){g=Dd(t,i,!1),S=!1;continue}if(g===2){if(S=i,t.errorRecoveryDisabledLanes&S)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var N=t;g=qr;var k=N.current.memoizedState.isDehydrated;if(k&&(Da(N,w).flags|=256),w=Dd(N,w,!1),w!==2){if(Ad&&!k){N.errorRecoveryDisabledLanes|=S,Xs|=S,g=4;break e}S=$n,$n=g,S!==null&&($n===null?$n=S:$n.push.apply($n,S))}g=w}if(S=!1,g!==2)continue}}if(g===1){Da(t,0),ts(t,i,0,!0);break}e:{switch(c=t,S=g,S){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ts(c,i,ci,!Wo);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(g=fu+300-tt(),10<g)){if(ts(c,i,ci,!Wo),Qe(c,0,!0)!==0)break e;To=i,c.timeoutHandle=Rp(jm.bind(null,c,r,$n,mu,Md,i,ci,Xs,Na,Wo,S,"Throttled",-0,0),g);break e}jm(c,r,$n,mu,Md,i,ci,Xs,Na,Wo,S,null,-0,0)}}break}while(!0);$i(t)}function jm(t,i,r,c,g,S,w,N,k,K,ie,re,W,te){if(t.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Zm(i,S,re);var Me=(S&62914560)===S?fu-tt():(S&4194048)===S?Xm-tt():0;if(Me=D0(re,Me),Me!==null){To=S,t.cancelPendingCommit=Me(rp.bind(null,t,i,S,r,c,g,w,N,k,ie,re,null,W,te)),ts(t,S,w,!K);return}}rp(t,i,S,r,c,g,w,N,k)}function Ky(t){for(var i=t;;){var r=i.tag;if((r===0||r===11||r===15)&&i.flags&16384&&(r=i.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var g=r[c],S=g.getSnapshot;g=g.value;try{if(!En(S(),g))return!1}catch{return!1}}if(r=i.child,i.subtreeFlags&16384&&r!==null)r.return=i,i=r;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ts(t,i,r,c){i&=~wd,i&=~Xs,t.suspendedLanes|=i,t.pingedLanes&=~i,c&&(t.warmLanes|=i),c=t.expirationTimes;for(var g=i;0<g;){var S=31-Te(g),w=1<<S;c[S]=-1,g&=~w}r!==0&&kn(t,r,i)}function pu(){return(xt&6)===0?(Vr(0),!1):!0}function Id(){if(at!==null){if(Mt===0)var t=at.return;else t=at,Di=Qi=null,Jc(t),xa=null,Ar=0,t=at;for(;t!==null;)Nm(t.alternate,t),t=t.return;at=null}}function Da(t,i){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,m0(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),To=0,Id(),Pt=t,at=r=yi(t.current,null),ut=i,Mt=0,ui=null,Wo=!1,Ra=Ct(t,i),Ad=!1,Na=ci=wd=Xs=$o=jt=0,$n=qr=null,Md=!1,(i&8)!==0&&(i|=i&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=i;0<c;){var g=31-Te(c),S=1<<g;i|=t[g],c&=~S}return So=i,zs(),r}function ep(t,i){We=null,Z.H=Lr,i===Ta||i===Fl?(i=gh(),Mt=3):i===Uc?(i=gh(),Mt=4):Mt=i===ud?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,ui=i,at===null&&(jt=1,ou(t,u(i,t.current)))}function tp(){var t=ri.current;return t===null?!0:(ut&4194048)===ut?Si===null:(ut&62914560)===ut||(ut&536870912)!==0?t===Si:!1}function np(){var t=Z.H;return Z.H=Lr,t===null?Lr:t}function ip(){var t=Z.A;return Z.A=Yy,t}function gu(){jt=4,Wo||(ut&4194048)!==ut&&ri.current!==null||(Ra=!0),($o&134217727)===0&&(Xs&134217727)===0||Pt===null||ts(Pt,ut,ci,!1)}function Dd(t,i,r){var c=xt;xt|=2;var g=np(),S=ip();(Pt!==t||ut!==i)&&(mu=null,Da(t,i)),i=!1;var w=jt;e:do try{if(Mt!==0&&at!==null){var N=at,k=ui;switch(Mt){case 8:Id(),w=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(i=!0);var K=Mt;if(Mt=0,ui=null,La(t,N,k,K),r&&Ra){w=0;break e}break;default:K=Mt,Mt=0,ui=null,La(t,N,k,K)}}Xy(),w=jt;break}catch(ie){ep(t,ie)}while(!0);return i&&t.shellSuspendCounter++,Di=Qi=null,xt=c,Z.H=g,Z.A=S,at===null&&(Pt=null,ut=0,zs()),w}function Xy(){for(;at!==null;)op(at)}function Qy(t,i){var r=xt;xt|=2;var c=np(),g=ip();Pt!==t||ut!==i?(mu=null,hu=tt()+500,Da(t,i)):Ra=Ct(t,i);e:do try{if(Mt!==0&&at!==null){i=at;var S=ui;t:switch(Mt){case 1:Mt=0,ui=null,La(t,i,S,1);break;case 2:case 9:if(mh(S)){Mt=0,ui=null,sp(i);break}i=function(){Mt!==2&&Mt!==9||Pt!==t||(Mt=7),$i(t)},S.then(i,i);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:mh(S)?(Mt=0,ui=null,sp(i)):(Mt=0,ui=null,La(t,i,S,7));break;case 5:var w=null;switch(at.tag){case 26:w=at.memoizedState;case 5:case 27:var N=at;if(w?Fp(w):N.stateNode.complete){Mt=0,ui=null;var k=N.sibling;if(k!==null)at=k;else{var K=N.return;K!==null?(at=K,vu(K)):at=null}break t}}Mt=0,ui=null,La(t,i,S,5);break;case 6:Mt=0,ui=null,La(t,i,S,6);break;case 8:Id(),jt=6;break e;default:throw Error(a(462))}}Wy();break}catch(ie){ep(t,ie)}while(!0);return Di=Qi=null,Z.H=c,Z.A=g,xt=r,at!==null?0:(Pt=null,ut=0,zs(),jt)}function Wy(){for(;at!==null&&!Ye();)op(at)}function op(t){var i=bm(t.alternate,t,So);t.memoizedProps=t.pendingProps,i===null?vu(t):at=i}function sp(t){var i=t,r=i.alternate;switch(i.tag){case 15:case 0:i=xm(r,i,i.pendingProps,i.type,void 0,ut);break;case 11:i=xm(r,i,i.pendingProps,i.type.render,i.ref,ut);break;case 5:Jc(i);default:Nm(r,i),i=at=_r(i,So),i=bm(r,i,So)}t.memoizedProps=t.pendingProps,i===null?vu(t):at=i}function La(t,i,r,c){Di=Qi=null,Jc(i),xa=null,Ar=0;var g=i.return;try{if(Oy(t,g,i,r,ut)){jt=1,ou(t,u(r,t.current)),at=null;return}}catch(S){if(g!==null)throw at=g,S;jt=1,ou(t,u(r,t.current)),at=null;return}i.flags&32768?(st||c===1?t=!0:Ra||(ut&536870912)!==0?t=!1:(Wo=t=!0,(c===2||c===9||c===3||c===6)&&(c=ri.current,c!==null&&c.tag===13&&(c.flags|=16384))),ap(i,t)):vu(i)}function vu(t){var i=t;do{if((i.flags&32768)!==0){ap(i,Wo);return}t=i.return;var r=Gy(i.alternate,i,So);if(r!==null){at=r;return}if(i=i.sibling,i!==null){at=i;return}at=i=t}while(i!==null);jt===0&&(jt=5)}function ap(t,i){do{var r=Vy(t.alternate,t);if(r!==null){r.flags&=32767,at=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!i&&(t=t.sibling,t!==null)){at=t;return}at=t=r}while(t!==null);jt=6,at=null}function rp(t,i,r,c,g,S,w,N,k){t.cancelPendingCommit=null;do _u();while(yn!==0);if((xt&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(S=i.lanes|i.childLanes,S|=ma,Zt(t,r,S,w,N,k),t===Pt&&(at=Pt=null,ut=0),Ia=i,es=t,To=r,bd=S,Rd=g,Qm=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,t0(Ut,function(){return fp(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Z.T,Z.T=null,g=ue.p,ue.p=2,w=xt,xt|=4;try{Fy(t,i,r)}finally{xt=w,ue.p=g,Z.T=c}}yn=1,lp(),up(),cp()}}function lp(){if(yn===1){yn=0;var t=es,i=Ia,r=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||r){r=Z.T,Z.T=null;var c=ue.p;ue.p=2;var g=xt;xt|=4;try{Gm(i,t);var S=Fd,w=Is(t.containerInfo),N=S.focusedElem,k=S.selectionRange;if(w!==N&&N&&N.ownerDocument&&ca(N.ownerDocument.documentElement,N)){if(k!==null&&Vi(N)){var K=k.start,ie=k.end;if(ie===void 0&&(ie=K),"selectionStart"in N)N.selectionStart=K,N.selectionEnd=Math.min(ie,N.value.length);else{var re=N.ownerDocument||document,W=re&&re.defaultView||window;if(W.getSelection){var te=W.getSelection(),Me=N.textContent.length,qe=Math.min(k.start,Me),Dt=k.end===void 0?qe:Math.min(k.end,Me);!te.extend&&qe>Dt&&(w=Dt,Dt=qe,qe=w);var V=Ns(N,qe),G=Ns(N,Dt);if(V&&G&&(te.rangeCount!==1||te.anchorNode!==V.node||te.anchorOffset!==V.offset||te.focusNode!==G.node||te.focusOffset!==G.offset)){var J=re.createRange();J.setStart(V.node,V.offset),te.removeAllRanges(),qe>Dt?(te.addRange(J),te.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),te.addRange(J))}}}}for(re=[],te=N;te=te.parentNode;)te.nodeType===1&&re.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<re.length;N++){var se=re[N];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Nu=!!Vd,Fd=Vd=null}finally{xt=g,ue.p=c,Z.T=r}}t.current=i,yn=2}}function up(){if(yn===2){yn=0;var t=es,i=Ia,r=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||r){r=Z.T,Z.T=null;var c=ue.p;ue.p=2;var g=xt;xt|=4;try{km(t,i.alternate,i)}finally{xt=g,ue.p=c,Z.T=r}}yn=3}}function cp(){if(yn===4||yn===3){yn=0,St();var t=es,i=Ia,r=To,c=Qm;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?yn=5:(yn=0,Ia=es=null,dp(t,t.pendingLanes));var g=t.pendingLanes;if(g===0&&(jo=null),Ce(r),i=i.stateNode,dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(gn,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Z.T,g=ue.p,ue.p=2,Z.T=null;try{for(var S=t.onRecoverableError,w=0;w<c.length;w++){var N=c[w];S(N.value,{componentStack:N.stack})}}finally{Z.T=i,ue.p=g}}(To&3)!==0&&_u(),$i(t),g=t.pendingLanes,(r&261930)!==0&&(g&42)!==0?t===Nd?Gr++:(Gr=0,Nd=t):Gr=0,Vr(0)}}function dp(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Er(i)))}function _u(){return lp(),up(),cp(),fp()}function fp(){if(yn!==5)return!1;var t=es,i=bd;bd=0;var r=Ce(To),c=Z.T,g=ue.p;try{ue.p=32>r?32:r,Z.T=null,r=Rd,Rd=null;var S=es,w=To;if(yn=0,Ia=es=null,To=0,(xt&6)!==0)throw Error(a(331));var N=xt;if(xt|=4,Jm(S.current),Fm(S,S.current,w,r),xt=N,Vr(0,!1),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(gn,S)}catch{}return!0}finally{ue.p=g,Z.T=c,dp(t,i)}}function hp(t,i,r){i=u(r,i),i=ld(t.stateNode,i,2),t=Jo(t,i,2),t!==null&&(en(t,2),$i(t))}function bt(t,i,r){if(t.tag===3)hp(t,t,r);else for(;i!==null;){if(i.tag===3){hp(i,t,r);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(jo===null||!jo.has(c))){t=u(r,t),r=mm(2),c=Jo(i,r,2),c!==null&&(pm(r,c,i,t),en(c,2),$i(c));break}}i=i.return}}function Ld(t,i,r){var c=t.pingCache;if(c===null){c=t.pingCache=new Jy;var g=new Set;c.set(i,g)}else g=c.get(i),g===void 0&&(g=new Set,c.set(i,g));g.has(r)||(Ad=!0,g.add(r),t=$y.bind(null,t,i,r),i.then(t,t))}function $y(t,i,r){var c=t.pingCache;c!==null&&c.delete(i),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Pt===t&&(ut&r)===r&&(jt===4||jt===3&&(ut&62914560)===ut&&300>tt()-fu?(xt&2)===0&&Da(t,0):wd|=r,Na===ut&&(Na=0)),$i(t)}function mp(t,i){i===0&&(i=mt()),t=_i(t,i),t!==null&&(en(t,i),$i(t))}function jy(t){var i=t.memoizedState,r=0;i!==null&&(r=i.retryLane),mp(t,r)}function e0(t,i){var r=0;switch(t.tag){case 31:case 13:var c=t.stateNode,g=t.memoizedState;g!==null&&(r=g.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(i),mp(t,r)}function t0(t,i){return Le(t,i)}var yu=null,Pa=null,Pd=!1,Su=!1,Ud=!1,ns=0;function $i(t){t!==Pa&&t.next===null&&(Pa===null?yu=Pa=t:Pa=Pa.next=t),Su=!0,Pd||(Pd=!0,i0())}function Vr(t,i){if(!Ud&&Su){Ud=!0;do for(var r=!1,c=yu;c!==null;){if(t!==0){var g=c.pendingLanes;if(g===0)var S=0;else{var w=c.suspendedLanes,N=c.pingedLanes;S=(1<<31-Te(42|t)+1)-1,S&=g&~(w&~N),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(r=!0,_p(c,S))}else S=ut,S=Qe(c,c===Pt?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(S&3)===0||Ct(c,S)||(r=!0,_p(c,S));c=c.next}while(r);Ud=!1}}function n0(){pp()}function pp(){Su=Pd=!1;var t=0;ns!==0&&h0()&&(t=ns);for(var i=tt(),r=null,c=yu;c!==null;){var g=c.next,S=gp(c,i);S===0?(c.next=null,r===null?yu=g:r.next=g,g===null&&(Pa=r)):(r=c,(t!==0||(S&3)!==0)&&(Su=!0)),c=g}yn!==0&&yn!==5||Vr(t),ns!==0&&(ns=0)}function gp(t,i){for(var r=t.suspendedLanes,c=t.pingedLanes,g=t.expirationTimes,S=t.pendingLanes&-62914561;0<S;){var w=31-Te(S),N=1<<w,k=g[w];k===-1?((N&r)===0||(N&c)!==0)&&(g[w]=Bt(N,i)):k<=i&&(t.expiredLanes|=N),S&=~N}if(i=Pt,r=ut,r=Qe(t,t===i?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,r===0||t===i&&(Mt===2||Mt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Xe(c),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ct(t,r)){if(i=r&-r,i===t.callbackPriority)return i;switch(c!==null&&Xe(c),Ce(r)){case 2:case 8:r=ze;break;case 32:r=Ut;break;case 268435456:r=Ft;break;default:r=Ut}return c=vp.bind(null,t),r=Le(r,c),t.callbackPriority=i,t.callbackNode=r,i}return c!==null&&c!==null&&Xe(c),t.callbackPriority=2,t.callbackNode=null,2}function vp(t,i){if(yn!==0&&yn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(_u()&&t.callbackNode!==r)return null;var c=ut;return c=Qe(t,t===Pt?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:($m(t,c,i),gp(t,tt()),t.callbackNode!=null&&t.callbackNode===r?vp.bind(null,t):null)}function _p(t,i){if(_u())return null;$m(t,i,!0)}function i0(){p0(function(){(xt&6)!==0?Le(Jt,n0):pp()})}function zd(){if(ns===0){var t=ya;t===0&&(t=He,He<<=1,(He&261888)===0&&(He=256)),ns=t}return ns}function yp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Io(""+t)}function Sp(t,i){var r=i.ownerDocument.createElement("input");return r.name=i.name,r.value=i.value,t.id&&r.setAttribute("form",t.id),i.parentNode.insertBefore(r,i),t=new FormData(t),r.parentNode.removeChild(r),t}function o0(t,i,r,c,g){if(i==="submit"&&r&&r.stateNode===g){var S=yp((g[xn]||null).action),w=c.submitter;w&&(i=(i=w[xn]||null)?yp(i.formAction):w.getAttribute("formAction"),i!==null&&(S=i,w=null));var N=new ia("action","action",null,c,g);t.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ns!==0){var k=w?Sp(g,w):new FormData(g);nd(r,{pending:!0,data:k,method:g.method,action:S},null,k)}}else typeof S=="function"&&(N.preventDefault(),k=w?Sp(g,w):new FormData(g),nd(r,{pending:!0,data:k,method:g.method,action:S},S,k))},currentTarget:g}]})}}for(var kd=0;kd<Yi.length;kd++){var Hd=Yi[kd],s0=Hd.toLowerCase(),a0=Hd[0].toUpperCase()+Hd.slice(1);Yn(s0,"on"+a0)}Yn(Ls,"onAnimationEnd"),Yn(Hl,"onAnimationIteration"),Yn(Ps,"onAnimationStart"),Yn("dblclick","onDoubleClick"),Yn("focusin","onFocus"),Yn("focusout","onBlur"),Yn(Mc,"onTransitionRun"),Yn(Ol,"onTransitionStart"),Yn(bc,"onTransitionCancel"),Yn(Go,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),no("onBeforeInput",["compositionend","keypress","textInput","paste"]),no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fr));function Tp(t,i){i=(i&4)!==0;for(var r=0;r<t.length;r++){var c=t[r],g=c.event;c=c.listeners;e:{var S=void 0;if(i)for(var w=c.length-1;0<=w;w--){var N=c[w],k=N.instance,K=N.currentTarget;if(N=N.listener,k!==S&&g.isPropagationStopped())break e;S=N,g.currentTarget=K;try{S(g)}catch(ie){Us(ie)}g.currentTarget=null,S=k}else for(w=0;w<c.length;w++){if(N=c[w],k=N.instance,K=N.currentTarget,N=N.listener,k!==S&&g.isPropagationStopped())break e;S=N,g.currentTarget=K;try{S(g)}catch(ie){Us(ie)}g.currentTarget=null,S=k}}}}function rt(t,i){var r=i[ki];r===void 0&&(r=i[ki]=new Set);var c=t+"__bubble";r.has(c)||(xp(i,t,2,!1),r.add(c))}function Od(t,i,r){var c=0;i&&(c|=4),xp(r,t,c,i)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function Bd(t){if(!t[Tu]){t[Tu]=!0,_l.forEach(function(r){r!=="selectionchange"&&(r0.has(r)||Od(r,!1,t),Od(r,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Tu]||(i[Tu]=!0,Od("selectionchange",!1,i))}}function xp(t,i,r,c){switch(Wp(i)){case 2:var g=U0;break;case 8:g=z0;break;default:g=tf}r=g.bind(null,i,r,t),g=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(g=!0),c?g!==void 0?t.addEventListener(i,r,{capture:!0,passive:g}):t.addEventListener(i,r,!0):g!==void 0?t.addEventListener(i,r,{passive:g}):t.addEventListener(i,r,!1)}function qd(t,i,r,c,g){var S=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var N=c.stateNode.containerInfo;if(N===g)break;if(w===4)for(w=c.return;w!==null;){var k=w.tag;if((k===3||k===4)&&w.stateNode.containerInfo===g)return;w=w.return}for(;N!==null;){if(w=to(N),w===null)return;if(k=w.tag,k===5||k===6||k===26||k===27){c=S=w;continue e}N=N.parentNode}}c=c.return}rr(function(){var K=S,ie=Ss(r),re=[];e:{var W=Bl.get(t);if(W!==void 0){var te=ia,Me=t;switch(t){case"keypress":if(xs(r)===0)break e;case"keydown":case"keyup":te=wl;break;case"focusin":Me="focus",te=cr;break;case"focusout":Me="blur",te=cr;break;case"beforeblur":case"afterblur":te=cr;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=Tc;break;case Ls:case Hl:case Ps:te=dr;break;case Go:te=Rl;break;case"scroll":case"scrollend":te=lt;break;case"wheel":te=ao;break;case"copy":case"cut":case"paste":te=mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Ml;break;case"toggle":case"beforetoggle":te=As}var qe=(i&4)!==0,Dt=!qe&&(t==="scroll"||t==="scrollend"),V=qe?W!==null?W+"Capture":null:W;qe=[];for(var G=K,J;G!==null;){var se=G;if(J=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||J===null||V===null||(se=oo(G,V),se!=null&&qe.push(Zr(G,se,J))),Dt)break;G=G.return}0<qe.length&&(W=new te(W,Me,null,r,ie),re.push({event:W,listeners:qe}))}}if((i&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",te=t==="mouseout"||t==="pointerout",W&&r!==na&&(Me=r.relatedTarget||r.fromElement)&&(to(Me)||Me[eo]))break e;if((te||W)&&(W=ie.window===ie?ie:(W=ie.ownerDocument)?W.defaultView||W.parentWindow:window,te?(Me=r.relatedTarget||r.toElement,te=K,Me=Me?to(Me):null,Me!==null&&(Dt=d(Me),qe=Me.tag,Me!==Dt||qe!==5&&qe!==27&&qe!==6)&&(Me=null)):(te=null,Me=K),te!==Me)){if(qe=Tl,se="onMouseLeave",V="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(qe=Ml,se="onPointerLeave",V="onPointerEnter",G="pointer"),Dt=te==null?W:Hi(te),J=Me==null?W:Hi(Me),W=new qe(se,G+"leave",te,r,ie),W.target=Dt,W.relatedTarget=J,se=null,to(ie)===K&&(qe=new qe(V,G+"enter",Me,r,ie),qe.target=J,qe.relatedTarget=Dt,se=qe),Dt=se,te&&Me)t:{for(qe=l0,V=te,G=Me,J=0,se=V;se;se=qe(se))J++;se=0;for(var ke=G;ke;ke=qe(ke))se++;for(;0<J-se;)V=qe(V),J--;for(;0<se-J;)G=qe(G),se--;for(;J--;){if(V===G||G!==null&&V===G.alternate){qe=V;break t}V=qe(V),G=qe(G)}qe=null}else qe=null;te!==null&&Ep(re,W,te,qe,!1),Me!==null&&Dt!==null&&Ep(re,Dt,Me,qe,!0)}}e:{if(W=K?Hi(K):window,te=W.nodeName&&W.nodeName.toLowerCase(),te==="select"||te==="input"&&W.type==="file")var vt=Rs;else if(pi(W))if(Ll)vt=wc;else{vt=Ac;var Re=Ri}else te=W.nodeName,!te||te.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?K&&ys(K.elementType)&&(vt=Rs):vt=Ho;if(vt&&(vt=vt(t,K))){Dl(re,vt,r,ie);break e}Re&&Re(t,W,K),t==="focusout"&&K&&W.type==="number"&&K.memoizedProps.value!=null&&wi(W,"number",W.value)}switch(Re=K?Hi(K):window,t){case"focusin":(pi(Re)||Re.contentEditable==="true")&&(Fi=Re,fa=K,Ds=null);break;case"focusout":Ds=fa=Fi=null;break;case"mousedown":Bo=!0;break;case"contextmenu":case"mouseup":case"dragend":Bo=!1,zl(re,r,ie);break;case"selectionchange":if(da)break;case"keydown":case"keyup":zl(re,r,ie)}var et;if(sa)e:{switch(t){case"compositionstart":var ct="onCompositionStart";break e;case"compositionend":ct="onCompositionEnd";break e;case"compositionupdate":ct="onCompositionUpdate";break e}ct=void 0}else Uo?Il(t,r)&&(ct="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ct="onCompositionStart");ct&&(aa&&r.locale!=="ko"&&(Uo||ct!=="onCompositionStart"?ct==="onCompositionEnd"&&Uo&&(et=qi()):(hi=ie,so="value"in hi?hi.value:hi.textContent,Uo=!0)),Re=xu(K,ct),0<Re.length&&(ct=new fr(ct,t,null,r,ie),re.push({event:ct,listeners:Re}),et?ct.data=et:(et=gr(r),et!==null&&(ct.data=et)))),(et=Ec?ai(t,r):zo(t,r))&&(ct=xu(K,"onBeforeInput"),0<ct.length&&(Re=new fr("onBeforeInput","beforeinput",null,r,ie),re.push({event:Re,listeners:ct}),Re.data=et)),o0(re,t,K,r,ie)}Tp(re,i)})}function Zr(t,i,r){return{instance:t,listener:i,currentTarget:r}}function xu(t,i){for(var r=i+"Capture",c=[];t!==null;){var g=t,S=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||S===null||(g=oo(t,r),g!=null&&c.unshift(Zr(t,g,S)),g=oo(t,i),g!=null&&c.push(Zr(t,g,S))),t.tag===3)return c;t=t.return}return[]}function l0(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ep(t,i,r,c,g){for(var S=i._reactName,w=[];r!==null&&r!==c;){var N=r,k=N.alternate,K=N.stateNode;if(N=N.tag,k!==null&&k===c)break;N!==5&&N!==26&&N!==27||K===null||(k=K,g?(K=oo(r,S),K!=null&&w.unshift(Zr(r,K,k))):g||(K=oo(r,S),K!=null&&w.push(Zr(r,K,k)))),r=r.return}w.length!==0&&t.push({event:i,listeners:w})}var u0=/\r\n?/g,c0=/\u0000|\uFFFD/g;function Cp(t){return(typeof t=="string"?t:""+t).replace(u0,`
`).replace(c0,"")}function Ap(t,i){return i=Cp(i),Cp(t)===i}function It(t,i,r,c,g,S){switch(r){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||fi(t,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&fi(t,""+c);break;case"className":Rt(t,"class",c);break;case"tabIndex":Rt(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Rt(t,r,c);break;case"style":ea(t,c,S);break;case"data":if(i!=="object"){Rt(t,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||r!=="href")){t.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Io(""+c),t.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(r==="formAction"?(i!=="input"&&It(t,i,"name",g.name,g,null),It(t,i,"formEncType",g.formEncType,g,null),It(t,i,"formMethod",g.formMethod,g,null),It(t,i,"formTarget",g.formTarget,g,null)):(It(t,i,"encType",g.encType,g,null),It(t,i,"method",g.method,g,null),It(t,i,"target",g.target,g,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(r);break}c=Io(""+c),t.setAttribute(r,c);break;case"onClick":c!=null&&(t.onclick=Fn);break;case"onScroll":c!=null&&rt("scroll",t);break;case"onScrollEnd":c!=null&&rt("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}r=Io(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""+c):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":c===!0?t.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(r,c):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(r,c):t.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(r):t.setAttribute(r,c);break;case"popover":rt("beforetoggle",t),rt("toggle",t),ot(t,"popover",c);break;case"xlinkActuate":Vn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ot(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=ta.get(r)||r,ot(t,r,c))}}function Gd(t,i,r,c,g,S){switch(r){case"style":ea(t,c,S);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(r=c.__html,r!=null){if(g.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof c=="string"?fi(t,c):(typeof c=="number"||typeof c=="bigint")&&fi(t,""+c);break;case"onScroll":c!=null&&rt("scroll",t);break;case"onScrollEnd":c!=null&&rt("scrollend",t);break;case"onClick":c!=null&&(t.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yl.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(g=r.endsWith("Capture"),i=r.slice(2,g?r.length-7:void 0),S=t[xn]||null,S=S!=null?S[r]:null,typeof S=="function"&&t.removeEventListener(i,S,g),typeof c=="function")){typeof S!="function"&&S!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(i,c,g);break e}r in t?t[r]=c:c===!0?t.setAttribute(r,""):ot(t,r,c)}}}function Dn(t,i,r){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",t),rt("load",t);var c=!1,g=!1,S;for(S in r)if(r.hasOwnProperty(S)){var w=r[S];if(w!=null)switch(S){case"src":c=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:It(t,i,S,w,r,null)}}g&&It(t,i,"srcSet",r.srcSet,r,null),c&&It(t,i,"src",r.src,r,null);return;case"input":rt("invalid",t);var N=S=w=g=null,k=null,K=null;for(c in r)if(r.hasOwnProperty(c)){var ie=r[c];if(ie!=null)switch(c){case"name":g=ie;break;case"type":w=ie;break;case"checked":k=ie;break;case"defaultChecked":K=ie;break;case"value":S=ie;break;case"defaultValue":N=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(a(137,i));break;default:It(t,i,c,ie,r,null)}}_s(t,S,N,k,K,w,g,!1);return;case"select":rt("invalid",t),c=w=S=null;for(g in r)if(r.hasOwnProperty(g)&&(N=r[g],N!=null))switch(g){case"value":S=N;break;case"defaultValue":w=N;break;case"multiple":c=N;default:It(t,i,g,N,r,null)}i=S,r=w,t.multiple=!!c,i!=null?Lt(t,!!c,i,!1):r!=null&&Lt(t,!!c,r,!0);return;case"textarea":rt("invalid",t),S=g=c=null;for(w in r)if(r.hasOwnProperty(w)&&(N=r[w],N!=null))switch(w){case"value":c=N;break;case"defaultValue":g=N;break;case"children":S=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:It(t,i,w,N,r,null)}Ro(t,c,g,S);return;case"option":for(k in r)if(r.hasOwnProperty(k)&&(c=r[k],c!=null))switch(k){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:It(t,i,k,c,r,null)}return;case"dialog":rt("beforetoggle",t),rt("toggle",t),rt("cancel",t),rt("close",t);break;case"iframe":case"object":rt("load",t);break;case"video":case"audio":for(c=0;c<Fr.length;c++)rt(Fr[c],t);break;case"image":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"embed":case"source":case"link":rt("error",t),rt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in r)if(r.hasOwnProperty(K)&&(c=r[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:It(t,i,K,c,r,null)}return;default:if(ys(i)){for(ie in r)r.hasOwnProperty(ie)&&(c=r[ie],c!==void 0&&Gd(t,i,ie,c,r,void 0));return}}for(N in r)r.hasOwnProperty(N)&&(c=r[N],c!=null&&It(t,i,N,c,r,null))}function d0(t,i,r,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,S=null,w=null,N=null,k=null,K=null,ie=null;for(te in r){var re=r[te];if(r.hasOwnProperty(te)&&re!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":k=re;default:c.hasOwnProperty(te)||It(t,i,te,null,c,re)}}for(var W in c){var te=c[W];if(re=r[W],c.hasOwnProperty(W)&&(te!=null||re!=null))switch(W){case"type":S=te;break;case"name":g=te;break;case"checked":K=te;break;case"defaultChecked":ie=te;break;case"value":w=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,i));break;default:te!==re&&It(t,i,W,te,c,re)}}or(t,w,N,k,K,ie,S,g);return;case"select":te=w=N=W=null;for(S in r)if(k=r[S],r.hasOwnProperty(S)&&k!=null)switch(S){case"value":break;case"multiple":te=k;default:c.hasOwnProperty(S)||It(t,i,S,null,c,k)}for(g in c)if(S=c[g],k=r[g],c.hasOwnProperty(g)&&(S!=null||k!=null))switch(g){case"value":W=S;break;case"defaultValue":N=S;break;case"multiple":w=S;default:S!==k&&It(t,i,g,S,c,k)}i=N,r=w,c=te,W!=null?Lt(t,!!r,W,!1):!!c!=!!r&&(i!=null?Lt(t,!!r,i,!0):Lt(t,!!r,r?[]:"",!1));return;case"textarea":te=W=null;for(N in r)if(g=r[N],r.hasOwnProperty(N)&&g!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:It(t,i,N,null,c,g)}for(w in c)if(g=c[w],S=r[w],c.hasOwnProperty(w)&&(g!=null||S!=null))switch(w){case"value":W=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(a(91));break;default:g!==S&&It(t,i,w,g,c,S)}Bi(t,W,te);return;case"option":for(var Me in r)if(W=r[Me],r.hasOwnProperty(Me)&&W!=null&&!c.hasOwnProperty(Me))switch(Me){case"selected":t.selected=!1;break;default:It(t,i,Me,null,c,W)}for(k in c)if(W=c[k],te=r[k],c.hasOwnProperty(k)&&W!==te&&(W!=null||te!=null))switch(k){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:It(t,i,k,W,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in r)W=r[qe],r.hasOwnProperty(qe)&&W!=null&&!c.hasOwnProperty(qe)&&It(t,i,qe,null,c,W);for(K in c)if(W=c[K],te=r[K],c.hasOwnProperty(K)&&W!==te&&(W!=null||te!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,i));break;default:It(t,i,K,W,c,te)}return;default:if(ys(i)){for(var Dt in r)W=r[Dt],r.hasOwnProperty(Dt)&&W!==void 0&&!c.hasOwnProperty(Dt)&&Gd(t,i,Dt,void 0,c,W);for(ie in c)W=c[ie],te=r[ie],!c.hasOwnProperty(ie)||W===te||W===void 0&&te===void 0||Gd(t,i,ie,W,c,te);return}}for(var V in r)W=r[V],r.hasOwnProperty(V)&&W!=null&&!c.hasOwnProperty(V)&&It(t,i,V,null,c,W);for(re in c)W=c[re],te=r[re],!c.hasOwnProperty(re)||W===te||W==null&&te==null||It(t,i,re,W,c,te)}function wp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f0(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var g=r[c],S=g.transferSize,w=g.initiatorType,N=g.duration;if(S&&N&&wp(w)){for(w=0,N=g.responseEnd,c+=1;c<r.length;c++){var k=r[c],K=k.startTime;if(K>N)break;var ie=k.transferSize,re=k.initiatorType;ie&&wp(re)&&(k=k.responseEnd,w+=ie*(k<N?1:(N-K)/(k-K)))}if(--c,i+=8*(S+w)/(g.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Vd=null,Fd=null;function Eu(t){return t.nodeType===9?t:t.ownerDocument}function Mp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bp(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Zd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Yd=null;function h0(){var t=window.event;return t&&t.type==="popstate"?t===Yd?!1:(Yd=t,!0):(Yd=null,!1)}var Rp=typeof setTimeout=="function"?setTimeout:void 0,m0=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,p0=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(t){return Np.resolve(null).then(t).catch(g0)}:Rp;function g0(t){setTimeout(function(){throw t})}function is(t){return t==="head"}function Ip(t,i){var r=i,c=0;do{var g=r.nextSibling;if(t.removeChild(r),g&&g.nodeType===8)if(r=g.data,r==="/$"||r==="/&"){if(c===0){t.removeChild(g),Ha(i);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")Yr(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Yr(r);for(var S=r.firstChild;S;){var w=S.nextSibling,N=S.nodeName;S[ps]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&S.rel.toLowerCase()==="stylesheet"||r.removeChild(S),S=w}}else r==="body"&&Yr(t.ownerDocument.body);r=g}while(r);Ha(i)}function Dp(t,i){var r=t;t=0;do{var c=r.nextSibling;if(r.nodeType===1?i?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(i?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=c}while(r)}function Jd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var r=i;switch(i=i.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Jd(r),er(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function v0(t,i,r,c){for(;t.nodeType===1;){var g=r;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[ps])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(S=t.getAttribute("rel"),S==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(S!==g.rel||t.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||t.getAttribute("title")!==(g.title==null?null:g.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(S=t.getAttribute("src"),(S!==(g.src==null?null:g.src)||t.getAttribute("type")!==(g.type==null?null:g.type)||t.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&S&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var S=g.name==null?null:""+g.name;if(g.type==="hidden"&&t.getAttribute("name")===S)return t}else return t;if(t=Ti(t.nextSibling),t===null)break}return null}function _0(t,i,r){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Ti(t.nextSibling),t===null))return null;return t}function Lp(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Ti(t.nextSibling),t===null))return null;return t}function Kd(t){return t.data==="$?"||t.data==="$~"}function Xd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function y0(t,i){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||r.readyState!=="loading")i();else{var c=function(){i(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function Ti(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var Qd=null;function Pp(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(i===0)return Ti(t.nextSibling);i--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||i++}t=t.nextSibling}return null}function Up(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(i===0)return t;i--}else r!=="/$"&&r!=="/&"||i++}t=t.previousSibling}return null}function zp(t,i,r){switch(i=Eu(r),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Yr(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);er(t)}var xi=new Map,kp=new Set;function Cu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xo=ue.d;ue.d={f:S0,r:T0,D:x0,C:E0,L:C0,m:A0,X:M0,S:w0,M:b0};function S0(){var t=xo.f(),i=pu();return t||i}function T0(t){var i=wo(t);i!==null&&i.tag===5&&i.type==="form"?em(i):xo.r(t)}var Ua=typeof document>"u"?null:document;function Hp(t,i,r){var c=Ua;if(c&&typeof i=="string"&&i){var g=zt(i);g='link[rel="'+t+'"][href="'+g+'"]',typeof r=="string"&&(g+='[crossorigin="'+r+'"]'),kp.has(g)||(kp.add(g),t={rel:t,crossOrigin:r,href:i},c.querySelector(g)===null&&(i=c.createElement("link"),Dn(i,"link",t),cn(i),c.head.appendChild(i)))}}function x0(t){xo.D(t),Hp("dns-prefetch",t,null)}function E0(t,i){xo.C(t,i),Hp("preconnect",t,i)}function C0(t,i,r){xo.L(t,i,r);var c=Ua;if(c&&t&&i){var g='link[rel="preload"][as="'+zt(i)+'"]';i==="image"&&r&&r.imageSrcSet?(g+='[imagesrcset="'+zt(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(g+='[imagesizes="'+zt(r.imageSizes)+'"]')):g+='[href="'+zt(t)+'"]';var S=g;switch(i){case"style":S=za(t);break;case"script":S=ka(t)}xi.has(S)||(t=E({rel:"preload",href:i==="image"&&r&&r.imageSrcSet?void 0:t,as:i},r),xi.set(S,t),c.querySelector(g)!==null||i==="style"&&c.querySelector(Jr(S))||i==="script"&&c.querySelector(Kr(S))||(i=c.createElement("link"),Dn(i,"link",t),cn(i),c.head.appendChild(i)))}}function A0(t,i){xo.m(t,i);var r=Ua;if(r&&t){var c=i&&typeof i.as=="string"?i.as:"script",g='link[rel="modulepreload"][as="'+zt(c)+'"][href="'+zt(t)+'"]',S=g;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ka(t)}if(!xi.has(S)&&(t=E({rel:"modulepreload",href:t},i),xi.set(S,t),r.querySelector(g)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Kr(S)))return}c=r.createElement("link"),Dn(c,"link",t),cn(c),r.head.appendChild(c)}}}function w0(t,i,r){xo.S(t,i,r);var c=Ua;if(c&&t){var g=Mo(c).hoistableStyles,S=za(t);i=i||"default";var w=g.get(S);if(!w){var N={loading:0,preload:null};if(w=c.querySelector(Jr(S)))N.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},r),(r=xi.get(S))&&Wd(t,r);var k=w=c.createElement("link");cn(k),Dn(k,"link",t),k._p=new Promise(function(K,ie){k.onload=K,k.onerror=ie}),k.addEventListener("load",function(){N.loading|=1}),k.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Au(w,i,c)}w={type:"stylesheet",instance:w,count:1,state:N},g.set(S,w)}}}function M0(t,i){xo.X(t,i);var r=Ua;if(r&&t){var c=Mo(r).hoistableScripts,g=ka(t),S=c.get(g);S||(S=r.querySelector(Kr(g)),S||(t=E({src:t,async:!0},i),(i=xi.get(g))&&$d(t,i),S=r.createElement("script"),cn(S),Dn(S,"link",t),r.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(g,S))}}function b0(t,i){xo.M(t,i);var r=Ua;if(r&&t){var c=Mo(r).hoistableScripts,g=ka(t),S=c.get(g);S||(S=r.querySelector(Kr(g)),S||(t=E({src:t,async:!0,type:"module"},i),(i=xi.get(g))&&$d(t,i),S=r.createElement("script"),cn(S),Dn(S,"link",t),r.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},c.set(g,S))}}function Op(t,i,r,c){var g=(g=ge.current)?Cu(g):null;if(!g)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(i=za(r.href),r=Mo(g).hoistableStyles,c=r.get(i),c||(c={type:"style",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=za(r.href);var S=Mo(g).hoistableStyles,w=S.get(t);if(w||(g=g.ownerDocument||g,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(t,w),(S=g.querySelector(Jr(t)))&&!S._p&&(w.instance=S,w.state.loading=5),xi.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},xi.set(t,r),S||R0(g,t,r,w.state))),i&&c===null)throw Error(a(528,""));return w}if(i&&c!==null)throw Error(a(529,""));return null;case"script":return i=r.async,r=r.src,typeof r=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ka(r),r=Mo(g).hoistableScripts,c=r.get(i),c||(c={type:"script",instance:null,count:0,state:null},r.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function za(t){return'href="'+zt(t)+'"'}function Jr(t){return'link[rel="stylesheet"]['+t+"]"}function Bp(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function R0(t,i,r,c){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=t.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Dn(i,"link",r),cn(i),t.head.appendChild(i))}function ka(t){return'[src="'+zt(t)+'"]'}function Kr(t){return"script[async]"+t}function qp(t,i,r){if(i.count++,i.instance===null)switch(i.type){case"style":var c=t.querySelector('style[data-href~="'+zt(r.href)+'"]');if(c)return i.instance=c,cn(c),c;var g=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),cn(c),Dn(c,"style",g),Au(c,r.precedence,t),i.instance=c;case"stylesheet":g=za(r.href);var S=t.querySelector(Jr(g));if(S)return i.state.loading|=4,i.instance=S,cn(S),S;c=Bp(r),(g=xi.get(g))&&Wd(c,g),S=(t.ownerDocument||t).createElement("link"),cn(S);var w=S;return w._p=new Promise(function(N,k){w.onload=N,w.onerror=k}),Dn(S,"link",c),i.state.loading|=4,Au(S,r.precedence,t),i.instance=S;case"script":return S=ka(r.src),(g=t.querySelector(Kr(S)))?(i.instance=g,cn(g),g):(c=r,(g=xi.get(S))&&(c=E({},r),$d(c,g)),t=t.ownerDocument||t,g=t.createElement("script"),cn(g),Dn(g,"link",c),t.head.appendChild(g),i.instance=g);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Au(c,r.precedence,t));return i.instance}function Au(t,i,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=c.length?c[c.length-1]:null,S=g,w=0;w<c.length;w++){var N=c[w];if(N.dataset.precedence===i)S=N;else if(S!==g)break}S?S.parentNode.insertBefore(t,S.nextSibling):(i=r.nodeType===9?r.head:r,i.insertBefore(t,i.firstChild))}function Wd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function $d(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var wu=null;function Gp(t,i,r){if(wu===null){var c=new Map,g=wu=new Map;g.set(r,c)}else g=wu,c=g.get(r),c||(c=new Map,g.set(r,c));if(c.has(t))return c;for(c.set(t,null),r=r.getElementsByTagName(t),g=0;g<r.length;g++){var S=r[g];if(!(S[ps]||S[un]||t==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var w=S.getAttribute(i)||"";w=t+w;var N=c.get(w);N?N.push(S):c.set(w,[S])}}return c}function Vp(t,i,r){t=t.ownerDocument||t,t.head.insertBefore(r,i==="title"?t.querySelector("head > title"):null)}function N0(t,i,r){if(r===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function I0(t,i,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var g=za(c.href),S=i.querySelector(Jr(g));if(S){i=S._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Mu.bind(t),i.then(t,t)),r.state.loading|=4,r.instance=S,cn(S);return}S=i.ownerDocument||i,c=Bp(c),(g=xi.get(g))&&Wd(c,g),S=S.createElement("link"),cn(S);var w=S;w._p=new Promise(function(N,k){w.onload=N,w.onerror=k}),Dn(S,"link",c),r.instance=S}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=Mu.bind(t),i.addEventListener("load",r),i.addEventListener("error",r))}}var jd=0;function D0(t,i){return t.stylesheets&&t.count===0&&Ru(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var c=setTimeout(function(){if(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend){var S=t.unsuspend;t.unsuspend=null,S()}},6e4+i);0<t.imgBytes&&jd===0&&(jd=62500*f0());var g=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend)){var S=t.unsuspend;t.unsuspend=null,S()}},(t.imgBytes>jd?50:800)+i);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(g)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var bu=null;function Ru(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,bu=new Map,i.forEach(L0,t),bu=null,Mu.call(t))}function L0(t,i){if(!(i.state.loading&4)){var r=bu.get(t);if(r)var c=r.get(null);else{r=new Map,bu.set(t,r);for(var g=t.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<g.length;S++){var w=g[S];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(r.set(w.dataset.precedence,w),c=w)}c&&r.set(null,c)}g=i.instance,w=g.getAttribute("data-precedence"),S=r.get(w)||c,S===c&&r.set(null,g),r.set(w,g),this.count++,c=Mu.bind(this),g.addEventListener("load",c),g.addEventListener("error",c),S?S.parentNode.insertBefore(g,S.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(g,t.firstChild)),i.state.loading|=4}}var Xr={$$typeof:B,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function P0(t,i,r,c,g,S,w,N,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=c,this.onUncaughtError=g,this.onCaughtError=S,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Zp(t,i,r,c,g,S,w,N,k,K,ie,re){return t=new P0(t,i,r,w,k,K,ie,re,N),i=1,S===!0&&(i|=24),S=Pn(3,null,null,i),t.current=S,S.stateNode=t,i=Dc(),i.refCount++,t.pooledCache=i,i.refCount++,S.memoizedState={element:c,isDehydrated:r,cache:i},zc(S),t}function Yp(t){return t?(t=ro,t):ro}function Jp(t,i,r,c,g,S){g=Yp(g),c.context===null?c.context=g:c.pendingContext=g,c=Yo(i),c.payload={element:r},S=S===void 0?null:S,S!==null&&(c.callback=S),r=Jo(t,c,i),r!==null&&(jn(r,t,i),Mr(r,t,i))}function Kp(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<i?r:i}}function ef(t,i){Kp(t,i),(t=t.alternate)&&Kp(t,i)}function Xp(t){if(t.tag===13||t.tag===31){var i=_i(t,67108864);i!==null&&jn(i,t,67108864),ef(t,67108864)}}function Qp(t){if(t.tag===13||t.tag===31){var i=di();i=Xt(i);var r=_i(t,i);r!==null&&jn(r,t,i),ef(t,i)}}var Nu=!0;function U0(t,i,r,c){var g=Z.T;Z.T=null;var S=ue.p;try{ue.p=2,tf(t,i,r,c)}finally{ue.p=S,Z.T=g}}function z0(t,i,r,c){var g=Z.T;Z.T=null;var S=ue.p;try{ue.p=8,tf(t,i,r,c)}finally{ue.p=S,Z.T=g}}function tf(t,i,r,c){if(Nu){var g=nf(c);if(g===null)qd(t,i,c,Iu,r),$p(t,c);else if(H0(g,t,i,r,c))c.stopPropagation();else if($p(t,c),i&4&&-1<k0.indexOf(t)){for(;g!==null;){var S=wo(g);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var w=ht(S.pendingLanes);if(w!==0){var N=S;for(N.pendingLanes|=2,N.entangledLanes|=2;w;){var k=1<<31-Te(w);N.entanglements[1]|=k,w&=~k}$i(S),(xt&6)===0&&(hu=tt()+500,Vr(0))}}break;case 31:case 13:N=_i(S,2),N!==null&&jn(N,S,2),pu(),ef(S,2)}if(S=nf(c),S===null&&qd(t,i,c,Iu,r),S===g)break;g=S}g!==null&&c.stopPropagation()}else qd(t,i,c,null,r)}}function nf(t){return t=Ss(t),of(t)}var Iu=null;function of(t){if(Iu=null,t=to(t),t!==null){var i=d(t);if(i===null)t=null;else{var r=i.tag;if(r===13){if(t=h(i),t!==null)return t;t=null}else if(r===31){if(t=v(i),t!==null)return t;t=null}else if(r===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Iu=t,null}function Wp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(an()){case Jt:return 2;case ze:return 8;case Ut:case rn:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var sf=!1,os=null,ss=null,as=null,Qr=new Map,Wr=new Map,rs=[],k0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $p(t,i){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Qr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wr.delete(i.pointerId)}}function $r(t,i,r,c,g,S){return t===null||t.nativeEvent!==S?(t={blockedOn:i,domEventName:r,eventSystemFlags:c,nativeEvent:S,targetContainers:[g]},i!==null&&(i=wo(i),i!==null&&Xp(i)),t):(t.eventSystemFlags|=c,i=t.targetContainers,g!==null&&i.indexOf(g)===-1&&i.push(g),t)}function H0(t,i,r,c,g){switch(i){case"focusin":return os=$r(os,t,i,r,c,g),!0;case"dragenter":return ss=$r(ss,t,i,r,c,g),!0;case"mouseover":return as=$r(as,t,i,r,c,g),!0;case"pointerover":var S=g.pointerId;return Qr.set(S,$r(Qr.get(S)||null,t,i,r,c,g)),!0;case"gotpointercapture":return S=g.pointerId,Wr.set(S,$r(Wr.get(S)||null,t,i,r,c,g)),!0}return!1}function jp(t){var i=to(t.target);if(i!==null){var r=d(i);if(r!==null){if(i=r.tag,i===13){if(i=h(r),i!==null){t.blockedOn=i,Ai(t.priority,function(){Qp(r)});return}}else if(i===31){if(i=v(r),i!==null){t.blockedOn=i,Ai(t.priority,function(){Qp(r)});return}}else if(i===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var r=nf(t.nativeEvent);if(r===null){r=t.nativeEvent;var c=new r.constructor(r.type,r);na=c,r.target.dispatchEvent(c),na=null}else return i=wo(r),i!==null&&Xp(i),t.blockedOn=r,!1;i.shift()}return!0}function eg(t,i,r){Du(t)&&r.delete(i)}function O0(){sf=!1,os!==null&&Du(os)&&(os=null),ss!==null&&Du(ss)&&(ss=null),as!==null&&Du(as)&&(as=null),Qr.forEach(eg),Wr.forEach(eg)}function Lu(t,i){t.blockedOn===i&&(t.blockedOn=null,sf||(sf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,O0)))}var Pu=null;function tg(t){Pu!==t&&(Pu=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pu===t&&(Pu=null);for(var i=0;i<t.length;i+=3){var r=t[i],c=t[i+1],g=t[i+2];if(typeof c!="function"){if(of(c||r)===null)continue;break}var S=wo(r);S!==null&&(t.splice(i,3),i-=3,nd(S,{pending:!0,data:g,method:r.method,action:c},c,g))}}))}function Ha(t){function i(k){return Lu(k,t)}os!==null&&Lu(os,t),ss!==null&&Lu(ss,t),as!==null&&Lu(as,t),Qr.forEach(i),Wr.forEach(i);for(var r=0;r<rs.length;r++){var c=rs[r];c.blockedOn===t&&(c.blockedOn=null)}for(;0<rs.length&&(r=rs[0],r.blockedOn===null);)jp(r),r.blockedOn===null&&rs.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var g=r[c],S=r[c+1],w=g[xn]||null;if(typeof S=="function")w||tg(r);else if(w){var N=null;if(S&&S.hasAttribute("formAction")){if(g=S,w=S[xn]||null)N=w.formAction;else if(of(g)!==null)continue}else N=w.action;typeof N=="function"?r[c+1]=N:(r.splice(c,3),c-=3),tg(r)}}}function ng(){function t(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(w){return g=w})},focusReset:"manual",scroll:"manual"})}function i(){g!==null&&(g(),g=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,g=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),g!==null&&(g(),g=null)}}}function af(t){this._internalRoot=t}Uu.prototype.render=af.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var r=i.current,c=di();Jp(r,c,t,i,null,null)},Uu.prototype.unmount=af.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Jp(t.current,2,null,t,null,null),pu(),i[eo]=null}};function Uu(t){this._internalRoot=t}Uu.prototype.unstable_scheduleHydration=function(t){if(t){var i=Gn();t={blockedOn:null,target:t,priority:i};for(var r=0;r<rs.length&&i!==0&&i<rs[r].priority;r++);rs.splice(r,0,t),r===0&&jp(t)}};var ig=e.version;if(ig!=="19.2.0")throw Error(a(527,ig,"19.2.0"));ue.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(i),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var B0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{gn=zu.inject(B0),dt=zu}catch{}}return el.createRoot=function(t,i){if(!l(t))throw Error(a(299));var r=!1,c="",g=cm,S=dm,w=fm;return i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(S=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Zp(t,1,!1,null,null,r,c,null,g,S,w,ng),t[eo]=i.current,Bd(t),new af(i)},el.hydrateRoot=function(t,i,r){if(!l(t))throw Error(a(299));var c=!1,g="",S=cm,w=dm,N=fm,k=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(g=r.identifierPrefix),r.onUncaughtError!==void 0&&(S=r.onUncaughtError),r.onCaughtError!==void 0&&(w=r.onCaughtError),r.onRecoverableError!==void 0&&(N=r.onRecoverableError),r.formState!==void 0&&(k=r.formState)),i=Zp(t,1,!0,i,r??null,c,g,k,S,w,N,ng),i.context=Yp(null),r=i.current,c=di(),c=Xt(c),g=Yo(c),g.callback=null,Jo(r,g,c),r=c,i.current.lanes=r,en(i,r),$i(i),t[eo]=i.current,Bd(t),new Uu(i)},el.version="19.2.0",el}var hg;function X0(){if(hg)return uf.exports;hg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uf.exports=K0(),uf.exports}var Q0=X0();const W0=Of(Q0),$0={truck:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:A.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})}),pin:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:A.jsx("path",{d:"M12 11.5A2.5 2.5 0 019.5 9A2.5 2.5 0 0112 6.5A2.5 2.5 0 0114.5 9a2.5 2.5 0 01-2.5 2.5zM12 2a7 7 0 00-7 7c0 5.25 7 13 7 13s7-7.75 7-13a7 7 0 00-7-7z"})}),flag:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:A.jsx("path",{d:"M14.4 6L14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6z"})}),clock:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),traffic:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"})}),cloud:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-2.666-5.43a4.5 4.5 0 00-9.512 2.076A4.5 4.5 0 002.25 15z"})}),"check-circle":n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"x-circle":n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),spinner:n=>A.jsxs("svg",{...n,className:`${n.className} animate-spin`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[A.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),A.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),trash:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),route:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 6.75V15m6-6v8.25m.503 3.498l4.875-2.437c.381-.19.622-.58.622-1.006V4.82c0-.836-.88-1.38-1.628-1.006l-3.869 1.934c-.317.159-.69.159-1.006 0L9.503 3.252a1.125 1.125 0 00-1.006 0L3.622 5.689C3.24 5.88 3 6.27 3 6.695V19.18c0 .836.88 1.38 1.628 1.006l3.869-1.934c.317-.159.69-.159 1.006 0l4.994 2.497c.317.158.69.158 1.006 0z"})}),"chevron-down":n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),"chevron-up":n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),list:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),bell:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),zap:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),activity:n=>A.jsx("svg",{...n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:A.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})})},Ze=({name:n,className:e})=>{const o=$0[n];return o?A.jsx(o,{className:e}):null},mg=({onCreate:n,onTrack:e})=>A.jsxs("div",{className:"h-full bg-gray-100 flex flex-col items-center justify-center p-4",children:[A.jsxs("div",{className:"text-center mb-12",children:[A.jsx(Ze,{name:"truck",className:"h-20 w-20 text-indigo-600 mx-auto"}),A.jsx("h1",{className:"text-4xl font-bold text-gray-800 mt-4",children:"Logistics B2B Tracker"}),A.jsx("p",{className:"text-gray-500 mt-2",children:"Manage and track your B2B deliveries with confidence."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl w-full",children:[A.jsxs("button",{onClick:n,className:"group bg-white p-8 rounded-xl shadow-2xl hover:shadow-indigo-200 transition-shadow text-left",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800 group-hover:text-indigo-600 transition-colors",children:"Create New Shipment"}),A.jsx("p",{className:"text-gray-500 mt-2",children:"Set up a new delivery, define stops, and generate tracking numbers for all parties."})]}),A.jsxs("button",{onClick:e,className:"group bg-white p-8 rounded-xl shadow-2xl hover:shadow-indigo-200 transition-shadow text-left",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800 group-hover:text-indigo-600 transition-colors",children:"Track Existing Shipment"}),A.jsx("p",{className:"text-gray-500 mt-2",children:"Enter a tracking number to view the real-time status and location of a shipment."})]})]}),A.jsx("div",{className:"mt-12",children:A.jsx("button",{onClick:()=>{confirm("Are you sure you want to clear all saved shipments and tracking numbers? This cannot be undone.")&&(localStorage.clear(),window.location.reload())},className:"text-xs text-gray-400 hover:text-red-500 underline",children:"Reset All Data"})})]}),pg=({onTrack:n,error:e,onBack:o})=>{const[a,l]=D.useState(""),d=h=>{h.preventDefault(),n(a.trim())};return A.jsx("div",{className:"h-full bg-gray-100 flex flex-col items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-2xl p-8 space-y-6 relative",children:[A.jsx("button",{onClick:o,className:"absolute top-4 left-4 text-sm text-gray-500 hover:text-indigo-600",children:" Back"}),A.jsxs("div",{className:"flex flex-col items-center space-y-2 pt-8",children:[A.jsx(Ze,{name:"truck",className:"h-16 w-16 text-indigo-600"}),A.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Logistics Tracking"}),A.jsx("p",{className:"text-gray-500",children:"Enter your tracking number to see shipment status."})]}),A.jsxs("form",{onSubmit:d,className:"space-y-4",children:[A.jsx("input",{type:"text",value:a,onChange:h=>l(h.target.value),placeholder:"e.g., SUPPLIER123 or SUPER8-456",className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition"}),e&&A.jsx("p",{className:"text-red-500 text-sm",children:e}),A.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105",children:"Track Shipment"})]}),A.jsx("div",{className:"text-xs text-gray-400 text-center",children:A.jsx("p",{children:"Demo Numbers: SUPPLIER123, SUPER8-456, MANAGER789"})})]})})};var Vt=(n=>(n.SUPPLIER="SUPPLIER",n.RECIPIENT="RECIPIENT",n.MANAGER="MANAGER",n))(Vt||{}),wn=(n=>(n.HIGH="High",n.MEDIUM="Medium",n.LOW="Low",n))(wn||{}),ei=(n=>(n.PENDING="Pending",n.IN_TRANSIT_LONG_HAUL="In Transit (Long Haul)",n.AT_HUB="At Distribution Hub",n.IN_TRANSIT_LAST_MILE="In Transit (Last Mile)",n.DELIVERED="Delivered",n.DELAYED="Delayed",n))(ei||{});const gg=6e4,j0={SUPPLIER123:{role:Vt.SUPPLIER,shipmentId:"SHIP001"},"SUPER8-456":{role:Vt.RECIPIENT,shipmentId:"SHIP001",recipientStopId:"stop-2"},MANAGER789:{role:Vt.MANAGER,shipmentId:"SHIP001"}},Ju={trackingNumber:"SHIP001",shipmentItems:[{id:"item-mattress",contents:"Mattresses",quantity:10,destinationStopId:"stop-beaumont-downtown"},{id:"item-medical",contents:"Medical Equipment Kits",quantity:6,destinationStopId:"stop-beaumont-medical"},{id:"item-grocery",contents:"Grocery Pallets",quantity:8,destinationStopId:"stop-nederland-market"},{id:"item-industrial-tools",contents:"Industrial Tools & Fasteners",quantity:12,destinationStopId:"stop-port-arthur-shipyard"},{id:"item-hvac",contents:"HVAC Units",quantity:4,destinationStopId:"stop-bridge-city"},{id:"item-lubricant",contents:"Lubricant Drums",quantity:10,destinationStopId:"stop-groves"},{id:"item-ecommerce",contents:"E-commerce Parcels",quantity:40,destinationStopId:"stop-midcounty"},{id:"item-clinic",contents:"Clinic Supplies",quantity:7,destinationStopId:"stop-vidor"},{id:"item-home",contents:"Home Improvement Goods",quantity:9,destinationStopId:"stop-silsbee"},{id:"item-retail-fixtures",contents:"Retail Fixtures",quantity:5,destinationStopId:"stop-lumberton"}],origin:{id:"stop-origin-beaumont",name:"Beaumont Distribution Center (Inbound)",location:[30.0833,-94.125],status:"Completed"},longHaulStops:[],hub:{id:"stop-hub-beaumont",name:"Beaumont Cross-Dock Hub",location:[30.0833,-94.125],status:"Pending"},lastMileStops:[{id:"stop-beaumont-downtown",name:"Downtown Beaumont Retail",location:[30.0869,-94.1018],status:"Pending",unloadingTimeMinutes:20},{id:"stop-beaumont-medical",name:"Beaumont Medical Center",location:[30.0292,-94.13],status:"Pending",unloadingTimeMinutes:25},{id:"stop-nederland-market",name:"Nederland Fresh Market",location:[29.9739,-94.0021],status:"Pending",unloadingTimeMinutes:30},{id:"stop-port-arthur-shipyard",name:"Port Arthur Shipyard Supply",location:[29.884,-93.939],status:"Pending",unloadingTimeMinutes:35},{id:"stop-bridge-city",name:"Bridge City Hardware",location:[30.0274,-93.8451],status:"Pending",unloadingTimeMinutes:40},{id:"stop-groves",name:"Groves Industrial Park",location:[29.9483,-93.917],status:"Pending",unloadingTimeMinutes:15},{id:"stop-midcounty",name:"Mid-County Logistics Depot",location:[29.9688,-94.082],status:"Pending",unloadingTimeMinutes:20},{id:"stop-vidor",name:"Vidor Community Clinic",location:[30.1311,-94.0158],status:"Pending",unloadingTimeMinutes:18},{id:"stop-silsbee",name:"Silsbee Home Store",location:[30.3491,-94.1777],status:"Pending",unloadingTimeMinutes:22},{id:"stop-lumberton",name:"Lumberton Distribution Outlet",location:[30.265,-94.199],status:"Pending",unloadingTimeMinutes:28}],status:ei.PENDING,currentLegIndex:0};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eS,tS;function nS(){return{geminiUrl:eS,vertexUrl:tS}}function iS(n,e,o,a){var l,d;if(!(n!=null&&n.baseUrl)){const h=nS();return e?(l=h.vertexUrl)!==null&&l!==void 0?l:o:(d=h.geminiUrl)!==null&&d!==void 0?d:a}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Co{}function xe(n,e){const o=/\{([^}]+)\}/g;return n.replace(o,(a,l)=>{if(Object.prototype.hasOwnProperty.call(e,l)){const d=e[l];return d!=null?String(d):""}else throw new Error(`Key '${l}' not found in valueMap.`)})}function m(n,e,o){for(let d=0;d<e.length-1;d++){const h=e[d];if(h.endsWith("[]")){const v=h.slice(0,-2);if(!(v in n))if(Array.isArray(o))n[v]=Array.from({length:o.length},()=>({}));else throw new Error(`Value must be a list given an array path ${h}`);if(Array.isArray(n[v])){const y=n[v];if(Array.isArray(o))for(let _=0;_<y.length;_++){const x=y[_];m(x,e.slice(d+1),o[_])}else for(const _ of y)m(_,e.slice(d+1),o)}return}else if(h.endsWith("[0]")){const v=h.slice(0,-3);v in n||(n[v]=[{}]);const y=n[v];m(y[0],e.slice(d+1),o);return}(!n[h]||typeof n[h]!="object")&&(n[h]={}),n=n[h]}const a=e[e.length-1],l=n[a];if(l!==void 0){if(!o||typeof o=="object"&&Object.keys(o).length===0||o===l)return;if(typeof l=="object"&&typeof o=="object"&&l!==null&&o!==null)Object.assign(l,o);else throw new Error(`Cannot set value for an existing key. Key: ${a}`)}else a==="_self"&&typeof o=="object"&&o!==null&&!Array.isArray(o)?Object.assign(n,o):n[a]=o}function f(n,e,o=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let a=0;a<e.length;a++){if(typeof n!="object"||n===null)return o;const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(d in n){const h=n[d];return Array.isArray(h)?h.map(v=>f(v,e.slice(a+1),o)):o}else return o}else n=n[l]}return n}catch(a){if(a instanceof TypeError)return o;throw a}}function oS(n,e){for(const[o,a]of Object.entries(e)){const l=o.split("."),d=a.split("."),h=new Set;let v=-1;for(let y=0;y<l.length;y++)if(l[y]==="*"){v=y;break}if(v!==-1&&d.length>v)for(let y=v;y<d.length;y++){const _=d[y];_!=="*"&&!_.endsWith("[]")&&!_.endsWith("[0]")&&h.add(_)}Tf(n,l,d,0,h)}}function Tf(n,e,o,a,l){if(a>=e.length||typeof n!="object"||n===null)return;const d=e[a];if(d.endsWith("[]")){const h=d.slice(0,-2),v=n;if(h in v&&Array.isArray(v[h]))for(const y of v[h])Tf(y,e,o,a+1,l)}else if(d==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const h=n,v=Object.keys(h).filter(_=>!_.startsWith("_")&&!l.has(_)),y={};for(const _ of v)y[_]=h[_];for(const[_,x]of Object.entries(y)){const E=[];for(const M of o.slice(a))M==="*"?E.push(_):E.push(M);m(h,E,x)}for(const _ of v)delete h[_]}}else{const h=n;d in h&&Tf(h[d],e,o,a+1,l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qf(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sS(n){const e={},o=f(n,["operationName"]);o!=null&&m(e,["operationName"],o);const a=f(n,["resourceName"]);return a!=null&&m(e,["_url","resourceName"],a),e}function aS(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response","generateVideoResponse"]);return h!=null&&m(e,["response"],lS(h)),e}function rS(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response"]);return h!=null&&m(e,["response"],uS(h)),e}function lS(n){const e={},o=f(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>cS(h))),m(e,["generatedVideos"],d)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&m(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&m(e,["raiMediaFilteredReasons"],l),e}function uS(n){const e={},o=f(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>dS(h))),m(e,["generatedVideos"],d)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&m(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&m(e,["raiMediaFilteredReasons"],l),e}function cS(n){const e={},o=f(n,["video"]);return o!=null&&m(e,["video"],vS(o)),e}function dS(n){const e={},o=f(n,["_self"]);return o!=null&&m(e,["video"],_S(o)),e}function fS(n){const e={},o=f(n,["operationName"]);return o!=null&&m(e,["_url","operationName"],o),e}function hS(n){const e={},o=f(n,["operationName"]);return o!=null&&m(e,["_url","operationName"],o),e}function mS(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response"]);return h!=null&&m(e,["response"],pS(h)),e}function pS(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["parent"]);a!=null&&m(e,["parent"],a);const l=f(n,["documentName"]);return l!=null&&m(e,["documentName"],l),e}function m_(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response"]);return h!=null&&m(e,["response"],gS(h)),e}function gS(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["parent"]);a!=null&&m(e,["parent"],a);const l=f(n,["documentName"]);return l!=null&&m(e,["documentName"],l),e}function vS(n){const e={},o=f(n,["uri"]);o!=null&&m(e,["uri"],o);const a=f(n,["encodedVideo"]);a!=null&&m(e,["videoBytes"],qf(a));const l=f(n,["encoding"]);return l!=null&&m(e,["mimeType"],l),e}function _S(n){const e={},o=f(n,["gcsUri"]);o!=null&&m(e,["uri"],o);const a=f(n,["bytesBase64Encoded"]);a!=null&&m(e,["videoBytes"],qf(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(vg||(vg={}));var _g;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(_g||(_g={}));var yg;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(yg||(yg={}));var ds;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ds||(ds={}));var Sg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Sg||(Sg={}));var Tg;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Tg||(Tg={}));var xg;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(xg||(xg={}));var Eg;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Eg||(Eg={}));var Cg;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Cg||(Cg={}));var Ag;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ag||(Ag={}));var wg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(wg||(wg={}));var Mg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Mg||(Mg={}));var bg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(bg||(bg={}));var Rg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Rg||(Rg={}));var Ng;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ng||(Ng={}));var Ig;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ig||(Ig={}));var Dg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Dg||(Dg={}));var Lg;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Lg||(Lg={}));var Ku;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ku||(Ku={}));var Pg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Pg||(Pg={}));var Ug;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ug||(Ug={}));var zg;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(zg||(zg={}));var xf;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xf||(xf={}));var kg;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(kg||(kg={}));var Hg;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Hg||(Hg={}));var Og;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Og||(Og={}));var Bg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Bg||(Bg={}));var qg;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qg||(qg={}));var Gg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Gg||(Gg={}));var Vg;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Vg||(Vg={}));var Fg;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Fg||(Fg={}));var Zg;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Zg||(Zg={}));var Yg;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Yg||(Yg={}));var Jg;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Jg||(Jg={}));var Kg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Kg||(Kg={}));var Xg;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Xg||(Xg={}));var Qg;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Qg||(Qg={}));var Wg;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Wg||(Wg={}));var $g;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})($g||($g={}));var jg;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(jg||(jg={}));var ev;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(ev||(ev={}));var tv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(tv||(tv={}));var nv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(nv||(nv={}));var iv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(iv||(iv={}));var ov;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(ov||(ov={}));var sv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(sv||(sv={}));var av;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(av||(av={}));var rv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(rv||(rv={}));var lv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(lv||(lv={}));var uv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uv||(uv={}));var cv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(cv||(cv={}));var dv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(dv||(dv={}));var Oa;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Oa||(Oa={}));class Ef{constructor(e){const o={};for(const a of e.headers.entries())o[a[0]]=a[1];this.headers=o,this.responseInternal=e}json(){return this.responseInternal.json()}}class tl{get text(){var e,o,a,l,d,h,v,y;if(((l=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let _="",x=!1;const E=[];for(const M of(y=(v=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||v===void 0?void 0:v.parts)!==null&&y!==void 0?y:[]){for(const[R,O]of Object.entries(M))R!=="text"&&R!=="thought"&&(O!==null||O!==void 0)&&E.push(R);if(typeof M.text=="string"){if(typeof M.thought=="boolean"&&M.thought)continue;x=!0,_+=M.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),x?_:void 0}get data(){var e,o,a,l,d,h,v,y;if(((l=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let _="";const x=[];for(const E of(y=(v=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||v===void 0?void 0:v.parts)!==null&&y!==void 0?y:[]){for(const[M,R]of Object.entries(E))M!=="inlineData"&&(R!==null||R!==void 0)&&x.push(M);E.inlineData&&typeof E.inlineData.data=="string"&&(_+=atob(E.inlineData.data))}return x.length>0&&console.warn(`there are non-data parts ${x} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),_.length>0?btoa(_):void 0}get functionCalls(){var e,o,a,l,d,h,v,y;if(((l=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const _=(y=(v=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||v===void 0?void 0:v.parts)===null||y===void 0?void 0:y.filter(x=>x.functionCall).map(x=>x.functionCall).filter(x=>x!==void 0);if((_==null?void 0:_.length)!==0)return _}get executableCode(){var e,o,a,l,d,h,v,y,_;if(((l=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const x=(y=(v=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||v===void 0?void 0:v.parts)===null||y===void 0?void 0:y.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((x==null?void 0:x.length)!==0)return(_=x==null?void 0:x[0])===null||_===void 0?void 0:_.code}get codeExecutionResult(){var e,o,a,l,d,h,v,y,_;if(((l=(a=(o=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const x=(y=(v=(h=(d=this.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content)===null||v===void 0?void 0:v.parts)===null||y===void 0?void 0:y.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((x==null?void 0:x.length)!==0)return(_=x==null?void 0:x[0])===null||_===void 0?void 0:_.output}}class fv{}class hv{}class yS{}class SS{}class TS{}class xS{}class mv{}class pv{}class gv{}class ES{}class Xu{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const a=new Xu;let l;const d=e;return o?l=rS(d):l=aS(d),Object.assign(a,l),a}}class vv{}class _v{}class yv{}class CS{}class AS{}class wS{}class Gf{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const a=new Gf,d=mS(e);return Object.assign(a,d),a}}class MS{}class bS{}class RS{}class Sv{}class NS{get text(){var e,o,a;let l="",d=!1;const h=[];for(const v of(a=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[y,_]of Object.entries(v))y!=="text"&&y!=="thought"&&_!==null&&h.push(y);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;d=!0,l+=v.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?l:void 0}get data(){var e,o,a;let l="";const d=[];for(const h of(a=(o=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||o===void 0?void 0:o.parts)!==null&&a!==void 0?a:[]){for(const[v,y]of Object.entries(h))v!=="inlineData"&&y!==null&&d.push(v);h.inlineData&&typeof h.inlineData.data=="string"&&(l+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class IS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Vf{_fromAPIResponse({apiResponse:e,_isVertexAI:o}){const a=new Vf,d=m_(e);return Object.assign(a,d),a}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const o=e.split("/",2);return`publishers/${o[0]}/models/${o[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function p_(n,e){const o=yt(n,e);return o?o.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}`:o.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${o}`:o:""}function g_(n){return Array.isArray(n)?n.map(e=>Qu(e)):[Qu(n)]}function Qu(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function v_(n){const e=Qu(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function __(n){const e=Qu(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tv(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function y_(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Tv(e)):[Tv(n)]}function Cf(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xv(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Ev(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function zn(n){if(n==null)throw new Error("ContentUnion is required");return Cf(n)?n:{role:"user",parts:y_(n)}}function Ff(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(o=>{const a=zn(o);return a.parts&&a.parts.length>0&&a.parts[0].text!==void 0?[a.parts[0].text]:[]});if(n.isVertexAI()){const o=zn(e);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]}return Array.isArray(e)?e.map(o=>zn(o)):[zn(e)]}function Ci(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xv(n)||Ev(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[zn(n)]}const e=[],o=[],a=Cf(n[0]);for(const l of n){const d=Cf(l);if(d!=a)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(d)e.push(l);else{if(xv(l)||Ev(l))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");o.push(l)}}return a||e.push({role:"user",parts:y_(o)}),e}function DS(n,e){n.includes("null")&&(e.nullable=!0);const o=n.filter(a=>a!=="null");if(o.length===1)e.type=Object.values(ds).includes(o[0].toUpperCase())?o[0].toUpperCase():ds.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const a of o)e.anyOf.push({type:Object.values(ds).includes(a.toUpperCase())?a.toUpperCase():ds.TYPE_UNSPECIFIED})}}function qa(n){const e={},o=["items"],a=["anyOf"],l=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const d=n.anyOf;d!=null&&d.length==2&&(d[0].type==="null"?(e.nullable=!0,n=d[1]):d[1].type==="null"&&(e.nullable=!0,n=d[0])),n.type instanceof Array&&DS(n.type,e);for(const[h,v]of Object.entries(n))if(v!=null)if(h=="type"){if(v==="null")throw new Error("type: null can not be the only possible type for the field.");if(v instanceof Array)continue;e.type=Object.values(ds).includes(v.toUpperCase())?v.toUpperCase():ds.TYPE_UNSPECIFIED}else if(o.includes(h))e[h]=qa(v);else if(a.includes(h)){const y=[];for(const _ of v){if(_.type=="null"){e.nullable=!0;continue}y.push(qa(_))}e[h]=y}else if(l.includes(h)){const y={};for(const[_,x]of Object.entries(v))y[_]=qa(x);e[h]=y}else{if(h==="additionalProperties")continue;e[h]=v}return e}function Zf(n){return qa(n)}function Yf(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Jf(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Ja(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=qa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=qa(e.response));return n}function Ka(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const o of n)e.push(o);return e}function LS(n,e,o,a=1){const l=!e.startsWith(`${o}/`)&&e.split("/").length===a;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${o}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:l?`projects/${n.getProject()}/locations/${n.getLocation()}/${o}/${e}`:e:l?`${o}/${e}`:e}function Ao(n,e){if(typeof e!="string")throw new Error("name must be a string");return LS(n,e,"cachedContents")}function S_(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ms(n){return qf(n)}function PS(n){return n!=null&&typeof n=="object"&&"name"in n}function US(n){return n!=null&&typeof n=="object"&&"video"in n}function zS(n){return n!=null&&typeof n=="object"&&"uri"in n}function T_(n){var e;let o;if(PS(n)&&(o=n.name),!(zS(n)&&(o=n.uri,o===void 0))&&!(US(n)&&(o=(e=n.video)===null||e===void 0?void 0:e.uri,o===void 0))){if(typeof n=="string"&&(o=n),o===void 0)throw new Error("Could not extract file name from the provided input.");if(o.startsWith("https://")){const l=o.split("files/")[1].match(/[a-z0-9]+/);if(l===null)throw new Error(`Could not extract file name from URI ${o}`);o=l[0]}else o.startsWith("files/")&&(o=o.split("files/")[1]);return o}}function x_(n,e){let o;return n.isVertexAI()?o=e?"publishers/google/models":"models":o=e?"models":"tunedModels",o}function E_(n){for(const e of["models","tunedModels","publisherModels"])if(kS(n,e))return n[e];return[]}function kS(n,e){return n!==null&&typeof n=="object"&&e in n}function HS(n,e={}){const o=n,a={name:o.name,description:o.description,parametersJsonSchema:o.inputSchema};return o.outputSchema&&(a.responseJsonSchema=o.outputSchema),e.behavior&&(a.behavior=e.behavior),{functionDeclarations:[a]}}function OS(n,e={}){const o=[],a=new Set;for(const l of n){const d=l.name;if(a.has(d))throw new Error(`Duplicate function name ${d} found in MCP tools. Please ensure function names are unique.`);a.add(d);const h=HS(l,e);h.functionDeclarations&&o.push(...h.functionDeclarations)}return{functionDeclarations:o}}function C_(n,e){let o;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))o={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))o={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))o={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");o={inlinedRequests:e}}else o=e;const a=[o.gcsUri,o.bigqueryUri].filter(Boolean).length,l=[o.inlinedRequests,o.fileName].filter(Boolean).length;if(n.isVertexAI()){if(l>0||a!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(a>0||l!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return o}function BS(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function A_(n){if(typeof n!="object"||n===null)return{};const e=n,o=e.inlinedResponses;if(typeof o!="object"||o===null)return n;const l=o.inlinedResponses;if(!Array.isArray(l)||l.length===0)return n;let d=!1;for(const h of l){if(typeof h!="object"||h===null)continue;const y=h.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){d=!0;break}}return d&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Xa(n,e){const o=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(o))return o.split("/").pop();throw new Error(`Invalid batch job name: ${o}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(o))return o.split("/").pop();if(/^\d+$/.test(o))return o;throw new Error(`Invalid batch job name: ${o}.`)}function w_(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qS(n){const e={},o=f(n,["responsesFile"]);o!=null&&m(e,["fileName"],o);const a=f(n,["inlinedResponses","inlinedResponses"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>_T(h))),m(e,["inlinedResponses"],d)}const l=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["inlinedEmbedContentResponses"],d)}return e}function GS(n){const e={},o=f(n,["predictionsFormat"]);o!=null&&m(e,["format"],o);const a=f(n,["gcsDestination","outputUriPrefix"]);a!=null&&m(e,["gcsUri"],a);const l=f(n,["bigqueryDestination","outputUri"]);return l!=null&&m(e,["bigqueryUri"],l),e}function VS(n){const e={},o=f(n,["format"]);o!=null&&m(e,["predictionsFormat"],o);const a=f(n,["gcsUri"]);a!=null&&m(e,["gcsDestination","outputUriPrefix"],a);const l=f(n,["bigqueryUri"]);if(l!=null&&m(e,["bigqueryDestination","outputUri"],l),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Vu(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata","displayName"]);a!=null&&m(e,["displayName"],a);const l=f(n,["metadata","state"]);l!=null&&m(e,["state"],w_(l));const d=f(n,["metadata","createTime"]);d!=null&&m(e,["createTime"],d);const h=f(n,["metadata","endTime"]);h!=null&&m(e,["endTime"],h);const v=f(n,["metadata","updateTime"]);v!=null&&m(e,["updateTime"],v);const y=f(n,["metadata","model"]);y!=null&&m(e,["model"],y);const _=f(n,["metadata","output"]);return _!=null&&m(e,["dest"],qS(A_(_))),e}function Af(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["displayName"]);a!=null&&m(e,["displayName"],a);const l=f(n,["state"]);l!=null&&m(e,["state"],w_(l));const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["createTime"]);h!=null&&m(e,["createTime"],h);const v=f(n,["startTime"]);v!=null&&m(e,["startTime"],v);const y=f(n,["endTime"]);y!=null&&m(e,["endTime"],y);const _=f(n,["updateTime"]);_!=null&&m(e,["updateTime"],_);const x=f(n,["model"]);x!=null&&m(e,["model"],x);const E=f(n,["inputConfig"]);E!=null&&m(e,["src"],FS(E));const M=f(n,["outputConfig"]);M!=null&&m(e,["dest"],GS(A_(M)));const R=f(n,["completionStats"]);return R!=null&&m(e,["completionStats"],R),e}function FS(n){const e={},o=f(n,["instancesFormat"]);o!=null&&m(e,["format"],o);const a=f(n,["gcsSource","uris"]);a!=null&&m(e,["gcsUri"],a);const l=f(n,["bigquerySource","inputUri"]);return l!=null&&m(e,["bigqueryUri"],l),e}function ZS(n,e){const o={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const a=f(e,["fileName"]);a!=null&&m(o,["fileName"],a);const l=f(e,["inlinedRequests"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>vT(n,h))),m(o,["requests","requests"],d)}return o}function YS(n){const e={},o=f(n,["format"]);o!=null&&m(e,["instancesFormat"],o);const a=f(n,["gcsUri"]);a!=null&&m(e,["gcsSource","uris"],a);const l=f(n,["bigqueryUri"]);if(l!=null&&m(e,["bigquerySource","inputUri"],l),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function JS(n){const e={},o=f(n,["data"]);if(o!=null&&m(e,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function KS(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function XS(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function QS(n){const e={},o=f(n,["content"]);o!=null&&m(e,["content"],o);const a=f(n,["citationMetadata"]);a!=null&&m(e,["citationMetadata"],WS(a));const l=f(n,["tokenCount"]);l!=null&&m(e,["tokenCount"],l);const d=f(n,["finishReason"]);d!=null&&m(e,["finishReason"],d);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const v=f(n,["groundingMetadata"]);v!=null&&m(e,["groundingMetadata"],v);const y=f(n,["index"]);y!=null&&m(e,["index"],y);const _=f(n,["logprobsResult"]);_!=null&&m(e,["logprobsResult"],_);const x=f(n,["safetyRatings"]);if(x!=null){let M=x;Array.isArray(M)&&(M=M.map(R=>R)),m(e,["safetyRatings"],M)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function WS(n){const e={},o=f(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["citations"],a)}return e}function M_(n){const e={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>AT(d))),m(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&m(e,["role"],a),e}function $S(n,e){const o={},a=f(n,["displayName"]);if(e!==void 0&&a!=null&&m(e,["batch","displayName"],a),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return o}function jS(n,e){const o={},a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(n,["dest"]);return e!==void 0&&l!=null&&m(e,["outputConfig"],VS(BS(l))),o}function Cv(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["src"]);l!=null&&m(o,["batch","inputConfig"],ZS(n,C_(n,l)));const d=f(e,["config"]);return d!=null&&$S(d,o),o}function eT(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["model"],yt(n,a));const l=f(e,["src"]);l!=null&&m(o,["inputConfig"],YS(C_(n,l)));const d=f(e,["config"]);return d!=null&&jS(d,o),o}function tT(n,e){const o={},a=f(n,["displayName"]);return e!==void 0&&a!=null&&m(e,["batch","displayName"],a),o}function nT(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["src"]);l!=null&&m(o,["batch","inputConfig"],uT(n,l));const d=f(e,["config"]);return d!=null&&tT(d,o),o}function iT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function oT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function sT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["name"]);a!=null&&m(e,["name"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);return d!=null&&m(e,["error"],d),e}function aT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["name"]);a!=null&&m(e,["name"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);return d!=null&&m(e,["error"],d),e}function rT(n,e){const o={},a=f(e,["contents"]);if(a!=null){let d=Ff(n,a);Array.isArray(d)&&(d=d.map(h=>h)),m(o,["requests[]","request","content"],d)}const l=f(e,["config"]);return l!=null&&(m(o,["_self"],lT(l,o)),oS(o,{"requests[].*":"requests[].request.*"})),o}function lT(n,e){const o={},a=f(n,["taskType"]);e!==void 0&&a!=null&&m(e,["requests[]","taskType"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&m(e,["requests[]","title"],l);const d=f(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&m(e,["requests[]","outputDimensionality"],d),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function uT(n,e){const o={},a=f(e,["fileName"]);a!=null&&m(o,["file_name"],a);const l=f(e,["inlinedRequests"]);return l!=null&&m(o,["requests"],rT(n,l)),o}function cT(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&m(e,["fileUri"],o);const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function dT(n,e,o){const a={},l=f(e,["systemInstruction"]);o!==void 0&&l!=null&&m(o,["systemInstruction"],M_(zn(l)));const d=f(e,["temperature"]);d!=null&&m(a,["temperature"],d);const h=f(e,["topP"]);h!=null&&m(a,["topP"],h);const v=f(e,["topK"]);v!=null&&m(a,["topK"],v);const y=f(e,["candidateCount"]);y!=null&&m(a,["candidateCount"],y);const _=f(e,["maxOutputTokens"]);_!=null&&m(a,["maxOutputTokens"],_);const x=f(e,["stopSequences"]);x!=null&&m(a,["stopSequences"],x);const E=f(e,["responseLogprobs"]);E!=null&&m(a,["responseLogprobs"],E);const M=f(e,["logprobs"]);M!=null&&m(a,["logprobs"],M);const R=f(e,["presencePenalty"]);R!=null&&m(a,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&m(a,["frequencyPenalty"],O);const P=f(e,["seed"]);P!=null&&m(a,["seed"],P);const H=f(e,["responseMimeType"]);H!=null&&m(a,["responseMimeType"],H);const I=f(e,["responseSchema"]);I!=null&&m(a,["responseSchema"],Zf(I));const q=f(e,["responseJsonSchema"]);if(q!=null&&m(a,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=f(e,["safetySettings"]);if(o!==void 0&&B!=null){let ne=B;Array.isArray(ne)&&(ne=ne.map(Pe=>wT(Pe))),m(o,["safetySettings"],ne)}const ee=f(e,["tools"]);if(o!==void 0&&ee!=null){let ne=Ka(ee);Array.isArray(ne)&&(ne=ne.map(Pe=>MT(Ja(Pe)))),m(o,["tools"],ne)}const j=f(e,["toolConfig"]);if(o!==void 0&&j!=null&&m(o,["toolConfig"],j),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=f(e,["cachedContent"]);o!==void 0&&X!=null&&m(o,["cachedContent"],Ao(n,X));const Y=f(e,["responseModalities"]);Y!=null&&m(a,["responseModalities"],Y);const oe=f(e,["mediaResolution"]);oe!=null&&m(a,["mediaResolution"],oe);const le=f(e,["speechConfig"]);if(le!=null&&m(a,["speechConfig"],Yf(le)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=f(e,["thinkingConfig"]);pe!=null&&m(a,["thinkingConfig"],pe);const me=f(e,["imageConfig"]);return me!=null&&m(a,["imageConfig"],me),a}function fT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>QS(_))),m(e,["candidates"],y)}const l=f(n,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const d=f(n,["promptFeedback"]);d!=null&&m(e,["promptFeedback"],d);const h=f(n,["responseId"]);h!=null&&m(e,["responseId"],h);const v=f(n,["usageMetadata"]);return v!=null&&m(e,["usageMetadata"],v),e}function hT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function mT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Xa(n,a)),o}function pT(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&m(e,["enableWidget"],o),e}function gT(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&m(e,["timeRangeFilter"],o),e}function vT(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["request","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let v=Ci(l);Array.isArray(v)&&(v=v.map(y=>M_(y))),m(o,["request","contents"],v)}const d=f(e,["metadata"]);d!=null&&m(o,["metadata"],d);const h=f(e,["config"]);return h!=null&&m(o,["request","generationConfig"],dT(n,h,f(o,["request"],{}))),o}function _T(n){const e={},o=f(n,["response"]);o!=null&&m(e,["response"],fT(o));const a=f(n,["error"]);return a!=null&&m(e,["error"],a),e}function yT(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);if(e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return o}function ST(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&m(e,["_query","pageToken"],l);const d=f(n,["filter"]);return e!==void 0&&d!=null&&m(e,["_query","filter"],d),o}function TT(n){const e={},o=f(n,["config"]);return o!=null&&yT(o,e),e}function xT(n){const e={},o=f(n,["config"]);return o!=null&&ST(o,e),e}function ET(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["operations"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>Vu(h))),m(e,["batchJobs"],d)}return e}function CT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["batchPredictionJobs"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>Af(h))),m(e,["batchJobs"],d)}return e}function AT(n){const e={},o=f(n,["functionCall"]);o!=null&&m(e,["functionCall"],o);const a=f(n,["codeExecutionResult"]);a!=null&&m(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&m(e,["executableCode"],l);const d=f(n,["fileData"]);d!=null&&m(e,["fileData"],cT(d));const h=f(n,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const v=f(n,["inlineData"]);v!=null&&m(e,["inlineData"],JS(v));const y=f(n,["text"]);y!=null&&m(e,["text"],y);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const x=f(n,["thoughtSignature"]);x!=null&&m(e,["thoughtSignature"],x);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function wT(n){const e={},o=f(n,["category"]);if(o!=null&&m(e,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=f(n,["threshold"]);return a!=null&&m(e,["threshold"],a),e}function MT(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["functionDeclarations"],x)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const d=f(n,["fileSearch"]);d!=null&&m(e,["fileSearch"],d);const h=f(n,["codeExecution"]);if(h!=null&&m(e,["codeExecution"],h),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const v=f(n,["googleMaps"]);v!=null&&m(e,["googleMaps"],pT(v));const y=f(n,["googleSearch"]);y!=null&&m(e,["googleSearch"],gT(y));const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Eo;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Eo||(Eo={}));class $s{constructor(e,o,a,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=o,this.init(e,a,l)}init(e,o,a){var l,d;this.nameInternal=e,this.pageInternal=o[this.nameInternal]||[],this.sdkHttpResponseInternal=o==null?void 0:o.sdkHttpResponse,this.idxInternal=0;let h={config:{}};!a||Object.keys(a).length===0?h={config:{}}:typeof a=="object"?h=Object.assign({},a):h=a,h.config&&(h.config.pageToken=o.nextPageToken),this.paramsInternal=h,this.pageInternalSize=(d=(l=h.config)===null||l===void 0?void 0:l.pageSize)!==null&&d!==void 0?d:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bT extends Co{constructor(e){super(),this.apiClient=e,this.create=async o=>(this.apiClient.isVertexAI()&&(o.config=this.formatDestination(o.src,o.config)),this.createInternal(o)),this.createEmbeddings=async o=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(o)},this.list=async(o={})=>new $s(Eo.PAGED_ITEM_BATCH_JOBS,a=>this.listInternal(a),await this.listInternal(o),o)}createInlinedGenerateContentRequest(e){const o=Cv(this.apiClient,e),a=o._url,l=xe("{model}:batchGenerateContent",a),v=o.batch.inputConfig.requests,y=v.requests,_=[];for(const x of y){const E=Object.assign({},x);if(E.systemInstruction){const M=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=M,E.request=R}_.push(E)}return v.requests=_,delete o.config,delete o._url,delete o._query,{path:l,body:o}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,o){const a=o?Object.assign({},o):{},l=Date.now().toString();if(a.displayName||(a.displayName=`genaiBatchJob_${l}`),a.dest===void 0){const d=this.getGcsUri(e),h=this.getBigqueryUri(e);if(d)d.endsWith(".jsonl")?a.dest=`${d.slice(0,-6)}/dest`:a.dest=`${d}_dest_${l}`;else if(h)a.dest=`${h}_dest_${l}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return a}async createInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=eT(this.apiClient,e);return v=xe("batchPredictionJobs",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>Af(x))}else{const _=Cv(this.apiClient,e);return v=xe("{model}:batchGenerateContent",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Vu(x))}}async createEmbeddingsInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=nT(this.apiClient,e);return d=xe("{model}:asyncBatchEmbedContent",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>Vu(y))}}async get(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=mT(this.apiClient,e);return v=xe("batchPredictionJobs/{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>Af(x))}else{const _=hT(this.apiClient,e);return v=xe("batches/{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>Vu(x))}}async cancel(e){var o,a,l,d;let h="",v={};if(this.apiClient.isVertexAI()){const y=XS(this.apiClient,e);h=xe("batchPredictionJobs/{name}:cancel",y._url),v=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:v,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=KS(this.apiClient,e);h=xe("batches/{name}:cancel",y._url),v=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:v,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal})}}async listInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=xT(e);return v=xe("batchPredictionJobs",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=CT(x),M=new Sv;return Object.assign(M,E),M})}else{const _=TT(e);return v=xe("batches",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=ET(x),M=new Sv;return Object.assign(M,E),M})}}async delete(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=oT(this.apiClient,e);return v=xe("batchPredictionJobs/{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>aT(x))}else{const _=iT(this.apiClient,e);return v=xe("batches/{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>sT(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RT(n){const e={},o=f(n,["data"]);if(o!=null&&m(e,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function Av(n){const e={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>QT(d))),m(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&m(e,["role"],a),e}function NT(n,e){const o={},a=f(n,["ttl"]);e!==void 0&&a!=null&&m(e,["ttl"],a);const l=f(n,["expireTime"]);e!==void 0&&l!=null&&m(e,["expireTime"],l);const d=f(n,["displayName"]);e!==void 0&&d!=null&&m(e,["displayName"],d);const h=f(n,["contents"]);if(e!==void 0&&h!=null){let x=Ci(h);Array.isArray(x)&&(x=x.map(E=>Av(E))),m(e,["contents"],x)}const v=f(n,["systemInstruction"]);e!==void 0&&v!=null&&m(e,["systemInstruction"],Av(zn(v)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let x=y;Array.isArray(x)&&(x=x.map(E=>WT(E))),m(e,["tools"],x)}const _=f(n,["toolConfig"]);if(e!==void 0&&_!=null&&m(e,["toolConfig"],_),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return o}function IT(n,e){const o={},a=f(n,["ttl"]);e!==void 0&&a!=null&&m(e,["ttl"],a);const l=f(n,["expireTime"]);e!==void 0&&l!=null&&m(e,["expireTime"],l);const d=f(n,["displayName"]);e!==void 0&&d!=null&&m(e,["displayName"],d);const h=f(n,["contents"]);if(e!==void 0&&h!=null){let E=Ci(h);Array.isArray(E)&&(E=E.map(M=>M)),m(e,["contents"],E)}const v=f(n,["systemInstruction"]);e!==void 0&&v!=null&&m(e,["systemInstruction"],zn(v));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let E=y;Array.isArray(E)&&(E=E.map(M=>$T(M))),m(e,["tools"],E)}const _=f(n,["toolConfig"]);e!==void 0&&_!=null&&m(e,["toolConfig"],_);const x=f(n,["kmsKeyName"]);return e!==void 0&&x!=null&&m(e,["encryption_spec","kmsKeyName"],x),o}function DT(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["model"],p_(n,a));const l=f(e,["config"]);return l!=null&&NT(l,o),o}function LT(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["model"],p_(n,a));const l=f(e,["config"]);return l!=null&&IT(l,o),o}function PT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Ao(n,a)),o}function UT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Ao(n,a)),o}function zT(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function kT(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function HT(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&m(e,["fileUri"],o);const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function OT(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["name"]);a!=null&&m(e,["name"],a);const l=f(n,["parameters"]);l!=null&&m(e,["parameters"],l);const d=f(n,["parametersJsonSchema"]);d!=null&&m(e,["parametersJsonSchema"],d);const h=f(n,["response"]);h!=null&&m(e,["response"],h);const v=f(n,["responseJsonSchema"]);return v!=null&&m(e,["responseJsonSchema"],v),e}function BT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Ao(n,a)),o}function qT(n,e){const o={},a=f(e,["name"]);return a!=null&&m(o,["_url","name"],Ao(n,a)),o}function GT(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&m(e,["enableWidget"],o),e}function VT(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&m(e,["timeRangeFilter"],o),e}function FT(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),o}function ZT(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),o}function YT(n){const e={},o=f(n,["config"]);return o!=null&&FT(o,e),e}function JT(n){const e={},o=f(n,["config"]);return o!=null&&ZT(o,e),e}function KT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["cachedContents"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["cachedContents"],d)}return e}function XT(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["cachedContents"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["cachedContents"],d)}return e}function QT(n){const e={},o=f(n,["functionCall"]);o!=null&&m(e,["functionCall"],o);const a=f(n,["codeExecutionResult"]);a!=null&&m(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&m(e,["executableCode"],l);const d=f(n,["fileData"]);d!=null&&m(e,["fileData"],HT(d));const h=f(n,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const v=f(n,["inlineData"]);v!=null&&m(e,["inlineData"],RT(v));const y=f(n,["text"]);y!=null&&m(e,["text"],y);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const x=f(n,["thoughtSignature"]);x!=null&&m(e,["thoughtSignature"],x);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function WT(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["functionDeclarations"],x)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const d=f(n,["fileSearch"]);d!=null&&m(e,["fileSearch"],d);const h=f(n,["codeExecution"]);if(h!=null&&m(e,["codeExecution"],h),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const v=f(n,["googleMaps"]);v!=null&&m(e,["googleMaps"],GT(v));const y=f(n,["googleSearch"]);y!=null&&m(e,["googleSearch"],VT(y));const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function $T(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(M=>OT(M))),m(e,["functionDeclarations"],E)}const a=f(n,["retrieval"]);a!=null&&m(e,["retrieval"],a);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const d=f(n,["computerUse"]);if(d!=null&&m(e,["computerUse"],d),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=f(n,["codeExecution"]);h!=null&&m(e,["codeExecution"],h);const v=f(n,["enterpriseWebSearch"]);v!=null&&m(e,["enterpriseWebSearch"],v);const y=f(n,["googleMaps"]);y!=null&&m(e,["googleMaps"],y);const _=f(n,["googleSearch"]);_!=null&&m(e,["googleSearch"],_);const x=f(n,["urlContext"]);return x!=null&&m(e,["urlContext"],x),e}function jT(n,e){const o={},a=f(n,["ttl"]);e!==void 0&&a!=null&&m(e,["ttl"],a);const l=f(n,["expireTime"]);return e!==void 0&&l!=null&&m(e,["expireTime"],l),o}function ex(n,e){const o={},a=f(n,["ttl"]);e!==void 0&&a!=null&&m(e,["ttl"],a);const l=f(n,["expireTime"]);return e!==void 0&&l!=null&&m(e,["expireTime"],l),o}function tx(n,e){const o={},a=f(e,["name"]);a!=null&&m(o,["_url","name"],Ao(n,a));const l=f(e,["config"]);return l!=null&&jT(l,o),o}function nx(n,e){const o={},a=f(e,["name"]);a!=null&&m(o,["_url","name"],Ao(n,a));const l=f(e,["config"]);return l!=null&&ex(l,o),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ix extends Co{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new $s(Eo.PAGED_ITEM_CACHED_CONTENTS,a=>this.listInternal(a),await this.listInternal(o),o)}async create(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=LT(this.apiClient,e);return v=xe("cachedContents",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const _=DT(this.apiClient,e);return v=xe("cachedContents",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async get(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=qT(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const _=BT(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async delete(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=UT(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=kT(x),M=new _v;return Object.assign(M,E),M})}else{const _=PT(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=zT(x),M=new _v;return Object.assign(M,E),M})}}async update(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=nx(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>x)}else{const _=tx(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>x)}}async listInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=JT(e);return v=xe("cachedContents",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=XT(x),M=new yv;return Object.assign(M,E),M})}else{const _=YT(e);return v=xe("cachedContents",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=KT(x),M=new yv;return Object.assign(M,E),M})}}}function wv(n){var e=typeof Symbol=="function"&&Symbol.iterator,o=e&&n[e],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ht(n){return this instanceof Ht?(this.v=n,this):new Ht(n)}function Ga(n,e,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o.apply(n,e||[]),l,d=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),v("next"),v("throw"),v("return",h),l[Symbol.asyncIterator]=function(){return this},l;function h(R){return function(O){return Promise.resolve(O).then(R,E)}}function v(R,O){a[R]&&(l[R]=function(P){return new Promise(function(H,I){d.push([R,P,H,I])>1||y(R,P)})},O&&(l[R]=O(l[R])))}function y(R,O){try{_(a[R](O))}catch(P){M(d[0][3],P)}}function _(R){R.value instanceof Ht?Promise.resolve(R.value.v).then(x,E):M(d[0][2],R)}function x(R){y("next",R)}function E(R){y("throw",R)}function M(R,O){R(O),d.shift(),d.length&&y(d[0][0],d[0][1])}}function ol(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],o;return e?e.call(n):(n=typeof wv=="function"?wv(n):n[Symbol.iterator](),o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o);function a(d){o[d]=n[d]&&function(h){return new Promise(function(v,y){h=n[d](h),l(v,y,h.done,h.value)})}}function l(d,h,v,y){Promise.resolve(y).then(function(_){d({value:_,done:v})},h)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ox(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const o=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return o===void 0?!1:b_(o)}function b_(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function sx(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Mv(n){if(n===void 0||n.length===0)return[];const e=[],o=n.length;let a=0;for(;a<o;)if(n[a].role==="user")e.push(n[a]),a++;else{const l=[];let d=!0;for(;a<o&&n[a].role==="model";)l.push(n[a]),d&&!b_(n[a])&&(d=!1),a++;d?e.push(...l):e.pop()}return e}class ax{constructor(e,o){this.modelsModule=e,this.apiClient=o}create(e){return new rx(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class rx{constructor(e,o,a,l={},d=[]){this.apiClient=e,this.modelsModule=o,this.model=a,this.config=l,this.history=d,this.sendPromise=Promise.resolve(),sx(d)}async sendMessage(e){var o;await this.sendPromise;const a=zn(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=e.config)!==null&&o!==void 0?o:this.config});return this.sendPromise=(async()=>{var d,h,v;const y=await l,_=(h=(d=y.candidates)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h.content,x=y.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let M=[];x!=null&&(M=(v=x.slice(E))!==null&&v!==void 0?v:[]);const R=_?[_]:[];this.recordHistory(a,R,M)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var o;await this.sendPromise;const a=zn(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(a),config:(o=e.config)!==null&&o!==void 0?o:this.config});this.sendPromise=l.then(()=>{}).catch(()=>{});const d=await l;return this.processStreamResponse(d,a)}getHistory(e=!1){const o=e?Mv(this.history):this.history;return structuredClone(o)}processStreamResponse(e,o){var a,l;return Ga(this,arguments,function*(){var h,v,y,_;const x=[];try{for(var E=!0,M=ol(e),R;R=yield Ht(M.next()),h=R.done,!h;E=!0){_=R.value,E=!1;const O=_;if(ox(O)){const P=(l=(a=O.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content;P!==void 0&&x.push(P)}yield yield Ht(O)}}catch(O){v={error:O}}finally{try{!E&&!h&&(y=M.return)&&(yield Ht(y.call(M)))}finally{if(v)throw v.error}}this.recordHistory(o,x)})}recordHistory(e,o,a){let l=[];o.length>0&&o.every(d=>d.role!==void 0)?l=o:l.push({role:"model",parts:[]}),a&&a.length>0?this.history.push(...Mv(a)):this.history.push(e),this.history.push(...l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ic extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ic.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lx(n){const e={},o=f(n,["file"]);return o!=null&&m(e,["file"],o),e}function ux(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function cx(n){const e={},o=f(n,["name"]);return o!=null&&m(e,["_url","file"],T_(o)),e}function dx(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function fx(n){const e={},o=f(n,["name"]);return o!=null&&m(e,["_url","file"],T_(o)),e}function hx(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),o}function mx(n){const e={},o=f(n,["config"]);return o!=null&&hx(o,e),e}function px(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["files"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["files"],d)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gx extends Co{constructor(e){super(),this.apiClient=e,this.list=async(o={})=>new $s(Eo.PAGED_ITEM_FILES,a=>this.listInternal(a),await this.listInternal(o),o)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(o=>o)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=mx(e);return d=xe("files",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const _=px(y),x=new MS;return Object.assign(x,_),x})}}async createInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=lx(e);return d=xe("upload/v1beta/files",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=ux(y),x=new bS;return Object.assign(x,_),x})}}async get(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=fx(e);return d=xe("files/{file}",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=cx(e);return d=xe("files/{file}",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const _=dx(y),x=new RS;return Object.assign(x,_),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fu(n){const e={},o=f(n,["data"]);if(o!=null&&m(e,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function vx(n){const e={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>Dx(d))),m(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&m(e,["role"],a),e}function _x(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&m(e,["fileUri"],o);const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function yx(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["name"]);a!=null&&m(e,["name"],a);const l=f(n,["parameters"]);l!=null&&m(e,["parameters"],l);const d=f(n,["parametersJsonSchema"]);d!=null&&m(e,["parametersJsonSchema"],d);const h=f(n,["response"]);h!=null&&m(e,["response"],h);const v=f(n,["responseJsonSchema"]);return v!=null&&m(e,["responseJsonSchema"],v),e}function Sx(n){const e={},o=f(n,["modelSelectionConfig"]);o!=null&&m(e,["modelConfig"],o);const a=f(n,["responseJsonSchema"]);a!=null&&m(e,["responseJsonSchema"],a);const l=f(n,["audioTimestamp"]);l!=null&&m(e,["audioTimestamp"],l);const d=f(n,["candidateCount"]);d!=null&&m(e,["candidateCount"],d);const h=f(n,["enableAffectiveDialog"]);h!=null&&m(e,["enableAffectiveDialog"],h);const v=f(n,["frequencyPenalty"]);v!=null&&m(e,["frequencyPenalty"],v);const y=f(n,["logprobs"]);y!=null&&m(e,["logprobs"],y);const _=f(n,["maxOutputTokens"]);_!=null&&m(e,["maxOutputTokens"],_);const x=f(n,["mediaResolution"]);x!=null&&m(e,["mediaResolution"],x);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const M=f(n,["responseLogprobs"]);M!=null&&m(e,["responseLogprobs"],M);const R=f(n,["responseMimeType"]);R!=null&&m(e,["responseMimeType"],R);const O=f(n,["responseModalities"]);O!=null&&m(e,["responseModalities"],O);const P=f(n,["responseSchema"]);P!=null&&m(e,["responseSchema"],P);const H=f(n,["routingConfig"]);H!=null&&m(e,["routingConfig"],H);const I=f(n,["seed"]);I!=null&&m(e,["seed"],I);const q=f(n,["speechConfig"]);q!=null&&m(e,["speechConfig"],R_(q));const B=f(n,["stopSequences"]);B!=null&&m(e,["stopSequences"],B);const ee=f(n,["temperature"]);ee!=null&&m(e,["temperature"],ee);const j=f(n,["thinkingConfig"]);j!=null&&m(e,["thinkingConfig"],j);const X=f(n,["topK"]);X!=null&&m(e,["topK"],X);const Y=f(n,["topP"]);if(Y!=null&&m(e,["topP"],Y),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Tx(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&m(e,["enableWidget"],o),e}function xx(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&m(e,["timeRangeFilter"],o),e}function Ex(n,e){const o={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig"],a);const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","responseModalities"],l);const d=f(n,["temperature"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","temperature"],d);const h=f(n,["topP"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topP"],h);const v=f(n,["topK"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","topK"],v);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const _=f(n,["mediaResolution"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","mediaResolution"],_);const x=f(n,["seed"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","seed"],x);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Jf(E));const M=f(n,["thinkingConfig"]);e!==void 0&&M!=null&&m(e,["setup","generationConfig","thinkingConfig"],M);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&m(e,["setup","systemInstruction"],vx(zn(O)));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let X=Ka(P);Array.isArray(X)&&(X=X.map(Y=>Px(Ja(Y)))),m(e,["setup","tools"],X)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],Lx(H));const I=f(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","inputAudioTranscription"],I);const q=f(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","outputAudioTranscription"],q);const B=f(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const j=f(n,["proactivity"]);return e!==void 0&&j!=null&&m(e,["setup","proactivity"],j),o}function Cx(n,e){const o={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig"],Sx(a));const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","responseModalities"],l);const d=f(n,["temperature"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","temperature"],d);const h=f(n,["topP"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topP"],h);const v=f(n,["topK"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","topK"],v);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const _=f(n,["mediaResolution"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","mediaResolution"],_);const x=f(n,["seed"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","seed"],x);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],R_(Jf(E)));const M=f(n,["thinkingConfig"]);e!==void 0&&M!=null&&m(e,["setup","generationConfig","thinkingConfig"],M);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&m(e,["setup","systemInstruction"],zn(O));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let X=Ka(P);Array.isArray(X)&&(X=X.map(Y=>Ux(Ja(Y)))),m(e,["setup","tools"],X)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],H);const I=f(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","inputAudioTranscription"],I);const q=f(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","outputAudioTranscription"],q);const B=f(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const j=f(n,["proactivity"]);return e!==void 0&&j!=null&&m(e,["setup","proactivity"],j),o}function Ax(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["setup","model"],yt(n,a));const l=f(e,["config"]);return l!=null&&m(o,["config"],Ex(l,o)),o}function wx(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["setup","model"],yt(n,a));const l=f(e,["config"]);return l!=null&&m(o,["config"],Cx(l,o)),o}function Mx(n){const e={},o=f(n,["musicGenerationConfig"]);return o!=null&&m(e,["musicGenerationConfig"],o),e}function bx(n){const e={},o=f(n,["weightedPrompts"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["weightedPrompts"],a)}return e}function Rx(n){const e={},o=f(n,["media"]);if(o!=null){let _=g_(o);Array.isArray(_)&&(_=_.map(x=>Fu(x))),m(e,["mediaChunks"],_)}const a=f(n,["audio"]);a!=null&&m(e,["audio"],Fu(__(a)));const l=f(n,["audioStreamEnd"]);l!=null&&m(e,["audioStreamEnd"],l);const d=f(n,["video"]);d!=null&&m(e,["video"],Fu(v_(d)));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const v=f(n,["activityStart"]);v!=null&&m(e,["activityStart"],v);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function Nx(n){const e={},o=f(n,["media"]);if(o!=null){let _=g_(o);Array.isArray(_)&&(_=_.map(x=>x)),m(e,["mediaChunks"],_)}const a=f(n,["audio"]);a!=null&&m(e,["audio"],__(a));const l=f(n,["audioStreamEnd"]);l!=null&&m(e,["audioStreamEnd"],l);const d=f(n,["video"]);d!=null&&m(e,["video"],v_(d));const h=f(n,["text"]);h!=null&&m(e,["text"],h);const v=f(n,["activityStart"]);v!=null&&m(e,["activityStart"],v);const y=f(n,["activityEnd"]);return y!=null&&m(e,["activityEnd"],y),e}function Ix(n){const e={},o=f(n,["setupComplete"]);o!=null&&m(e,["setupComplete"],o);const a=f(n,["serverContent"]);a!=null&&m(e,["serverContent"],a);const l=f(n,["toolCall"]);l!=null&&m(e,["toolCall"],l);const d=f(n,["toolCallCancellation"]);d!=null&&m(e,["toolCallCancellation"],d);const h=f(n,["usageMetadata"]);h!=null&&m(e,["usageMetadata"],zx(h));const v=f(n,["goAway"]);v!=null&&m(e,["goAway"],v);const y=f(n,["sessionResumptionUpdate"]);return y!=null&&m(e,["sessionResumptionUpdate"],y),e}function Dx(n){const e={},o=f(n,["functionCall"]);o!=null&&m(e,["functionCall"],o);const a=f(n,["codeExecutionResult"]);a!=null&&m(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&m(e,["executableCode"],l);const d=f(n,["fileData"]);d!=null&&m(e,["fileData"],_x(d));const h=f(n,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const v=f(n,["inlineData"]);v!=null&&m(e,["inlineData"],Fu(v));const y=f(n,["text"]);y!=null&&m(e,["text"],y);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const x=f(n,["thoughtSignature"]);x!=null&&m(e,["thoughtSignature"],x);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function Lx(n){const e={},o=f(n,["handle"]);if(o!=null&&m(e,["handle"],o),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function R_(n){const e={},o=f(n,["languageCode"]);o!=null&&m(e,["languageCode"],o);const a=f(n,["voiceConfig"]);if(a!=null&&m(e,["voiceConfig"],a),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Px(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["functionDeclarations"],x)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const d=f(n,["fileSearch"]);d!=null&&m(e,["fileSearch"],d);const h=f(n,["codeExecution"]);if(h!=null&&m(e,["codeExecution"],h),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const v=f(n,["googleMaps"]);v!=null&&m(e,["googleMaps"],Tx(v));const y=f(n,["googleSearch"]);y!=null&&m(e,["googleSearch"],xx(y));const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function Ux(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(M=>yx(M))),m(e,["functionDeclarations"],E)}const a=f(n,["retrieval"]);a!=null&&m(e,["retrieval"],a);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const d=f(n,["computerUse"]);if(d!=null&&m(e,["computerUse"],d),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=f(n,["codeExecution"]);h!=null&&m(e,["codeExecution"],h);const v=f(n,["enterpriseWebSearch"]);v!=null&&m(e,["enterpriseWebSearch"],v);const y=f(n,["googleMaps"]);y!=null&&m(e,["googleMaps"],y);const _=f(n,["googleSearch"]);_!=null&&m(e,["googleSearch"],_);const x=f(n,["urlContext"]);return x!=null&&m(e,["urlContext"],x),e}function zx(n){const e={},o=f(n,["promptTokenCount"]);o!=null&&m(e,["promptTokenCount"],o);const a=f(n,["cachedContentTokenCount"]);a!=null&&m(e,["cachedContentTokenCount"],a);const l=f(n,["candidatesTokenCount"]);l!=null&&m(e,["responseTokenCount"],l);const d=f(n,["toolUsePromptTokenCount"]);d!=null&&m(e,["toolUsePromptTokenCount"],d);const h=f(n,["thoughtsTokenCount"]);h!=null&&m(e,["thoughtsTokenCount"],h);const v=f(n,["totalTokenCount"]);v!=null&&m(e,["totalTokenCount"],v);const y=f(n,["promptTokensDetails"]);if(y!=null){let R=y;Array.isArray(R)&&(R=R.map(O=>O)),m(e,["promptTokensDetails"],R)}const _=f(n,["cacheTokensDetails"]);if(_!=null){let R=_;Array.isArray(R)&&(R=R.map(O=>O)),m(e,["cacheTokensDetails"],R)}const x=f(n,["candidatesTokensDetails"]);if(x!=null){let R=x;Array.isArray(R)&&(R=R.map(O=>O)),m(e,["responseTokensDetails"],R)}const E=f(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(O=>O)),m(e,["toolUsePromptTokensDetails"],R)}const M=f(n,["trafficType"]);return M!=null&&m(e,["trafficType"],M),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kx(n){const e={},o=f(n,["data"]);if(o!=null&&m(e,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function Hx(n){const e={},o=f(n,["content"]);o!=null&&m(e,["content"],o);const a=f(n,["citationMetadata"]);a!=null&&m(e,["citationMetadata"],Ox(a));const l=f(n,["tokenCount"]);l!=null&&m(e,["tokenCount"],l);const d=f(n,["finishReason"]);d!=null&&m(e,["finishReason"],d);const h=f(n,["avgLogprobs"]);h!=null&&m(e,["avgLogprobs"],h);const v=f(n,["groundingMetadata"]);v!=null&&m(e,["groundingMetadata"],v);const y=f(n,["index"]);y!=null&&m(e,["index"],y);const _=f(n,["logprobsResult"]);_!=null&&m(e,["logprobsResult"],_);const x=f(n,["safetyRatings"]);if(x!=null){let M=x;Array.isArray(M)&&(M=M.map(R=>R)),m(e,["safetyRatings"],M)}const E=f(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function Ox(n){const e={},o=f(n,["citationSources"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["citations"],a)}return e}function Bx(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let d=Ci(l);Array.isArray(d)&&(d=d.map(h=>h)),m(o,["contents"],d)}return o}function qx(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["tokensInfo"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>d)),m(e,["tokensInfo"],l)}return e}function Gx(n){const e={},o=f(n,["values"]);o!=null&&m(e,["values"],o);const a=f(n,["statistics"]);return a!=null&&m(e,["statistics"],Vx(a)),e}function Vx(n){const e={},o=f(n,["truncated"]);o!=null&&m(e,["truncated"],o);const a=f(n,["token_count"]);return a!=null&&m(e,["tokenCount"],a),e}function oc(n){const e={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>KE(d))),m(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&m(e,["role"],a),e}function Fx(n){const e={},o=f(n,["controlType"]);o!=null&&m(e,["controlType"],o);const a=f(n,["enableControlImageComputation"]);return a!=null&&m(e,["computeControl"],a),e}function Zx(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Yx(n,e){const o={},a=f(n,["systemInstruction"]);e!==void 0&&a!=null&&m(e,["systemInstruction"],zn(a));const l=f(n,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>P_(v))),m(e,["tools"],h)}const d=f(n,["generationConfig"]);return e!==void 0&&d!=null&&m(e,["generationConfig"],UE(d)),o}function Jx(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let h=Ci(l);Array.isArray(h)&&(h=h.map(v=>oc(v))),m(o,["contents"],h)}const d=f(e,["config"]);return d!=null&&Zx(d),o}function Kx(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let h=Ci(l);Array.isArray(h)&&(h=h.map(v=>v)),m(o,["contents"],h)}const d=f(e,["config"]);return d!=null&&Yx(d,o),o}function Xx(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["totalTokens"]);a!=null&&m(e,["totalTokens"],a);const l=f(n,["cachedContentTokenCount"]);return l!=null&&m(e,["cachedContentTokenCount"],l),e}function Qx(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["totalTokens"]);return a!=null&&m(e,["totalTokens"],a),e}function Wx(n,e){const o={},a=f(e,["model"]);return a!=null&&m(o,["_url","name"],yt(n,a)),o}function $x(n,e){const o={},a=f(e,["model"]);return a!=null&&m(o,["_url","name"],yt(n,a)),o}function jx(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function eE(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}function tE(n,e){const o={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const d=f(n,["numberOfImages"]);e!==void 0&&d!=null&&m(e,["parameters","sampleCount"],d);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const v=f(n,["guidanceScale"]);e!==void 0&&v!=null&&m(e,["parameters","guidanceScale"],v);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&m(e,["parameters","personGeneration"],x);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const M=f(n,["includeRaiReason"]);e!==void 0&&M!=null&&m(e,["parameters","includeRaiReason"],M);const R=f(n,["language"]);e!==void 0&&R!=null&&m(e,["parameters","language"],R);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&m(e,["parameters","outputOptions","mimeType"],O);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&m(e,["parameters","addWatermark"],H);const I=f(n,["labels"]);e!==void 0&&I!=null&&m(e,["labels"],I);const q=f(n,["editMode"]);e!==void 0&&q!=null&&m(e,["parameters","editMode"],q);const B=f(n,["baseSteps"]);return e!==void 0&&B!=null&&m(e,["parameters","editConfig","baseSteps"],B),o}function nE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const d=f(e,["referenceImages"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>eC(y))),m(o,["instances[0]","referenceImages"],v)}const h=f(e,["config"]);return h!=null&&tE(h,o),o}function iE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>sc(d))),m(e,["generatedImages"],l)}return e}function oE(n,e){const o={},a=f(n,["taskType"]);e!==void 0&&a!=null&&m(e,["requests[]","taskType"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&m(e,["requests[]","title"],l);const d=f(n,["outputDimensionality"]);if(e!==void 0&&d!=null&&m(e,["requests[]","outputDimensionality"],d),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function sE(n,e){const o={},a=f(n,["taskType"]);e!==void 0&&a!=null&&m(e,["instances[]","task_type"],a);const l=f(n,["title"]);e!==void 0&&l!=null&&m(e,["instances[]","title"],l);const d=f(n,["outputDimensionality"]);e!==void 0&&d!=null&&m(e,["parameters","outputDimensionality"],d);const h=f(n,["mimeType"]);e!==void 0&&h!=null&&m(e,["instances[]","mimeType"],h);const v=f(n,["autoTruncate"]);return e!==void 0&&v!=null&&m(e,["parameters","autoTruncate"],v),o}function aE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let v=Ff(n,l);Array.isArray(v)&&(v=v.map(y=>y)),m(o,["requests[]","content"],v)}const d=f(e,["config"]);d!=null&&oE(d,o);const h=f(e,["model"]);return h!==void 0&&m(o,["requests[]","model"],yt(n,h)),o}function rE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let h=Ff(n,l);Array.isArray(h)&&(h=h.map(v=>v)),m(o,["instances[]","content"],h)}const d=f(e,["config"]);return d!=null&&sE(d,o),o}function lE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["embeddings"],d)}const l=f(n,["metadata"]);return l!=null&&m(e,["metadata"],l),e}function uE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["predictions[]","embeddings"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>Gx(h))),m(e,["embeddings"],d)}const l=f(n,["metadata"]);return l!=null&&m(e,["metadata"],l),e}function cE(n){const e={},o=f(n,["endpoint"]);o!=null&&m(e,["name"],o);const a=f(n,["deployedModelId"]);return a!=null&&m(e,["deployedModelId"],a),e}function dE(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&m(e,["fileUri"],o);const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function fE(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const o=f(n,["description"]);o!=null&&m(e,["description"],o);const a=f(n,["name"]);a!=null&&m(e,["name"],a);const l=f(n,["parameters"]);l!=null&&m(e,["parameters"],l);const d=f(n,["parametersJsonSchema"]);d!=null&&m(e,["parametersJsonSchema"],d);const h=f(n,["response"]);h!=null&&m(e,["response"],h);const v=f(n,["responseJsonSchema"]);return v!=null&&m(e,["responseJsonSchema"],v),e}function hE(n,e,o){const a={},l=f(e,["systemInstruction"]);o!==void 0&&l!=null&&m(o,["systemInstruction"],oc(zn(l)));const d=f(e,["temperature"]);d!=null&&m(a,["temperature"],d);const h=f(e,["topP"]);h!=null&&m(a,["topP"],h);const v=f(e,["topK"]);v!=null&&m(a,["topK"],v);const y=f(e,["candidateCount"]);y!=null&&m(a,["candidateCount"],y);const _=f(e,["maxOutputTokens"]);_!=null&&m(a,["maxOutputTokens"],_);const x=f(e,["stopSequences"]);x!=null&&m(a,["stopSequences"],x);const E=f(e,["responseLogprobs"]);E!=null&&m(a,["responseLogprobs"],E);const M=f(e,["logprobs"]);M!=null&&m(a,["logprobs"],M);const R=f(e,["presencePenalty"]);R!=null&&m(a,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&m(a,["frequencyPenalty"],O);const P=f(e,["seed"]);P!=null&&m(a,["seed"],P);const H=f(e,["responseMimeType"]);H!=null&&m(a,["responseMimeType"],H);const I=f(e,["responseSchema"]);I!=null&&m(a,["responseSchema"],Zf(I));const q=f(e,["responseJsonSchema"]);if(q!=null&&m(a,["responseJsonSchema"],q),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const B=f(e,["safetySettings"]);if(o!==void 0&&B!=null){let ne=B;Array.isArray(ne)&&(ne=ne.map(Pe=>tC(Pe))),m(o,["safetySettings"],ne)}const ee=f(e,["tools"]);if(o!==void 0&&ee!=null){let ne=Ka(ee);Array.isArray(ne)&&(ne=ne.map(Pe=>rC(Ja(Pe)))),m(o,["tools"],ne)}const j=f(e,["toolConfig"]);if(o!==void 0&&j!=null&&m(o,["toolConfig"],j),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const X=f(e,["cachedContent"]);o!==void 0&&X!=null&&m(o,["cachedContent"],Ao(n,X));const Y=f(e,["responseModalities"]);Y!=null&&m(a,["responseModalities"],Y);const oe=f(e,["mediaResolution"]);oe!=null&&m(a,["mediaResolution"],oe);const le=f(e,["speechConfig"]);if(le!=null&&m(a,["speechConfig"],Yf(le)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pe=f(e,["thinkingConfig"]);pe!=null&&m(a,["thinkingConfig"],pe);const me=f(e,["imageConfig"]);return me!=null&&m(a,["imageConfig"],me),a}function mE(n,e,o){const a={},l=f(e,["systemInstruction"]);o!==void 0&&l!=null&&m(o,["systemInstruction"],zn(l));const d=f(e,["temperature"]);d!=null&&m(a,["temperature"],d);const h=f(e,["topP"]);h!=null&&m(a,["topP"],h);const v=f(e,["topK"]);v!=null&&m(a,["topK"],v);const y=f(e,["candidateCount"]);y!=null&&m(a,["candidateCount"],y);const _=f(e,["maxOutputTokens"]);_!=null&&m(a,["maxOutputTokens"],_);const x=f(e,["stopSequences"]);x!=null&&m(a,["stopSequences"],x);const E=f(e,["responseLogprobs"]);E!=null&&m(a,["responseLogprobs"],E);const M=f(e,["logprobs"]);M!=null&&m(a,["logprobs"],M);const R=f(e,["presencePenalty"]);R!=null&&m(a,["presencePenalty"],R);const O=f(e,["frequencyPenalty"]);O!=null&&m(a,["frequencyPenalty"],O);const P=f(e,["seed"]);P!=null&&m(a,["seed"],P);const H=f(e,["responseMimeType"]);H!=null&&m(a,["responseMimeType"],H);const I=f(e,["responseSchema"]);I!=null&&m(a,["responseSchema"],Zf(I));const q=f(e,["responseJsonSchema"]);q!=null&&m(a,["responseJsonSchema"],q);const B=f(e,["routingConfig"]);B!=null&&m(a,["routingConfig"],B);const ee=f(e,["modelSelectionConfig"]);ee!=null&&m(a,["modelConfig"],ee);const j=f(e,["safetySettings"]);if(o!==void 0&&j!=null){let Z=j;Array.isArray(Z)&&(Z=Z.map(ue=>ue)),m(o,["safetySettings"],Z)}const X=f(e,["tools"]);if(o!==void 0&&X!=null){let Z=Ka(X);Array.isArray(Z)&&(Z=Z.map(ue=>P_(Ja(ue)))),m(o,["tools"],Z)}const Y=f(e,["toolConfig"]);o!==void 0&&Y!=null&&m(o,["toolConfig"],Y);const oe=f(e,["labels"]);o!==void 0&&oe!=null&&m(o,["labels"],oe);const le=f(e,["cachedContent"]);o!==void 0&&le!=null&&m(o,["cachedContent"],Ao(n,le));const pe=f(e,["responseModalities"]);pe!=null&&m(a,["responseModalities"],pe);const me=f(e,["mediaResolution"]);me!=null&&m(a,["mediaResolution"],me);const ne=f(e,["speechConfig"]);ne!=null&&m(a,["speechConfig"],L_(Yf(ne)));const Pe=f(e,["audioTimestamp"]);Pe!=null&&m(a,["audioTimestamp"],Pe);const ve=f(e,["thinkingConfig"]);ve!=null&&m(a,["thinkingConfig"],ve);const Ge=f(e,["imageConfig"]);return Ge!=null&&m(a,["imageConfig"],Ge),a}function bv(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let h=Ci(l);Array.isArray(h)&&(h=h.map(v=>oc(v))),m(o,["contents"],h)}const d=f(e,["config"]);return d!=null&&m(o,["generationConfig"],hE(n,d,o)),o}function Rv(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["contents"]);if(l!=null){let h=Ci(l);Array.isArray(h)&&(h=h.map(v=>v)),m(o,["contents"],h)}const d=f(e,["config"]);return d!=null&&m(o,["generationConfig"],mE(n,d,o)),o}function Nv(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["candidates"]);if(a!=null){let y=a;Array.isArray(y)&&(y=y.map(_=>Hx(_))),m(e,["candidates"],y)}const l=f(n,["modelVersion"]);l!=null&&m(e,["modelVersion"],l);const d=f(n,["promptFeedback"]);d!=null&&m(e,["promptFeedback"],d);const h=f(n,["responseId"]);h!=null&&m(e,["responseId"],h);const v=f(n,["usageMetadata"]);return v!=null&&m(e,["usageMetadata"],v),e}function Iv(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["candidates"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(x=>x)),m(e,["candidates"],_)}const l=f(n,["createTime"]);l!=null&&m(e,["createTime"],l);const d=f(n,["modelVersion"]);d!=null&&m(e,["modelVersion"],d);const h=f(n,["promptFeedback"]);h!=null&&m(e,["promptFeedback"],h);const v=f(n,["responseId"]);v!=null&&m(e,["responseId"],v);const y=f(n,["usageMetadata"]);return y!=null&&m(e,["usageMetadata"],y),e}function pE(n,e){const o={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const d=f(n,["guidanceScale"]);if(e!==void 0&&d!=null&&m(e,["parameters","guidanceScale"],d),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&m(e,["parameters","includeSafetyAttributes"],y);const _=f(n,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const x=f(n,["language"]);e!==void 0&&x!=null&&m(e,["parameters","language"],x);const E=f(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const M=f(n,["outputCompressionQuality"]);if(e!==void 0&&M!=null&&m(e,["parameters","outputOptions","compressionQuality"],M),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&m(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function gE(n,e){const o={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(n,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const d=f(n,["numberOfImages"]);e!==void 0&&d!=null&&m(e,["parameters","sampleCount"],d);const h=f(n,["aspectRatio"]);e!==void 0&&h!=null&&m(e,["parameters","aspectRatio"],h);const v=f(n,["guidanceScale"]);e!==void 0&&v!=null&&m(e,["parameters","guidanceScale"],v);const y=f(n,["seed"]);e!==void 0&&y!=null&&m(e,["parameters","seed"],y);const _=f(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&m(e,["parameters","personGeneration"],x);const E=f(n,["includeSafetyAttributes"]);e!==void 0&&E!=null&&m(e,["parameters","includeSafetyAttributes"],E);const M=f(n,["includeRaiReason"]);e!==void 0&&M!=null&&m(e,["parameters","includeRaiReason"],M);const R=f(n,["language"]);e!==void 0&&R!=null&&m(e,["parameters","language"],R);const O=f(n,["outputMimeType"]);e!==void 0&&O!=null&&m(e,["parameters","outputOptions","mimeType"],O);const P=f(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const H=f(n,["addWatermark"]);e!==void 0&&H!=null&&m(e,["parameters","addWatermark"],H);const I=f(n,["labels"]);e!==void 0&&I!=null&&m(e,["labels"],I);const q=f(n,["imageSize"]);e!==void 0&&q!=null&&m(e,["parameters","sampleImageSize"],q);const B=f(n,["enhancePrompt"]);return e!==void 0&&B!=null&&m(e,["parameters","enhancePrompt"],B),o}function vE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const d=f(e,["config"]);return d!=null&&pE(d,o),o}function _E(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const d=f(e,["config"]);return d!=null&&gE(d,o),o}function yE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>IE(h))),m(e,["generatedImages"],d)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&m(e,["positivePromptSafetyAttributes"],I_(l)),e}function SE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["predictions"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>sc(h))),m(e,["generatedImages"],d)}const l=f(n,["positivePromptSafetyAttributes"]);return l!=null&&m(e,["positivePromptSafetyAttributes"],D_(l)),e}function TE(n,e){const o={},a=f(n,["numberOfVideos"]);if(e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=f(n,["durationSeconds"]);if(e!==void 0&&l!=null&&m(e,["parameters","durationSeconds"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=f(n,["aspectRatio"]);e!==void 0&&d!=null&&m(e,["parameters","aspectRatio"],d);const h=f(n,["resolution"]);e!==void 0&&h!=null&&m(e,["parameters","resolution"],h);const v=f(n,["personGeneration"]);if(e!==void 0&&v!=null&&m(e,["parameters","personGeneration"],v),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&m(e,["parameters","negativePrompt"],y);const _=f(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const x=f(n,["lastFrame"]);e!==void 0&&x!=null&&m(e,["instances[0]","lastFrame"],ac(x));const E=f(n,["referenceImages"]);if(e!==void 0&&E!=null){let M=E;Array.isArray(M)&&(M=M.map(R=>SC(R))),m(e,["instances[0]","referenceImages"],M)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function xE(n,e){const o={},a=f(n,["numberOfVideos"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const d=f(n,["fps"]);e!==void 0&&d!=null&&m(e,["parameters","fps"],d);const h=f(n,["durationSeconds"]);e!==void 0&&h!=null&&m(e,["parameters","durationSeconds"],h);const v=f(n,["seed"]);e!==void 0&&v!=null&&m(e,["parameters","seed"],v);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&m(e,["parameters","aspectRatio"],y);const _=f(n,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const x=f(n,["personGeneration"]);e!==void 0&&x!=null&&m(e,["parameters","personGeneration"],x);const E=f(n,["pubsubTopic"]);e!==void 0&&E!=null&&m(e,["parameters","pubsubTopic"],E);const M=f(n,["negativePrompt"]);e!==void 0&&M!=null&&m(e,["parameters","negativePrompt"],M);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&m(e,["parameters","enhancePrompt"],R);const O=f(n,["generateAudio"]);e!==void 0&&O!=null&&m(e,["parameters","generateAudio"],O);const P=f(n,["lastFrame"]);e!==void 0&&P!=null&&m(e,["instances[0]","lastFrame"],zi(P));const H=f(n,["referenceImages"]);if(e!==void 0&&H!=null){let B=H;Array.isArray(B)&&(B=B.map(ee=>TC(ee))),m(e,["instances[0]","referenceImages"],B)}const I=f(n,["mask"]);e!==void 0&&I!=null&&m(e,["instances[0]","mask"],yC(I));const q=f(n,["compressionQuality"]);return e!==void 0&&q!=null&&m(e,["parameters","compressionQuality"],q),o}function EE(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response","generateVideoResponse"]);return h!=null&&m(e,["response"],ME(h)),e}function CE(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response"]);return h!=null&&m(e,["response"],bE(h)),e}function AE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const d=f(e,["image"]);d!=null&&m(o,["instances[0]","image"],ac(d));const h=f(e,["video"]);h!=null&&m(o,["instances[0]","video"],U_(h));const v=f(e,["source"]);v!=null&&RE(v,o);const y=f(e,["config"]);return y!=null&&TE(y,o),o}function wE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["prompt"]);l!=null&&m(o,["instances[0]","prompt"],l);const d=f(e,["image"]);d!=null&&m(o,["instances[0]","image"],zi(d));const h=f(e,["video"]);h!=null&&m(o,["instances[0]","video"],z_(h));const v=f(e,["source"]);v!=null&&NE(v,o);const y=f(e,["config"]);return y!=null&&xE(y,o),o}function ME(n){const e={},o=f(n,["generatedSamples"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>LE(h))),m(e,["generatedVideos"],d)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&m(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&m(e,["raiMediaFilteredReasons"],l),e}function bE(n){const e={},o=f(n,["videos"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(h=>PE(h))),m(e,["generatedVideos"],d)}const a=f(n,["raiMediaFilteredCount"]);a!=null&&m(e,["raiMediaFilteredCount"],a);const l=f(n,["raiMediaFilteredReasons"]);return l!=null&&m(e,["raiMediaFilteredReasons"],l),e}function RE(n,e){const o={},a=f(n,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],ac(l));const d=f(n,["video"]);return e!==void 0&&d!=null&&m(e,["instances[0]","video"],U_(d)),o}function NE(n,e){const o={},a=f(n,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],zi(l));const d=f(n,["video"]);return e!==void 0&&d!=null&&m(e,["instances[0]","video"],z_(d)),o}function IE(n){const e={},o=f(n,["_self"]);o!=null&&m(e,["image"],BE(o));const a=f(n,["raiFilteredReason"]);a!=null&&m(e,["raiFilteredReason"],a);const l=f(n,["_self"]);return l!=null&&m(e,["safetyAttributes"],I_(l)),e}function sc(n){const e={},o=f(n,["_self"]);o!=null&&m(e,["image"],N_(o));const a=f(n,["raiFilteredReason"]);a!=null&&m(e,["raiFilteredReason"],a);const l=f(n,["_self"]);l!=null&&m(e,["safetyAttributes"],D_(l));const d=f(n,["prompt"]);return d!=null&&m(e,["enhancedPrompt"],d),e}function DE(n){const e={},o=f(n,["_self"]);o!=null&&m(e,["mask"],N_(o));const a=f(n,["labels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>d)),m(e,["labels"],l)}return e}function LE(n){const e={},o=f(n,["video"]);return o!=null&&m(e,["video"],vC(o)),e}function PE(n){const e={},o=f(n,["_self"]);return o!=null&&m(e,["video"],_C(o)),e}function UE(n){const e={},o=f(n,["modelSelectionConfig"]);o!=null&&m(e,["modelConfig"],o);const a=f(n,["responseJsonSchema"]);a!=null&&m(e,["responseJsonSchema"],a);const l=f(n,["audioTimestamp"]);l!=null&&m(e,["audioTimestamp"],l);const d=f(n,["candidateCount"]);d!=null&&m(e,["candidateCount"],d);const h=f(n,["enableAffectiveDialog"]);h!=null&&m(e,["enableAffectiveDialog"],h);const v=f(n,["frequencyPenalty"]);v!=null&&m(e,["frequencyPenalty"],v);const y=f(n,["logprobs"]);y!=null&&m(e,["logprobs"],y);const _=f(n,["maxOutputTokens"]);_!=null&&m(e,["maxOutputTokens"],_);const x=f(n,["mediaResolution"]);x!=null&&m(e,["mediaResolution"],x);const E=f(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const M=f(n,["responseLogprobs"]);M!=null&&m(e,["responseLogprobs"],M);const R=f(n,["responseMimeType"]);R!=null&&m(e,["responseMimeType"],R);const O=f(n,["responseModalities"]);O!=null&&m(e,["responseModalities"],O);const P=f(n,["responseSchema"]);P!=null&&m(e,["responseSchema"],P);const H=f(n,["routingConfig"]);H!=null&&m(e,["routingConfig"],H);const I=f(n,["seed"]);I!=null&&m(e,["seed"],I);const q=f(n,["speechConfig"]);q!=null&&m(e,["speechConfig"],L_(q));const B=f(n,["stopSequences"]);B!=null&&m(e,["stopSequences"],B);const ee=f(n,["temperature"]);ee!=null&&m(e,["temperature"],ee);const j=f(n,["thinkingConfig"]);j!=null&&m(e,["thinkingConfig"],j);const X=f(n,["topK"]);X!=null&&m(e,["topK"],X);const Y=f(n,["topP"]);if(Y!=null&&m(e,["topP"],Y),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function zE(n,e){const o={},a=f(e,["model"]);return a!=null&&m(o,["_url","name"],yt(n,a)),o}function kE(n,e){const o={},a=f(e,["model"]);return a!=null&&m(o,["_url","name"],yt(n,a)),o}function HE(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&m(e,["enableWidget"],o),e}function OE(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&m(e,["timeRangeFilter"],o),e}function BE(n){const e={},o=f(n,["bytesBase64Encoded"]);o!=null&&m(e,["imageBytes"],ms(o));const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function N_(n){const e={},o=f(n,["gcsUri"]);o!=null&&m(e,["gcsUri"],o);const a=f(n,["bytesBase64Encoded"]);a!=null&&m(e,["imageBytes"],ms(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function ac(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=f(n,["imageBytes"]);o!=null&&m(e,["bytesBase64Encoded"],ms(o));const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function zi(n){const e={},o=f(n,["gcsUri"]);o!=null&&m(e,["gcsUri"],o);const a=f(n,["imageBytes"]);a!=null&&m(e,["bytesBase64Encoded"],ms(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function qE(n,e,o){const a={},l=f(e,["pageSize"]);o!==void 0&&l!=null&&m(o,["_query","pageSize"],l);const d=f(e,["pageToken"]);o!==void 0&&d!=null&&m(o,["_query","pageToken"],d);const h=f(e,["filter"]);o!==void 0&&h!=null&&m(o,["_query","filter"],h);const v=f(e,["queryBase"]);return o!==void 0&&v!=null&&m(o,["_url","models_url"],x_(n,v)),a}function GE(n,e,o){const a={},l=f(e,["pageSize"]);o!==void 0&&l!=null&&m(o,["_query","pageSize"],l);const d=f(e,["pageToken"]);o!==void 0&&d!=null&&m(o,["_query","pageToken"],d);const h=f(e,["filter"]);o!==void 0&&h!=null&&m(o,["_query","filter"],h);const v=f(e,["queryBase"]);return o!==void 0&&v!=null&&m(o,["_url","models_url"],x_(n,v)),a}function VE(n,e){const o={},a=f(e,["config"]);return a!=null&&qE(n,a,o),o}function FE(n,e){const o={},a=f(e,["config"]);return a!=null&&GE(n,a,o),o}function ZE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["_self"]);if(l!=null){let d=E_(l);Array.isArray(d)&&(d=d.map(h=>wf(h))),m(e,["models"],d)}return e}function YE(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["_self"]);if(l!=null){let d=E_(l);Array.isArray(d)&&(d=d.map(h=>Mf(h))),m(e,["models"],d)}return e}function JE(n){const e={},o=f(n,["maskMode"]);o!=null&&m(e,["maskMode"],o);const a=f(n,["segmentationClasses"]);a!=null&&m(e,["maskClasses"],a);const l=f(n,["maskDilation"]);return l!=null&&m(e,["dilation"],l),e}function wf(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["displayName"]);a!=null&&m(e,["displayName"],a);const l=f(n,["description"]);l!=null&&m(e,["description"],l);const d=f(n,["version"]);d!=null&&m(e,["version"],d);const h=f(n,["_self"]);h!=null&&m(e,["tunedModelInfo"],lC(h));const v=f(n,["inputTokenLimit"]);v!=null&&m(e,["inputTokenLimit"],v);const y=f(n,["outputTokenLimit"]);y!=null&&m(e,["outputTokenLimit"],y);const _=f(n,["supportedGenerationMethods"]);return _!=null&&m(e,["supportedActions"],_),e}function Mf(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["displayName"]);a!=null&&m(e,["displayName"],a);const l=f(n,["description"]);l!=null&&m(e,["description"],l);const d=f(n,["versionId"]);d!=null&&m(e,["version"],d);const h=f(n,["deployedModels"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(M=>cE(M))),m(e,["endpoints"],E)}const v=f(n,["labels"]);v!=null&&m(e,["labels"],v);const y=f(n,["_self"]);y!=null&&m(e,["tunedModelInfo"],uC(y));const _=f(n,["defaultCheckpointId"]);_!=null&&m(e,["defaultCheckpointId"],_);const x=f(n,["checkpoints"]);if(x!=null){let E=x;Array.isArray(E)&&(E=E.map(M=>M)),m(e,["checkpoints"],E)}return e}function KE(n){const e={},o=f(n,["functionCall"]);o!=null&&m(e,["functionCall"],o);const a=f(n,["codeExecutionResult"]);a!=null&&m(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&m(e,["executableCode"],l);const d=f(n,["fileData"]);d!=null&&m(e,["fileData"],dE(d));const h=f(n,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const v=f(n,["inlineData"]);v!=null&&m(e,["inlineData"],kx(v));const y=f(n,["text"]);y!=null&&m(e,["text"],y);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const x=f(n,["thoughtSignature"]);x!=null&&m(e,["thoughtSignature"],x);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function XE(n){const e={},o=f(n,["productImage"]);return o!=null&&m(e,["image"],zi(o)),e}function QE(n,e){const o={},a=f(n,["numberOfImages"]);e!==void 0&&a!=null&&m(e,["parameters","sampleCount"],a);const l=f(n,["baseSteps"]);e!==void 0&&l!=null&&m(e,["parameters","editConfig","baseSteps"],l);const d=f(n,["outputGcsUri"]);e!==void 0&&d!=null&&m(e,["parameters","storageUri"],d);const h=f(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const v=f(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&m(e,["parameters","safetySetting"],v);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&m(e,["parameters","personGeneration"],y);const _=f(n,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const x=f(n,["outputMimeType"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","mimeType"],x);const E=f(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","compressionQuality"],E);const M=f(n,["enhancePrompt"]);e!==void 0&&M!=null&&m(e,["parameters","enhancePrompt"],M);const R=f(n,["labels"]);return e!==void 0&&R!=null&&m(e,["labels"],R),o}function WE(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["source"]);l!=null&&jE(l,o);const d=f(e,["config"]);return d!=null&&QE(d,o),o}function $E(n){const e={},o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>sc(l))),m(e,["generatedImages"],a)}return e}function jE(n,e){const o={},a=f(n,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(n,["personImage"]);e!==void 0&&l!=null&&m(e,["instances[0]","personImage","image"],zi(l));const d=f(n,["productImages"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>XE(v))),m(e,["instances[0]","productImages"],h)}return o}function eC(n){const e={},o=f(n,["referenceImage"]);o!=null&&m(e,["referenceImage"],zi(o));const a=f(n,["referenceId"]);a!=null&&m(e,["referenceId"],a);const l=f(n,["referenceType"]);l!=null&&m(e,["referenceType"],l);const d=f(n,["maskImageConfig"]);d!=null&&m(e,["maskImageConfig"],JE(d));const h=f(n,["controlImageConfig"]);h!=null&&m(e,["controlImageConfig"],Fx(h));const v=f(n,["styleImageConfig"]);v!=null&&m(e,["styleImageConfig"],v);const y=f(n,["subjectImageConfig"]);return y!=null&&m(e,["subjectImageConfig"],y),e}function I_(n){const e={},o=f(n,["safetyAttributes","categories"]);o!=null&&m(e,["categories"],o);const a=f(n,["safetyAttributes","scores"]);a!=null&&m(e,["scores"],a);const l=f(n,["contentType"]);return l!=null&&m(e,["contentType"],l),e}function D_(n){const e={},o=f(n,["safetyAttributes","categories"]);o!=null&&m(e,["categories"],o);const a=f(n,["safetyAttributes","scores"]);a!=null&&m(e,["scores"],a);const l=f(n,["contentType"]);return l!=null&&m(e,["contentType"],l),e}function tC(n){const e={},o=f(n,["category"]);if(o!=null&&m(e,["category"],o),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const a=f(n,["threshold"]);return a!=null&&m(e,["threshold"],a),e}function nC(n){const e={},o=f(n,["image"]);return o!=null&&m(e,["image"],zi(o)),e}function iC(n,e){const o={},a=f(n,["mode"]);e!==void 0&&a!=null&&m(e,["parameters","mode"],a);const l=f(n,["maxPredictions"]);e!==void 0&&l!=null&&m(e,["parameters","maxPredictions"],l);const d=f(n,["confidenceThreshold"]);e!==void 0&&d!=null&&m(e,["parameters","confidenceThreshold"],d);const h=f(n,["maskDilation"]);e!==void 0&&h!=null&&m(e,["parameters","maskDilation"],h);const v=f(n,["binaryColorThreshold"]);e!==void 0&&v!=null&&m(e,["parameters","binaryColorThreshold"],v);const y=f(n,["labels"]);return e!==void 0&&y!=null&&m(e,["labels"],y),o}function oC(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["source"]);l!=null&&aC(l,o);const d=f(e,["config"]);return d!=null&&iC(d,o),o}function sC(n){const e={},o=f(n,["predictions"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>DE(l))),m(e,["generatedMasks"],a)}return e}function aC(n,e){const o={},a=f(n,["prompt"]);e!==void 0&&a!=null&&m(e,["instances[0]","prompt"],a);const l=f(n,["image"]);e!==void 0&&l!=null&&m(e,["instances[0]","image"],zi(l));const d=f(n,["scribbleImage"]);return e!==void 0&&d!=null&&m(e,["instances[0]","scribble"],nC(d)),o}function L_(n){const e={},o=f(n,["languageCode"]);o!=null&&m(e,["languageCode"],o);const a=f(n,["voiceConfig"]);if(a!=null&&m(e,["voiceConfig"],a),f(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function rC(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["functionDeclarations"],x)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const d=f(n,["fileSearch"]);d!=null&&m(e,["fileSearch"],d);const h=f(n,["codeExecution"]);if(h!=null&&m(e,["codeExecution"],h),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const v=f(n,["googleMaps"]);v!=null&&m(e,["googleMaps"],HE(v));const y=f(n,["googleSearch"]);y!=null&&m(e,["googleSearch"],OE(y));const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function P_(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let E=o;Array.isArray(E)&&(E=E.map(M=>fE(M))),m(e,["functionDeclarations"],E)}const a=f(n,["retrieval"]);a!=null&&m(e,["retrieval"],a);const l=f(n,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const d=f(n,["computerUse"]);if(d!=null&&m(e,["computerUse"],d),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const h=f(n,["codeExecution"]);h!=null&&m(e,["codeExecution"],h);const v=f(n,["enterpriseWebSearch"]);v!=null&&m(e,["enterpriseWebSearch"],v);const y=f(n,["googleMaps"]);y!=null&&m(e,["googleMaps"],y);const _=f(n,["googleSearch"]);_!=null&&m(e,["googleSearch"],_);const x=f(n,["urlContext"]);return x!=null&&m(e,["urlContext"],x),e}function lC(n){const e={},o=f(n,["baseModel"]);o!=null&&m(e,["baseModel"],o);const a=f(n,["createTime"]);a!=null&&m(e,["createTime"],a);const l=f(n,["updateTime"]);return l!=null&&m(e,["updateTime"],l),e}function uC(n){const e={},o=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&m(e,["baseModel"],o);const a=f(n,["createTime"]);a!=null&&m(e,["createTime"],a);const l=f(n,["updateTime"]);return l!=null&&m(e,["updateTime"],l),e}function cC(n,e){const o={},a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const d=f(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&m(e,["defaultCheckpointId"],d),o}function dC(n,e){const o={},a=f(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=f(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);const d=f(n,["defaultCheckpointId"]);return e!==void 0&&d!=null&&m(e,["defaultCheckpointId"],d),o}function fC(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","name"],yt(n,a));const l=f(e,["config"]);return l!=null&&cC(l,o),o}function hC(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["config"]);return l!=null&&dC(l,o),o}function mC(n,e){const o={},a=f(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=f(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&m(e,["parameters","safetySetting"],l);const d=f(n,["personGeneration"]);e!==void 0&&d!=null&&m(e,["parameters","personGeneration"],d);const h=f(n,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&m(e,["parameters","outputOptions","mimeType"],v);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","compressionQuality"],y);const _=f(n,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const x=f(n,["imagePreservationFactor"]);e!==void 0&&x!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],x);const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const M=f(n,["numberOfImages"]);e!==void 0&&M!=null&&m(e,["parameters","sampleCount"],M);const R=f(n,["mode"]);return e!==void 0&&R!=null&&m(e,["parameters","mode"],R),o}function pC(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["_url","model"],yt(n,a));const l=f(e,["image"]);l!=null&&m(o,["instances[0]","image"],zi(l));const d=f(e,["upscaleFactor"]);d!=null&&m(o,["parameters","upscaleConfig","upscaleFactor"],d);const h=f(e,["config"]);return h!=null&&mC(h,o),o}function gC(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["predictions"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>sc(d))),m(e,["generatedImages"],l)}return e}function vC(n){const e={},o=f(n,["uri"]);o!=null&&m(e,["uri"],o);const a=f(n,["encodedVideo"]);a!=null&&m(e,["videoBytes"],ms(a));const l=f(n,["encoding"]);return l!=null&&m(e,["mimeType"],l),e}function _C(n){const e={},o=f(n,["gcsUri"]);o!=null&&m(e,["uri"],o);const a=f(n,["bytesBase64Encoded"]);a!=null&&m(e,["videoBytes"],ms(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}function yC(n){const e={},o=f(n,["image"]);o!=null&&m(e,["_self"],zi(o));const a=f(n,["maskMode"]);return a!=null&&m(e,["maskMode"],a),e}function SC(n){const e={},o=f(n,["image"]);o!=null&&m(e,["image"],ac(o));const a=f(n,["referenceType"]);return a!=null&&m(e,["referenceType"],a),e}function TC(n){const e={},o=f(n,["image"]);o!=null&&m(e,["image"],zi(o));const a=f(n,["referenceType"]);return a!=null&&m(e,["referenceType"],a),e}function U_(n){const e={},o=f(n,["uri"]);o!=null&&m(e,["uri"],o);const a=f(n,["videoBytes"]);a!=null&&m(e,["encodedVideo"],ms(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["encoding"],l),e}function z_(n){const e={},o=f(n,["uri"]);o!=null&&m(e,["gcsUri"],o);const a=f(n,["videoBytes"]);a!=null&&m(e,["bytesBase64Encoded"],ms(a));const l=f(n,["mimeType"]);return l!=null&&m(e,["mimeType"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xC="Content-Type",EC="X-Server-Timeout",CC="User-Agent",bf="x-goog-api-client",AC="1.29.0",wC=`google-genai-sdk/${AC}`,MC="v1beta1",bC="v1beta",Dv=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class RC{constructor(e){var o,a;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const l={};this.clientOptions.vertexai?(l.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:MC,l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=(a=this.clientOptions.apiVersion)!==null&&a!==void 0?a:bC,l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const a=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&a.push(e.apiVersion),a.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),o=new URL(e);return o.protocol=o.protocol=="http:"?"ws":"wss",o.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,o,a){const l=[this.getRequestUrlInternal(o)];return a&&l.push(this.getBaseResourcePath()),e!==""&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,o,a);if(e.queryParams)for(const[h,v]of Object.entries(e.queryParams))l.searchParams.append(h,String(v));let d={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else d.body=e.body;return d=await this.includeExtraHttpOptionsToRequestInit(d,o,l.toString(),e.abortSignal),this.unaryApiCall(l,d,e.httpMethod)}patchHttpOptions(e,o){const a=JSON.parse(JSON.stringify(e));for(const[l,d]of Object.entries(o))typeof d=="object"?a[l]=Object.assign(Object.assign({},a[l]),d):d!==void 0&&(a[l]=d);return a}async requestStream(e){let o=this.clientOptions.httpOptions;e.httpOptions&&(o=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const a=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,o,a);(!l.searchParams.has("alt")||l.searchParams.get("alt")!=="sse")&&l.searchParams.set("alt","sse");let d={};return d.body=e.body,d=await this.includeExtraHttpOptionsToRequestInit(d,o,l.toString(),e.abortSignal),this.streamApiCall(l,d,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,o,a,l){if(o&&o.timeout||l){const d=new AbortController,h=d.signal;if(o.timeout&&(o==null?void 0:o.timeout)>0){const v=setTimeout(()=>d.abort(),o.timeout);v&&typeof v.unref=="function"&&v.unref()}l&&l.addEventListener("abort",()=>{d.abort()}),e.signal=h}return o&&o.extraBody!==null&&NC(e,o.extraBody),e.headers=await this.getHeadersInternal(o,a),e}async unaryApiCall(e,o,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:a})).then(async l=>(await Lv(l),new Ef(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}async streamApiCall(e,o,a){return this.apiCall(e.toString(),Object.assign(Object.assign({},o),{method:a})).then(async l=>(await Lv(l),this.processStreamResponse(l))).catch(l=>{throw l instanceof Error?l:new Error(JSON.stringify(l))})}processStreamResponse(e){var o;return Ga(this,arguments,function*(){const l=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),d=new TextDecoder("utf-8");if(!l)throw new Error("Response body is empty");try{let h="";for(;;){const{done:v,value:y}=yield Ht(l.read());if(v){if(h.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const _=d.decode(y,{stream:!0});try{const E=JSON.parse(_);if("error"in E){const M=JSON.parse(JSON.stringify(E.error)),R=M.status,O=M.code,P=`got status: ${R}. ${JSON.stringify(E)}`;if(O>=400&&O<600)throw new ic({message:P,status:O})}}catch(E){if(E.name==="ApiError")throw E}h+=_;let x=h.match(Dv);for(;x;){const E=x[1];try{const M=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ht(new Ef(M)),h=h.slice(x[0].length),x=h.match(Dv)}catch(M){throw new Error(`exception parsing stream chunk ${E}. ${M}`)}}}}finally{l.releaseLock()}})}async apiCall(e,o){return fetch(e,o).catch(a=>{throw new Error(`exception ${a} sending request`)})}getDefaultHeaders(){const e={},o=wC+" "+this.clientOptions.userAgentExtra;return e[CC]=o,e[bf]=o,e[xC]="application/json",e}async getHeadersInternal(e,o){const a=new Headers;if(e&&e.headers){for(const[l,d]of Object.entries(e.headers))a.append(l,d);e.timeout&&e.timeout>0&&a.append(EC,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(a,o),a}getFileName(e){var o;let a="";return typeof e=="string"&&(a=e.replace(/[/\\]+$/,""),a=(o=a.split(/[/\\]/).pop())!==null&&o!==void 0?o:""),a}async uploadFile(e,o){var a;const l={};o!=null&&(l.mimeType=o.mimeType,l.name=o.name,l.displayName=o.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);const d=this.clientOptions.uploader,h=await d.stat(e);l.sizeBytes=String(h.size);const v=(a=o==null?void 0:o.mimeType)!==null&&a!==void 0?a:h.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=v;const y={file:l},_=this.getFileName(e),x=xe("upload/v1beta/files",y._url),E=await this.fetchUploadUrl(x,l.sizeBytes,l.mimeType,_,y,o==null?void 0:o.httpOptions);return d.upload(e,E,this)}async uploadFileToFileSearchStore(e,o,a){var l;const d=this.clientOptions.uploader,h=await d.stat(o),v=String(h.size),y=(l=a==null?void 0:a.mimeType)!==null&&l!==void 0?l:h.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const _=`upload/v1beta/${e}:uploadToFileSearchStore`,x=this.getFileName(o),E={};a!=null&&a.customMetadata&&(E.customMetadata=a.customMetadata),a!=null&&a.chunkingConfig&&(E.chunkingConfig=a.chunkingConfig);const M=await this.fetchUploadUrl(_,v,y,x,E,a==null?void 0:a.httpOptions);return d.uploadToFileSearchStore(o,M,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,o,a,l,d,h){var v;let y={};h?y=h:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o}`,"X-Goog-Upload-Header-Content-Type":`${a}`},l?{"X-Goog-Upload-File-Name":l}:{})};const _=await this.request({path:e,body:JSON.stringify(d),httpMethod:"POST",httpOptions:y});if(!_||!(_!=null&&_.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const x=(v=_==null?void 0:_.headers)===null||v===void 0?void 0:v["x-goog-upload-url"];if(x===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return x}}async function Lv(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const o=n.status;let a;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?a=await n.json():a={error:{message:await n.text(),code:n.status,status:n.statusText}};const l=JSON.stringify(a);throw o>=400&&o<600?new ic({message:l,status:o}):new Error(l)}}function NC(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let o={};if(typeof n.body=="string"&&n.body.length>0)try{const d=JSON.parse(n.body);if(typeof d=="object"&&d!==null&&!Array.isArray(d))o=d;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function a(d,h){const v=Object.assign({},d);for(const y in h)if(Object.prototype.hasOwnProperty.call(h,y)){const _=h[y],x=v[y];_&&typeof _=="object"&&!Array.isArray(_)&&x&&typeof x=="object"&&!Array.isArray(x)?v[y]=a(x,_):(x&&_&&typeof x!=typeof _&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof x}, New type: ${typeof _}. Overwriting.`),v[y]=_)}return v}const l=a(o,e);n.body=JSON.stringify(l)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IC="mcp_used/unknown";let DC=!1;function k_(n){for(const e of n)if(LC(e)||typeof e=="object"&&"inputSchema"in e)return!0;return DC}function H_(n){var e;const o=(e=n[bf])!==null&&e!==void 0?e:"";n[bf]=(o+` ${IC}`).trimStart()}function LC(n){return n!==null&&typeof n=="object"&&n instanceof Kf}function PC(n,e=100){return Ga(this,arguments,function*(){let a,l=0;for(;l<e;){const d=yield Ht(n.listTools({cursor:a}));for(const h of d.tools)yield yield Ht(h),l++;if(!d.nextCursor)break;a=d.nextCursor}})}class Kf{constructor(e=[],o){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=o}static create(e,o){return new Kf(e,o)}async initialize(){var e,o,a,l;if(this.mcpTools.length>0)return;const d={},h=[];for(const x of this.mcpClients)try{for(var v=!0,y=(o=void 0,ol(PC(x))),_;_=await y.next(),e=_.done,!e;v=!0){l=_.value,v=!1;const E=l;h.push(E);const M=E.name;if(d[M])throw new Error(`Duplicate function name ${M} found in MCP tools. Please ensure function names are unique.`);d[M]=x}}catch(E){o={error:E}}finally{try{!v&&!e&&(a=y.return)&&await a.call(y)}finally{if(o)throw o.error}}this.mcpTools=h,this.functionNameToMcpClient=d}async tool(){return await this.initialize(),OS(this.mcpTools,this.config)}async callTool(e){await this.initialize();const o=[];for(const a of e)if(a.name in this.functionNameToMcpClient){const l=this.functionNameToMcpClient[a.name];let d;this.config.timeout&&(d={timeout:this.config.timeout});const h=await l.callTool({name:a.name,arguments:a.args},void 0,d);o.push({functionResponse:{name:a.name,response:h.isError?{error:h}:h}})}return o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function UC(n,e,o){const a=new IS;let l;o.data instanceof Blob?l=JSON.parse(await o.data.text()):l=JSON.parse(o.data),Object.assign(a,l),e(a)}class zC{constructor(e,o,a){this.apiClient=e,this.auth=o,this.webSocketFactory=a}async connect(e){var o,a;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const l=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),h=OC(this.apiClient.getDefaultHeaders()),v=this.apiClient.getApiKey(),y=`${l}/ws/google.ai.generativelanguage.${d}.GenerativeService.BidiGenerateMusic?key=${v}`;let _=()=>{};const x=new Promise(B=>{_=B}),E=e.callbacks,M=function(){_({})},R=this.apiClient,O={onopen:M,onmessage:B=>{UC(R,E.onmessage,B)},onerror:(o=E==null?void 0:E.onerror)!==null&&o!==void 0?o:function(B){},onclose:(a=E==null?void 0:E.onclose)!==null&&a!==void 0?a:function(B){}},P=this.webSocketFactory.create(y,HC(h),O);P.connect(),await x;const q={setup:{model:yt(this.apiClient,e.model)}};return P.send(JSON.stringify(q)),new kC(P,this.apiClient)}}class kC{constructor(e,o){this.conn=e,this.apiClient=o}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const o=bx(e);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const o=Mx(e);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const o={playbackControl:e};this.conn.send(JSON.stringify(o))}play(){this.sendPlaybackControl(Oa.PLAY)}pause(){this.sendPlaybackControl(Oa.PAUSE)}stop(){this.sendPlaybackControl(Oa.STOP)}resetContext(){this.sendPlaybackControl(Oa.RESET_CONTEXT)}close(){this.conn.close()}}function HC(n){const e={};return n.forEach((o,a)=>{e[a]=o}),e}function OC(n){const e=new Headers;for(const[o,a]of Object.entries(n))e.append(o,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BC="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function qC(n,e,o){const a=new NS;let l;o.data instanceof Blob?l=await o.data.text():o.data instanceof ArrayBuffer?l=new TextDecoder().decode(o.data):l=o.data;const d=JSON.parse(l);if(n.isVertexAI()){const h=Ix(d);Object.assign(a,h)}else Object.assign(a,d);e(a)}class GC{constructor(e,o,a){this.apiClient=e,this.auth=o,this.webSocketFactory=a,this.music=new zC(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var o,a,l,d,h,v;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),_=this.apiClient.getApiVersion();let x;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&k_(e.config.tools)&&H_(E);const M=YC(E);if(this.apiClient.isVertexAI())x=`${y}/ws/google.cloud.aiplatform.${_}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(M,x);else{const le=this.apiClient.getApiKey();let pe="BidiGenerateContent",me="key";le!=null&&le.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),_!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),pe="BidiGenerateContentConstrained",me="access_token"),x=`${y}/ws/google.ai.generativelanguage.${_}.GenerativeService.${pe}?${me}=${le}`}let R=()=>{};const O=new Promise(le=>{R=le}),P=e.callbacks,H=function(){var le;(le=P==null?void 0:P.onopen)===null||le===void 0||le.call(P),R({})},I=this.apiClient,q={onopen:H,onmessage:le=>{qC(I,P.onmessage,le)},onerror:(o=P==null?void 0:P.onerror)!==null&&o!==void 0?o:function(le){},onclose:(a=P==null?void 0:P.onclose)!==null&&a!==void 0?a:function(le){}},B=this.webSocketFactory.create(x,ZC(M),q);B.connect(),await O;let ee=yt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const le=this.apiClient.getProject(),pe=this.apiClient.getLocation();ee=`projects/${le}/locations/${pe}/`+ee}let j={};this.apiClient.isVertexAI()&&((l=e.config)===null||l===void 0?void 0:l.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ku.AUDIO]}:e.config.responseModalities=[Ku.AUDIO]),!((d=e.config)===null||d===void 0)&&d.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const X=(v=(h=e.config)===null||h===void 0?void 0:h.tools)!==null&&v!==void 0?v:[],Y=[];for(const le of X)if(this.isCallableTool(le)){const pe=le;Y.push(await pe.tool())}else Y.push(le);Y.length>0&&(e.config.tools=Y);const oe={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?j=wx(this.apiClient,oe):j=Ax(this.apiClient,oe),delete j.config,B.send(JSON.stringify(j)),new FC(B,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const VC={turnComplete:!0};class FC{constructor(e,o){this.conn=e,this.apiClient=o}tLiveClientContent(e,o){if(o.turns!==null&&o.turns!==void 0){let a=[];try{a=Ci(o.turns),e.isVertexAI()||(a=a.map(l=>oc(l)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof o.turns}'`)}return{clientContent:{turns:a,turnComplete:o.turnComplete}}}return{clientContent:{turnComplete:o.turnComplete}}}tLiveClienttToolResponse(e,o){let a=[];if(o.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(o.functionResponses)?a=o.functionResponses:a=[o.functionResponses],a.length===0)throw new Error("functionResponses is required.");for(const d of a){if(typeof d!="object"||d===null||!("name"in d)||!("response"in d))throw new Error(`Could not parse function response, type '${typeof d}'.`);if(!e.isVertexAI()&&!("id"in d))throw new Error(BC)}return{toolResponse:{functionResponses:a}}}sendClientContent(e){e=Object.assign(Object.assign({},VC),e);const o=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(o))}sendRealtimeInput(e){let o={};this.apiClient.isVertexAI()?o={realtimeInput:Nx(e)}:o={realtimeInput:Rx(e)},this.conn.send(JSON.stringify(o))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const o=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(o))}close(){this.conn.close()}}function ZC(n){const e={};return n.forEach((o,a)=>{e[a]=o}),e}function YC(n){const e=new Headers;for(const[o,a]of Object.entries(n))e.append(o,a);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pv=10;function Uv(n){var e,o,a;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let l=!1;for(const h of(o=n==null?void 0:n.tools)!==null&&o!==void 0?o:[])if(Va(h)){l=!0;break}if(!l)return!0;const d=(a=n==null?void 0:n.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls;return d&&(d<0||!Number.isInteger(d))||d==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",d),!0):!1}function Va(n){return"callTool"in n&&typeof n.callTool=="function"}function JC(n){var e,o,a;return(a=(o=(e=n.config)===null||e===void 0?void 0:e.tools)===null||o===void 0?void 0:o.some(l=>Va(l)))!==null&&a!==void 0?a:!1}function zv(n){var e;const o=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((a,l)=>{if(Va(a))return;const d=a;d.functionDeclarations&&d.functionDeclarations.length>0&&o.push(l)}),o}function kv(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KC extends Co{constructor(e){super(),this.apiClient=e,this.generateContent=async o=>{var a,l,d,h,v;const y=await this.processParamsMaybeAddMcpUsage(o);if(this.maybeMoveToResponseJsonSchem(o),!JC(o)||Uv(o.config))return await this.generateContentInternal(y);const _=zv(o);if(_.length>0){const P=_.map(H=>`tools[${H}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let x,E;const M=Ci(y.contents),R=(d=(l=(a=y.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&d!==void 0?d:Pv;let O=0;for(;O<R&&(x=await this.generateContentInternal(y),!(!x.functionCalls||x.functionCalls.length===0));){const P=x.candidates[0].content,H=[];for(const I of(v=(h=o.config)===null||h===void 0?void 0:h.tools)!==null&&v!==void 0?v:[])if(Va(I)){const B=await I.callTool(x.functionCalls);H.push(...B)}O++,E={role:"user",parts:H},y.contents=Ci(y.contents),y.contents.push(P),y.contents.push(E),kv(y.config)&&(M.push(P),M.push(E))}return kv(y.config)&&(x.automaticFunctionCallingHistory=M),x},this.generateContentStream=async o=>{if(this.maybeMoveToResponseJsonSchem(o),Uv(o.config)){const l=await this.processParamsMaybeAddMcpUsage(o);return await this.generateContentStreamInternal(l)}const a=zv(o);if(a.length>0){const l=a.map(d=>`tools[${d}]`).join(", ");throw new Error(`Incompatible tools found at ${l}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(o)},this.generateImages=async o=>await this.generateImagesInternal(o).then(a=>{var l;let d;const h=[];if(a!=null&&a.generatedImages)for(const y of a.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((l=y==null?void 0:y.safetyAttributes)===null||l===void 0?void 0:l.contentType)==="Positive Prompt"?d=y==null?void 0:y.safetyAttributes:h.push(y);let v;return d?v={generatedImages:h,positivePromptSafetyAttributes:d,sdkHttpResponse:a.sdkHttpResponse}:v={generatedImages:h,sdkHttpResponse:a.sdkHttpResponse},v}),this.list=async o=>{var a;const h={config:Object.assign(Object.assign({},{queryBase:!0}),o==null?void 0:o.config)};if(this.apiClient.isVertexAI()&&!h.config.queryBase){if(!((a=h.config)===null||a===void 0)&&a.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");h.config.filter="labels.tune-type:*"}return new $s(Eo.PAGED_ITEM_MODELS,v=>this.listInternal(v),await this.listInternal(h),h)},this.editImage=async o=>{const a={model:o.model,prompt:o.prompt,referenceImages:[],config:o.config};return o.referenceImages&&o.referenceImages&&(a.referenceImages=o.referenceImages.map(l=>l.toReferenceImageAPI())),await this.editImageInternal(a)},this.upscaleImage=async o=>{let a={numberOfImages:1,mode:"upscale"};o.config&&(a=Object.assign(Object.assign({},a),o.config));const l={model:o.model,image:o.image,upscaleFactor:o.upscaleFactor,config:a};return await this.upscaleImageInternal(l)},this.generateVideos=async o=>{var a,l,d,h,v,y;if((o.prompt||o.image||o.video)&&o.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((a=o.video)===null||a===void 0)&&a.uri&&(!((l=o.video)===null||l===void 0)&&l.videoBytes)?o.video={uri:o.video.uri,mimeType:o.video.mimeType}:!((h=(d=o.source)===null||d===void 0?void 0:d.video)===null||h===void 0)&&h.uri&&(!((y=(v=o.source)===null||v===void 0?void 0:v.video)===null||y===void 0)&&y.videoBytes)&&(o.source.video={uri:o.source.video.uri,mimeType:o.source.video.mimeType})),await this.generateVideosInternal(o)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var o,a,l;const d=(o=e.config)===null||o===void 0?void 0:o.tools;if(!d)return e;const h=await Promise.all(d.map(async y=>Va(y)?await y.tool():y)),v={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:h})};if(v.config.tools=h,e.config&&e.config.tools&&k_(e.config.tools)){const y=(l=(a=e.config.httpOptions)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{};let _=Object.assign({},y);Object.keys(_).length===0&&(_=this.apiClient.getDefaultHeaders()),H_(_),v.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:_})}return v}async initAfcToolsMap(e){var o,a,l;const d=new Map;for(const h of(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(Va(h)){const v=h,y=await v.tool();for(const _ of(l=y.functionDeclarations)!==null&&l!==void 0?l:[]){if(!_.name)throw new Error("Function declaration name is required.");if(d.has(_.name))throw new Error(`Duplicate tool declaration name: ${_.name}`);d.set(_.name,v)}}return d}async processAfcStream(e){var o,a,l;const d=(l=(a=(o=e.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.maximumRemoteCalls)!==null&&l!==void 0?l:Pv;let h=!1,v=0;const y=await this.initAfcToolsMap(e);return(function(_,x,E){var M,R;return Ga(this,arguments,function*(){for(var O,P,H,I;v<d;){h&&(v++,h=!1);const j=yield Ht(_.processParamsMaybeAddMcpUsage(E)),X=yield Ht(_.generateContentStreamInternal(j)),Y=[],oe=[];try{for(var q=!0,B=(P=void 0,ol(X)),ee;ee=yield Ht(B.next()),O=ee.done,!O;q=!0){I=ee.value,q=!1;const le=I;if(yield yield Ht(le),le.candidates&&(!((M=le.candidates[0])===null||M===void 0)&&M.content)){oe.push(le.candidates[0].content);for(const pe of(R=le.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(v<d&&pe.functionCall){if(!pe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(x.has(pe.functionCall.name)){const me=yield Ht(x.get(pe.functionCall.name).callTool([pe.functionCall]));Y.push(...me)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${x.keys()}, mising tool: ${pe.functionCall.name}`)}}}}catch(le){P={error:le}}finally{try{!q&&!O&&(H=B.return)&&(yield Ht(H.call(B)))}finally{if(P)throw P.error}}if(Y.length>0){h=!0;const le=new tl;le.candidates=[{content:{role:"user",parts:Y}}],yield yield Ht(le);const pe=[];pe.push(...oe),pe.push({role:"user",parts:Y});const me=Ci(E.contents).concat(pe);E.contents=me}else break}})})(this,y,e)}async generateContentInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=Rv(this.apiClient,e);return v=xe("{model}:generateContent",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=Iv(x),M=new tl;return Object.assign(M,E),M})}else{const _=bv(this.apiClient,e);return v=xe("{model}:generateContent",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=Nv(x),M=new tl;return Object.assign(M,E),M})}}async generateContentStreamInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=Rv(this.apiClient,e);return v=xe("{model}:streamGenerateContent?alt=sse",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.requestStream({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),h.then(function(E){return Ga(this,arguments,function*(){var M,R,O,P;try{for(var H=!0,I=ol(E),q;q=yield Ht(I.next()),M=q.done,!M;H=!0){P=q.value,H=!1;const B=P,ee=Iv(yield Ht(B.json()));ee.sdkHttpResponse={headers:B.headers};const j=new tl;Object.assign(j,ee),yield yield Ht(j)}}catch(B){R={error:B}}finally{try{!H&&!M&&(O=I.return)&&(yield Ht(O.call(I)))}finally{if(R)throw R.error}}})})}else{const _=bv(this.apiClient,e);return v=xe("{model}:streamGenerateContent?alt=sse",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.requestStream({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}),h.then(function(E){return Ga(this,arguments,function*(){var M,R,O,P;try{for(var H=!0,I=ol(E),q;q=yield Ht(I.next()),M=q.done,!M;H=!0){P=q.value,H=!1;const B=P,ee=Nv(yield Ht(B.json()));ee.sdkHttpResponse={headers:B.headers};const j=new tl;Object.assign(j,ee),yield yield Ht(j)}}catch(B){R={error:B}}finally{try{!H&&!M&&(O=I.return)&&(yield Ht(O.call(I)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=rE(this.apiClient,e);return v=xe("{model}:predict",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=uE(x),M=new fv;return Object.assign(M,E),M})}else{const _=aE(this.apiClient,e);return v=xe("{model}:batchEmbedContents",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=lE(x),M=new fv;return Object.assign(M,E),M})}}async generateImagesInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=_E(this.apiClient,e);return v=xe("{model}:predict",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=SE(x),M=new hv;return Object.assign(M,E),M})}else{const _=vE(this.apiClient,e);return v=xe("{model}:predict",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=yE(x),M=new hv;return Object.assign(M,E),M})}}async editImageInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=nE(this.apiClient,e);return d=xe("{model}:predict",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const _=iE(y),x=new yS;return Object.assign(x,_),x})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=pC(this.apiClient,e);return d=xe("{model}:predict",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const _=gC(y),x=new SS;return Object.assign(x,_),x})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=WE(this.apiClient,e);return d=xe("{model}:predict",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=$E(y),x=new TS;return Object.assign(x,_),x})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=oC(this.apiClient,e);return d=xe("{model}:predict",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=sC(y),x=new xS;return Object.assign(x,_),x})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=kE(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>Mf(x))}else{const _=zE(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>wf(x))}}async listInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=FE(this.apiClient,e);return v=xe("{models_url}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=YE(x),M=new mv;return Object.assign(M,E),M})}else{const _=VE(this.apiClient,e);return v=xe("{models_url}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=ZE(x),M=new mv;return Object.assign(M,E),M})}}async update(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=hC(this.apiClient,e);return v=xe("{model}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"PATCH",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>Mf(x))}else{const _=fC(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"PATCH",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>wf(x))}}async delete(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=$x(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=eE(x),M=new pv;return Object.assign(M,E),M})}else{const _=Wx(this.apiClient,e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"DELETE",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=jx(x),M=new pv;return Object.assign(M,E),M})}}async countTokens(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=Kx(this.apiClient,e);return v=xe("{model}:countTokens",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=Qx(x),M=new gv;return Object.assign(M,E),M})}else{const _=Jx(this.apiClient,e);return v=xe("{model}:countTokens",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=Xx(x),M=new gv;return Object.assign(M,E),M})}}async computeTokens(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=Bx(this.apiClient,e);return d=xe("{model}:computeTokens",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>{const _=qx(y),x=new ES;return Object.assign(x,_),x})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=wE(this.apiClient,e);return v=xe("{model}:predictLongRunning",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h.then(x=>{const E=CE(x),M=new Xu;return Object.assign(M,E),M})}else{const _=AE(this.apiClient,e);return v=xe("{model}:predictLongRunning",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h.then(x=>{const E=EE(x),M=new Xu;return Object.assign(M,E),M})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XC extends Co{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const o=e.operation,a=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=o.name.split("/operations/")[0];let d;a&&"httpOptions"in a&&(d=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:l,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async get(e){const o=e.operation,a=e.config;if(o.name===void 0||o.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const l=o.name.split("/operations/")[0];let d;a&&"httpOptions"in a&&(d=a.httpOptions);const h=await this.fetchPredictVideosOperationInternal({operationName:o.name,resourceName:l,config:{httpOptions:d}});return o._fromAPIResponse({apiResponse:h,_isVertexAI:!0})}else{const l=await this.getVideosOperationInternal({operationName:o.name,config:a});return o._fromAPIResponse({apiResponse:l,_isVertexAI:!1})}}async getVideosOperationInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=hS(e);return v=xe("{operationName}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json()),h}else{const _=fS(e);return v=xe("{operationName}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json()),h}}async fetchPredictVideosOperationInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=sS(e);return d=xe("{resourceName}:fetchPredictOperation",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QC(n){const e={},o=f(n,["data"]);if(o!=null&&m(e,["data"],o),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function WC(n){const e={},o=f(n,["parts"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(d=>sA(d))),m(e,["parts"],l)}const a=f(n,["role"]);return a!=null&&m(e,["role"],a),e}function $C(n,e,o){const a={},l=f(e,["expireTime"]);o!==void 0&&l!=null&&m(o,["expireTime"],l);const d=f(e,["newSessionExpireTime"]);o!==void 0&&d!=null&&m(o,["newSessionExpireTime"],d);const h=f(e,["uses"]);o!==void 0&&h!=null&&m(o,["uses"],h);const v=f(e,["liveConnectConstraints"]);o!==void 0&&v!=null&&m(o,["bidiGenerateContentSetup"],oA(n,v));const y=f(e,["lockAdditionalFields"]);return o!==void 0&&y!=null&&m(o,["fieldMask"],y),a}function jC(n,e){const o={},a=f(e,["config"]);return a!=null&&m(o,["config"],$C(n,a,o)),o}function eA(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["fileUri"]);o!=null&&m(e,["fileUri"],o);const a=f(n,["mimeType"]);return a!=null&&m(e,["mimeType"],a),e}function tA(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=f(n,["enableWidget"]);return o!=null&&m(e,["enableWidget"],o),e}function nA(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=f(n,["timeRangeFilter"]);return o!=null&&m(e,["timeRangeFilter"],o),e}function iA(n,e){const o={},a=f(n,["generationConfig"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig"],a);const l=f(n,["responseModalities"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","responseModalities"],l);const d=f(n,["temperature"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","temperature"],d);const h=f(n,["topP"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","topP"],h);const v=f(n,["topK"]);e!==void 0&&v!=null&&m(e,["setup","generationConfig","topK"],v);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&m(e,["setup","generationConfig","maxOutputTokens"],y);const _=f(n,["mediaResolution"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","mediaResolution"],_);const x=f(n,["seed"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","seed"],x);const E=f(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Jf(E));const M=f(n,["thinkingConfig"]);e!==void 0&&M!=null&&m(e,["setup","generationConfig","thinkingConfig"],M);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],R);const O=f(n,["systemInstruction"]);e!==void 0&&O!=null&&m(e,["setup","systemInstruction"],WC(zn(O)));const P=f(n,["tools"]);if(e!==void 0&&P!=null){let X=Ka(P);Array.isArray(X)&&(X=X.map(Y=>rA(Ja(Y)))),m(e,["setup","tools"],X)}const H=f(n,["sessionResumption"]);e!==void 0&&H!=null&&m(e,["setup","sessionResumption"],aA(H));const I=f(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&m(e,["setup","inputAudioTranscription"],I);const q=f(n,["outputAudioTranscription"]);e!==void 0&&q!=null&&m(e,["setup","outputAudioTranscription"],q);const B=f(n,["realtimeInputConfig"]);e!==void 0&&B!=null&&m(e,["setup","realtimeInputConfig"],B);const ee=f(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&m(e,["setup","contextWindowCompression"],ee);const j=f(n,["proactivity"]);return e!==void 0&&j!=null&&m(e,["setup","proactivity"],j),o}function oA(n,e){const o={},a=f(e,["model"]);a!=null&&m(o,["setup","model"],yt(n,a));const l=f(e,["config"]);return l!=null&&m(o,["config"],iA(l,o)),o}function sA(n){const e={},o=f(n,["functionCall"]);o!=null&&m(e,["functionCall"],o);const a=f(n,["codeExecutionResult"]);a!=null&&m(e,["codeExecutionResult"],a);const l=f(n,["executableCode"]);l!=null&&m(e,["executableCode"],l);const d=f(n,["fileData"]);d!=null&&m(e,["fileData"],eA(d));const h=f(n,["functionResponse"]);h!=null&&m(e,["functionResponse"],h);const v=f(n,["inlineData"]);v!=null&&m(e,["inlineData"],QC(v));const y=f(n,["text"]);y!=null&&m(e,["text"],y);const _=f(n,["thought"]);_!=null&&m(e,["thought"],_);const x=f(n,["thoughtSignature"]);x!=null&&m(e,["thoughtSignature"],x);const E=f(n,["videoMetadata"]);return E!=null&&m(e,["videoMetadata"],E),e}function aA(n){const e={},o=f(n,["handle"]);if(o!=null&&m(e,["handle"],o),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rA(n){const e={},o=f(n,["functionDeclarations"]);if(o!=null){let x=o;Array.isArray(x)&&(x=x.map(E=>E)),m(e,["functionDeclarations"],x)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const a=f(n,["googleSearchRetrieval"]);a!=null&&m(e,["googleSearchRetrieval"],a);const l=f(n,["computerUse"]);l!=null&&m(e,["computerUse"],l);const d=f(n,["fileSearch"]);d!=null&&m(e,["fileSearch"],d);const h=f(n,["codeExecution"]);if(h!=null&&m(e,["codeExecution"],h),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const v=f(n,["googleMaps"]);v!=null&&m(e,["googleMaps"],tA(v));const y=f(n,["googleSearch"]);y!=null&&m(e,["googleSearch"],nA(y));const _=f(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lA(n){const e=[];for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const a=n[o];if(typeof a=="object"&&a!=null&&Object.keys(a).length>0){const l=Object.keys(a).map(d=>`${o}.${d}`);e.push(...l)}else e.push(o)}return e.join(",")}function uA(n,e){let o=null;const a=n.bidiGenerateContentSetup;if(typeof a=="object"&&a!==null&&"setup"in a){const d=a.setup;typeof d=="object"&&d!==null?(n.bidiGenerateContentSetup=d,o=d):delete n.bidiGenerateContentSetup}else a!==void 0&&delete n.bidiGenerateContentSetup;const l=n.fieldMask;if(o){const d=lA(o);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)d?n.fieldMask=d:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&l!==null&&Array.isArray(l)&&l.length>0){const h=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let v=[];l.length>0&&(v=l.map(_=>h.includes(_)?`generationConfig.${_}`:_));const y=[];d&&y.push(d),v.length>0&&y.push(...v),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else l!==null&&Array.isArray(l)&&l.length>0?n.fieldMask=l.join(","):delete n.fieldMask;return n}class cA extends Co{constructor(e){super(),this.apiClient=e}async create(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const v=jC(this.apiClient,e);d=xe("auth_tokens",v._url),h=v._query,delete v.config,delete v._url,delete v._query;const y=uA(v,e.config);return l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dA(n,e){const o={},a=f(n,["displayName"]);return e!==void 0&&a!=null&&m(e,["displayName"],a),o}function fA(n){const e={},o=f(n,["config"]);return o!=null&&dA(o,e),e}function hA(n,e){const o={},a=f(n,["force"]);return e!==void 0&&a!=null&&m(e,["_query","force"],a),o}function mA(n){const e={},o=f(n,["name"]);o!=null&&m(e,["_url","name"],o);const a=f(n,["config"]);return a!=null&&hA(a,e),e}function pA(n){const e={},o=f(n,["name"]);return o!=null&&m(e,["_url","name"],o),e}function gA(n,e){const o={},a=f(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["customMetadata"],d)}const l=f(n,["chunkingConfig"]);return e!==void 0&&l!=null&&m(e,["chunkingConfig"],l),o}function vA(n){const e={},o=f(n,["name"]);o!=null&&m(e,["name"],o);const a=f(n,["metadata"]);a!=null&&m(e,["metadata"],a);const l=f(n,["done"]);l!=null&&m(e,["done"],l);const d=f(n,["error"]);d!=null&&m(e,["error"],d);const h=f(n,["response"]);return h!=null&&m(e,["response"],yA(h)),e}function _A(n){const e={},o=f(n,["fileSearchStoreName"]);o!=null&&m(e,["_url","file_search_store_name"],o);const a=f(n,["fileName"]);a!=null&&m(e,["fileName"],a);const l=f(n,["config"]);return l!=null&&gA(l,e),e}function yA(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["parent"]);a!=null&&m(e,["parent"],a);const l=f(n,["documentName"]);return l!=null&&m(e,["documentName"],l),e}function SA(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),o}function TA(n){const e={},o=f(n,["config"]);return o!=null&&SA(o,e),e}function xA(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["fileSearchStores"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["fileSearchStores"],d)}return e}function EA(n,e){const o={},a=f(n,["mimeType"]);e!==void 0&&a!=null&&m(e,["mimeType"],a);const l=f(n,["displayName"]);e!==void 0&&l!=null&&m(e,["displayName"],l);const d=f(n,["customMetadata"]);if(e!==void 0&&d!=null){let v=d;Array.isArray(v)&&(v=v.map(y=>y)),m(e,["customMetadata"],v)}const h=f(n,["chunkingConfig"]);return e!==void 0&&h!=null&&m(e,["chunkingConfig"],h),o}function CA(n){const e={},o=f(n,["fileSearchStoreName"]);o!=null&&m(e,["_url","file_search_store_name"],o);const a=f(n,["config"]);return a!=null&&EA(a,e),e}function AA(n){const e={},o=f(n,["sdkHttpResponse"]);return o!=null&&m(e,["sdkHttpResponse"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(n,e){const o={},a=f(n,["force"]);return e!==void 0&&a!=null&&m(e,["_query","force"],a),o}function MA(n){const e={},o=f(n,["name"]);o!=null&&m(e,["_url","name"],o);const a=f(n,["config"]);return a!=null&&wA(a,e),e}function bA(n){const e={},o=f(n,["name"]);return o!=null&&m(e,["_url","name"],o),e}function RA(n,e){const o={},a=f(n,["pageSize"]);e!==void 0&&a!=null&&m(e,["_query","pageSize"],a);const l=f(n,["pageToken"]);return e!==void 0&&l!=null&&m(e,["_query","pageToken"],l),o}function NA(n){const e={},o=f(n,["parent"]);o!=null&&m(e,["_url","parent"],o);const a=f(n,["config"]);return a!=null&&RA(a,e),e}function IA(n){const e={},o=f(n,["sdkHttpResponse"]);o!=null&&m(e,["sdkHttpResponse"],o);const a=f(n,["nextPageToken"]);a!=null&&m(e,["nextPageToken"],a);const l=f(n,["documents"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["documents"],d)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DA extends Co{constructor(e){super(),this.apiClient=e,this.list=async o=>new $s(Eo.PAGED_ITEM_DOCUMENTS,a=>this.listInternal({parent:o.parent,config:a.config}),await this.listInternal(o),o)}async get(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=bA(e);return d=xe("{name}",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var o,a;let l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=MA(e);l=xe("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=NA(e);return d=xe("{parent}/documents",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=IA(y),x=new CS;return Object.assign(x,_),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LA extends Co{constructor(e,o=new DA(e)){super(),this.apiClient=e,this.documents=o,this.list=async(a={})=>new $s(Eo.PAGED_ITEM_FILE_SEARCH_STORES,l=>this.listInternal(l),await this.listInternal(a),a)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=fA(e);return d=xe("fileSearchStores",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=pA(e);return d=xe("{name}",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var o,a;let l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=mA(e);l=xe("{name}",h._url),d=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=TA(e);return d=xe("fileSearchStores",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=xA(y),x=new AS;return Object.assign(x,_),x})}}async uploadToFileSearchStoreInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=CA(e);return d=xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=AA(y),x=new wS;return Object.assign(x,_),x})}}async importFile(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=_A(e);return d=xe("{file_search_store_name}:importFile",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const _=vA(y),x=new Gf;return Object.assign(x,_),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PA(n,e){const o={},a=f(n,["name"]);return a!=null&&m(o,["_url","name"],a),o}function UA(n,e){const o={},a=f(n,["name"]);return a!=null&&m(o,["_url","name"],a),o}function zA(n,e,o){const a={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=f(n,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&m(e,["displayName"],l),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const d=f(n,["epochCount"]);e!==void 0&&d!=null&&m(e,["tuningTask","hyperparameters","epochCount"],d);const h=f(n,["learningRateMultiplier"]);if(h!=null&&m(a,["tuningTask","hyperparameters","learningRateMultiplier"],h),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const v=f(n,["batchSize"]);e!==void 0&&v!=null&&m(e,["tuningTask","hyperparameters","batchSize"],v);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&m(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return a}function kA(n,e,o){const a={};let l=f(o,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec"],Hv(R))}else if(l==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec"],Hv(R))}const d=f(n,["tunedModelDisplayName"]);e!==void 0&&d!=null&&m(e,["tunedModelDisplayName"],d);const h=f(n,["description"]);e!==void 0&&h!=null&&m(e,["description"],h);let v=f(o,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let y=f(o,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(y==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let _=f(o,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(_==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let x=f(o,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(x==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const E=f(n,["labels"]);e!==void 0&&E!=null&&m(e,["labels"],E);const M=f(n,["beta"]);return e!==void 0&&M!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],M),a}function HA(n,e){const o={},a=f(n,["baseModel"]);a!=null&&m(o,["baseModel"],a);const l=f(n,["preTunedModel"]);l!=null&&m(o,["preTunedModel"],l);const d=f(n,["trainingDataset"]);d!=null&&XA(d);const h=f(n,["config"]);return h!=null&&zA(h,o),o}function OA(n,e){const o={},a=f(n,["baseModel"]);a!=null&&m(o,["baseModel"],a);const l=f(n,["preTunedModel"]);l!=null&&m(o,["preTunedModel"],l);const d=f(n,["trainingDataset"]);d!=null&&QA(d,o,e);const h=f(n,["config"]);return h!=null&&kA(h,o,e),o}function BA(n,e){const o={},a=f(n,["name"]);return a!=null&&m(o,["_url","name"],a),o}function qA(n,e){const o={},a=f(n,["name"]);return a!=null&&m(o,["_url","name"],a),o}function GA(n,e,o){const a={},l=f(n,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const d=f(n,["pageToken"]);e!==void 0&&d!=null&&m(e,["_query","pageToken"],d);const h=f(n,["filter"]);return e!==void 0&&h!=null&&m(e,["_query","filter"],h),a}function VA(n,e,o){const a={},l=f(n,["pageSize"]);e!==void 0&&l!=null&&m(e,["_query","pageSize"],l);const d=f(n,["pageToken"]);e!==void 0&&d!=null&&m(e,["_query","pageToken"],d);const h=f(n,["filter"]);return e!==void 0&&h!=null&&m(e,["_query","filter"],h),a}function FA(n,e){const o={},a=f(n,["config"]);return a!=null&&GA(a,o),o}function ZA(n,e){const o={},a=f(n,["config"]);return a!=null&&VA(a,o),o}function YA(n,e){const o={},a=f(n,["sdkHttpResponse"]);a!=null&&m(o,["sdkHttpResponse"],a);const l=f(n,["nextPageToken"]);l!=null&&m(o,["nextPageToken"],l);const d=f(n,["tunedModels"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>O_(v))),m(o,["tuningJobs"],h)}return o}function JA(n,e){const o={},a=f(n,["sdkHttpResponse"]);a!=null&&m(o,["sdkHttpResponse"],a);const l=f(n,["nextPageToken"]);l!=null&&m(o,["nextPageToken"],l);const d=f(n,["tuningJobs"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(v=>Rf(v))),m(o,["tuningJobs"],h)}return o}function KA(n,e){const o={},a=f(n,["name"]);a!=null&&m(o,["model"],a);const l=f(n,["name"]);return l!=null&&m(o,["endpoint"],l),o}function XA(n,e){const o={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const a=f(n,["examples"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>d)),m(o,["examples","examples"],l)}return o}function QA(n,e,o){const a={};let l=f(o,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const h=f(n,["gcsUri"]);e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(l==="PREFERENCE_TUNING"){const h=f(n,["gcsUri"]);e!==void 0&&h!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],h)}let d=f(o,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const h=f(n,["vertexDatasetResource"]);e!==void 0&&h!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],h)}else if(d==="PREFERENCE_TUNING"){const h=f(n,["vertexDatasetResource"]);e!==void 0&&h!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],h)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return a}function O_(n,e){const o={},a=f(n,["sdkHttpResponse"]);a!=null&&m(o,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&m(o,["name"],l);const d=f(n,["state"]);d!=null&&m(o,["state"],S_(d));const h=f(n,["createTime"]);h!=null&&m(o,["createTime"],h);const v=f(n,["tuningTask","startTime"]);v!=null&&m(o,["startTime"],v);const y=f(n,["tuningTask","completeTime"]);y!=null&&m(o,["endTime"],y);const _=f(n,["updateTime"]);_!=null&&m(o,["updateTime"],_);const x=f(n,["description"]);x!=null&&m(o,["description"],x);const E=f(n,["baseModel"]);E!=null&&m(o,["baseModel"],E);const M=f(n,["_self"]);return M!=null&&m(o,["tunedModel"],KA(M)),o}function Rf(n,e){const o={},a=f(n,["sdkHttpResponse"]);a!=null&&m(o,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&m(o,["name"],l);const d=f(n,["state"]);d!=null&&m(o,["state"],S_(d));const h=f(n,["createTime"]);h!=null&&m(o,["createTime"],h);const v=f(n,["startTime"]);v!=null&&m(o,["startTime"],v);const y=f(n,["endTime"]);y!=null&&m(o,["endTime"],y);const _=f(n,["updateTime"]);_!=null&&m(o,["updateTime"],_);const x=f(n,["error"]);x!=null&&m(o,["error"],x);const E=f(n,["description"]);E!=null&&m(o,["description"],E);const M=f(n,["baseModel"]);M!=null&&m(o,["baseModel"],M);const R=f(n,["tunedModel"]);R!=null&&m(o,["tunedModel"],R);const O=f(n,["preTunedModel"]);O!=null&&m(o,["preTunedModel"],O);const P=f(n,["supervisedTuningSpec"]);P!=null&&m(o,["supervisedTuningSpec"],P);const H=f(n,["preferenceOptimizationSpec"]);H!=null&&m(o,["preferenceOptimizationSpec"],H);const I=f(n,["tuningDataStats"]);I!=null&&m(o,["tuningDataStats"],I);const q=f(n,["encryptionSpec"]);q!=null&&m(o,["encryptionSpec"],q);const B=f(n,["partnerModelTuningSpec"]);B!=null&&m(o,["partnerModelTuningSpec"],B);const ee=f(n,["customBaseModel"]);ee!=null&&m(o,["customBaseModel"],ee);const j=f(n,["experiment"]);j!=null&&m(o,["experiment"],j);const X=f(n,["labels"]);X!=null&&m(o,["labels"],X);const Y=f(n,["outputUri"]);Y!=null&&m(o,["outputUri"],Y);const oe=f(n,["pipelineJob"]);oe!=null&&m(o,["pipelineJob"],oe);const le=f(n,["serviceAccount"]);le!=null&&m(o,["serviceAccount"],le);const pe=f(n,["tunedModelDisplayName"]);pe!=null&&m(o,["tunedModelDisplayName"],pe);const me=f(n,["veoTuningSpec"]);return me!=null&&m(o,["veoTuningSpec"],me),o}function WA(n,e){const o={},a=f(n,["sdkHttpResponse"]);a!=null&&m(o,["sdkHttpResponse"],a);const l=f(n,["name"]);l!=null&&m(o,["name"],l);const d=f(n,["metadata"]);d!=null&&m(o,["metadata"],d);const h=f(n,["done"]);h!=null&&m(o,["done"],h);const v=f(n,["error"]);return v!=null&&m(o,["error"],v),o}function Hv(n,e){const o={},a=f(n,["gcsUri"]);a!=null&&m(o,["validationDatasetUri"],a);const l=f(n,["vertexDatasetResource"]);return l!=null&&m(o,["validationDatasetUri"],l),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $A extends Co{constructor(e){super(),this.apiClient=e,this.get=async o=>await this.getInternal(o),this.list=async(o={})=>new $s(Eo.PAGED_ITEM_TUNING_JOBS,a=>this.listInternal(a),await this.listInternal(o),o),this.tune=async o=>{var a;if(this.apiClient.isVertexAI())if(o.baseModel.startsWith("projects/")){const l={tunedModelName:o.baseModel};!((a=o.config)===null||a===void 0)&&a.preTunedModelCheckpointId&&(l.checkpointId=o.config.preTunedModelCheckpointId);const d=Object.assign(Object.assign({},o),{preTunedModel:l});return d.baseModel=void 0,await this.tuneInternal(d)}else{const l=Object.assign({},o);return await this.tuneInternal(l)}else{const l=Object.assign({},o),d=await this.tuneMldevInternal(l);let h="";return d.metadata!==void 0&&d.metadata.tunedModel!==void 0?h=d.metadata.tunedModel:d.name!==void 0&&d.name.includes("/operations/")&&(h=d.name.split("/operations/")[0]),{name:h,state:xf.JOB_STATE_QUEUED}}}}async getInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=qA(e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>Rf(x))}else{const _=BA(e);return v=xe("{name}",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>O_(x))}}async listInternal(e){var o,a,l,d;let h,v="",y={};if(this.apiClient.isVertexAI()){const _=ZA(e);return v=xe("tuningJobs",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=JA(x),M=new vv;return Object.assign(M,E),M})}else{const _=FA(e);return v=xe("tunedModels",_._url),y=_._query,delete _._url,delete _._query,h=this.apiClient.request({path:v,queryParams:y,body:JSON.stringify(_),httpMethod:"GET",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal}).then(x=>x.json().then(E=>{const M=E;return M.sdkHttpResponse={headers:x.headers},M})),h.then(x=>{const E=YA(x),M=new vv;return Object.assign(M,E),M})}}async cancel(e){var o,a,l,d;let h="",v={};if(this.apiClient.isVertexAI()){const y=UA(e);h=xe("{name}:cancel",y._url),v=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:v,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}else{const y=PA(e);h=xe("{name}:cancel",y._url),v=y._query,delete y._url,delete y._query,await this.apiClient.request({path:h,queryParams:v,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(l=e.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(d=e.config)===null||d===void 0?void 0:d.abortSignal})}}async tuneInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI()){const v=OA(e,e);return d=xe("tuningJobs",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>Rf(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var o,a;let l,d="",h={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const v=HA(e);return d=xe("tunedModels",v._url),h=v._query,delete v._url,delete v._query,l=this.apiClient.request({path:d,queryParams:h,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(o=e.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(_=>{const x=_;return x.sdkHttpResponse={headers:y.headers},x})),l.then(y=>WA(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jA{async download(e,o){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const ew=1024*1024*8,tw=3,nw=1e3,iw=2,Wu="x-goog-upload-status";async function ow(n,e,o){var a;const l=await B_(n,e,o),d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Wu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function sw(n,e,o){var a;const l=await B_(n,e,o),d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[Wu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const h=m_(d),v=new Vf;return Object.assign(v,h),v}async function B_(n,e,o){var a,l;let d=0,h=0,v=new Ef(new Response),y="upload";for(d=n.size;h<d;){const _=Math.min(ew,d-h),x=n.slice(h,h+_);h+_>=d&&(y+=", finalize");let E=0,M=nw;for(;E<tw&&(v=await o.request({path:"",body:x,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(h),"Content-Length":String(_)}}}),!(!((a=v==null?void 0:v.headers)===null||a===void 0)&&a[Wu]));)E++,await rw(M),M=M*iw;if(h+=_,((l=v==null?void 0:v.headers)===null||l===void 0?void 0:l[Wu])!=="active")break;if(d<=h)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return v}async function aw(n){return{size:n.size,type:n.type}}function rw(n){return new Promise(e=>setTimeout(e,n))}class lw{async upload(e,o,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await ow(e,o,a)}async uploadToFileSearchStore(e,o,a){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sw(e,o,a)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await aw(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uw{create(e,o,a){return new cw(e,o,a)}}class cw{constructor(e,o,a){this.url=e,this.headers=o,this.callbacks=a}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ov="x-goog-api-key";class dw{constructor(e){this.apiKey=e}async addAuthHeaders(e,o){if(e.get(Ov)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Ov,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fw="gl-node/";class hw{constructor(e){var o;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(o=e.vertexai)!==null&&o!==void 0?o:!1,this.apiKey=e.apiKey;const a=iS(e.httpOptions,e.vertexai,void 0,void 0);a&&(e.httpOptions?e.httpOptions.baseUrl=a:e.httpOptions={baseUrl:a}),this.apiVersion=e.apiVersion;const l=new dw(this.apiKey);this.apiClient=new RC({auth:l,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:fw+"web",uploader:new lw,downloader:new jA}),this.models=new KC(this.apiClient),this.live=new GC(this.apiClient,l,new uw),this.batches=new bT(this.apiClient),this.chats=new ax(this.models,this.apiClient),this.caches=new ix(this.apiClient),this.files=new gx(this.apiClient),this.operations=new XC(this.apiClient),this.authTokens=new cA(this.apiClient),this.tunings=new $A(this.apiClient),this.fileSearchStores=new LA(this.apiClient)}}const mw="AIzaSyCgS6D1Gvj4SC3jiGU9i3Y2pxCIFID4ctY",Ya=new hw({apiKey:mw}),pw=async(n,e,o,a,l,d,h)=>{if(!Ya)return`A delay of approximately ${n} minutes is expected due to ${e}.`;const v=`
    You are a helpful logistics assistant communicating with a customer or supplier.
    
    Context:
    - A delivery is delayed.
    - Current Delay: ${n} minutes.
    - Cause: ${e}.
    - Confidence: ${o}.
    ${a?`- The ETA has increased by ${a} minutes.`:""}
    ${h?`- Traffic Speed: Moving at ${h.current} mph (Normal: ${h.normal} mph).`:""}
    
    Task:
    Generate a clear, reassuring explanation (1-2 sentences).
    - If confidence is Low or delay is large (>60 mins), emphasize that this is a *projection* based on current slow speeds and likely an overestimation that will correct itself.
    - Mention the speed drop if relevant (e.g. "traffic has slowed to ${(h==null?void 0:h.current)||"low"} mph").
    - Only mention weather if it is NOT "Clear".
    - Use plain English (no jargon).
    - Do NOT apologize (keep it neutral and informative).
    
    Examples:
    - "Heavy traffic has slowed vehicles to 22 mph, causing a projected delay of 45 minutes, though this may improve."
    - "Current congestion suggests a significant delay, but this estimate is likely high and will adjust as traffic clears."
    - "Stormy weather and reduced speeds (35 mph) are impacting the timeline."
  `;try{return(await Ya.models.generateContent({model:"gemini-2.5-flash",contents:v})).text.trim()}catch(y){return console.error("Error fetching explanation from Gemini API:",y),`A delay of approximately ${n} minutes is expected due to ${e}.`}},gw=async(n,e)=>{if(!Ya){const l=n.toLowerCase().includes("mattress")||n.toLowerCase().includes("furniture")?3:1;return Math.max(5,5+e*l)}const o=`
    You are a logistics timing expert specializing in truck delivery operations.
    
    Task: Estimate the unloading time for a delivery truck.
    
    Item Type: ${n}
    Quantity: ${e}
    
    Consider factors like:
    - Item weight and size (mattresses and furniture take longer)
    - Whether items need to be carried vs wheeled
    - Typical unloading procedures
    - Driver capabilities (one person unloading)
    
    Respond with ONLY a number representing minutes (integer). 
    Minimum: 5 minutes (for paperwork/setup)
    Maximum: 60 minutes (for very large deliveries)
    
    Example responses: "15" or "25" or "8"
  `;try{const l=(await Ya.models.generateContent({model:"gemini-2.5-flash",contents:o})).text.trim(),d=parseInt(l.replace(/[^\d]/g,""));return isNaN(d)||d<5?5:d>60?60:(console.log(` Gemini predicted unloading time: ${d} minutes for ${e} ${n}`),d)}catch(a){console.error("Error fetching unloading time from Gemini API:",a);const l=5,d=n.toLowerCase().includes("mattress")||n.toLowerCase().includes("furniture")?3:1;return Math.max(5,l+e*d)}},vw=async(n,e)=>{if(!Ya){const l={};return n.forEach(d=>{const h=e.filter(y=>y.destinationStopId===d.id);let v=5;h.forEach(y=>{const _=y.contents.toLowerCase().includes("mattress")||y.contents.toLowerCase().includes("furniture")?3:1;v+=y.quantity*_}),l[d.id]=v}),l}const a=`
    You are a logistics expert. Calculate the estimated unloading time (in minutes) for each of the following delivery stops.
    
    Consider:
    - Item quantity and type (heavy/bulky items like mattresses take longer)
    - Base time for parking and paperwork (approx 5 mins)
    - 1-2 minutes per standard item, 3-5 minutes per bulky item
    
    Stops:
    ${n.map(l=>{const h=e.filter(v=>v.destinationStopId===l.id).map(v=>`${v.quantity}x ${v.contents}`).join(", ");return`Stop ID: ${l.id}, Name: ${l.name}, Items: ${h||"None"}`}).join(`
`)}
    
    Return ONLY a JSON object where keys are Stop IDs and values are the estimated minutes (integer).
    Example: {"stop-1": 15, "stop-2": 8}
    Do not include markdown formatting or explanations.
  `;try{const d=(await Ya.models.generateContent({model:"gemini-2.5-flash",contents:a})).text.trim().replace(/```json|```/g,""),h=JSON.parse(d);return console.log(" Gemini calculated batch unloading times:",h),h}catch(l){console.error("Error fetching batch unloading times from Gemini API:",l);const d={};return n.forEach(h=>{const v=e.filter(_=>_.destinationStopId===h.id);let y=5;v.forEach(_=>{const x=_.contents.toLowerCase().includes("mattress")||_.contents.toLowerCase().includes("furniture")?3:1;y+=_.quantity*x}),d[h.id]=y}),d}},_w="https://api.openweathermap.org/data/2.5",Bv=new Map,yw=3e5,Sw=5e3;function Tw(n,e){return`${n.toFixed(2)},${e.toFixed(2)}`}async function xw(n,e){const o=new AbortController,a=setTimeout(()=>o.abort(),e);try{return await fetch(n,{signal:o.signal})}finally{clearTimeout(a)}}const Xf=async n=>{var v,y,_,x,E;const e="0f6191a133297c000ed64c179d0df2d1";console.log(" Weather API - Key status:","CONFIGURED");const[o,a]=n,l=Tw(o,a),d=Bv.get(l);if(d&&Date.now()-d.timestamp<yw)return console.log(" Using cached weather data"),d.data;console.log(` Fetching real weather data for [${o}, ${a}]`);const h=`${_w}/weather?lat=${o}&lon=${a}&appid=${e}&units=imperial`;try{const M=await xw(h,Sw);if(console.log(" API Response status:",M.status),!M.ok){const B=await M.text();throw console.error(" API Error Response:",B),new Error(`OpenWeather API error: ${M.status}`)}const R=await M.json();console.log(" Raw weather data:",{weatherId:(v=R.weather[0])==null?void 0:v.id,main:(y=R.weather[0])==null?void 0:y.main,description:(_=R.weather[0])==null?void 0:_.description,temp:R.main.temp});let O="Clear";const P=((x=R.weather[0])==null?void 0:x.id)||800;P>=200&&P<300?O="Storm":P>=300&&P<600?O="Rain":P>=600&&P<700?O="Storm":P>=700&&P<800?O="Rain":(P===800||P>800)&&(O="Clear");let H=((E=R.weather[0])==null?void 0:E.description)||"Unknown conditions";H=H.charAt(0).toUpperCase()+H.slice(1),O==="Storm"?H+=". Severe weather - reduced visibility and road hazards.":O==="Rain"?H+=". Wet roads - drive with caution.":H+=". Good driving conditions.",R.visibility<1e3&&(H+=` Low visibility: ${Math.round(R.visibility*3.28084)} ft.`);const I=R.wind.speed;I>25&&(H+=` High winds: ${Math.round(I)} mph - crosswinds may affect large vehicles.`),console.log(" OpenWeatherMap data retrieved successfully:",{condition:O,temperature:Math.round(R.main.temp)});const q={condition:O,temperature:Math.round(R.main.temp),description:H};return Bv.set(l,{data:q,timestamp:Date.now()}),q}catch(M){throw M instanceof Error&&M.name==="AbortError"?new Error("Weather API request timed out"):M}},Qf=n=>{if(!n)return 1;switch(n.condition){case"Clear":return 1;case"Rain":return .75;case"Storm":return .55;default:return 1}},q_=(n,e)=>{if(!n)return 0;const o=Qf(n);if(o>=1)return 0;const a=Math.min(e,50),l=55,d=l*o,h=a/l*60,v=a/d*60;return Math.round(v-h)},Ew=Object.freeze(Object.defineProperty({__proto__:null,fetchRealWeatherData:Xf,getWeatherDelay:q_,getWeatherSpeedMultiplier:Qf},Symbol.toStringTag,{value:"Module"})),Cw="https://api.tomtom.com/traffic/services/4",qv=new Map,Aw=6e4,ww=5e3;function Mw(n,e){return`${n.toFixed(3)},${e.toFixed(3)}`}async function bw(n,e){const o=new AbortController,a=setTimeout(()=>o.abort(),e);try{return await fetch(n,{signal:o.signal})}finally{clearTimeout(a)}}const Wf=async n=>{const e="uHdAHu50Leo05cMTFN2wj0Iukxd0D7Fm";console.log(" Traffic API - Key status:","CONFIGURED");const[o,a]=n,l=Mw(o,a),d=qv.get(l);if(d&&Date.now()-d.timestamp<Aw)return console.log(" Using cached traffic data"),d.data;console.log(` Fetching real traffic data for [${o}, ${a}]`);const v=`${Cw}/flowSegmentData/relative0/10/json?point=${o},${a}&unit=MPH&openLr=false&key=${e}`;try{const y=await bw(v,ww);if(!y.ok)throw new Error(`TomTom API error: ${y.status}`);const _=await y.json(),{currentSpeed:x,freeFlowSpeed:E,currentTravelTime:M,freeFlowTravelTime:R,roadClosure:O,confidence:P}=_.flowSegmentData,H=x>200?Math.round(x*.621371):Math.round(x),I=E>200?Math.round(E*.621371):Math.round(E),q=H/I,B=M-R;let ee,j;if(O)ee="Heavy",j="Road closure detected. Route may be blocked.";else if(q>=.85)ee="Light",j=`Traffic is flowing smoothly at ${H} mph.`;else if(q>=.5){ee="Moderate";const Y=Math.round(B/60);j=`Moderate congestion. Speed reduced to ${H} mph (normal: ${I} mph). ~${Y} min delay on this segment.`}else{ee="Heavy";const Y=Math.round(B/60);j=`Heavy traffic. Speed reduced to ${H} mph (${Math.round(q*100)}% of normal). ~${Y} min delay on this segment.`}P<.7&&(j+=" (Limited traffic data)"),console.log(" TomTom traffic data retrieved successfully:",{status:ee,currentSpeedMph:H,normalSpeedMph:I});const X={status:ee,description:j,currentSpeed:H,normalSpeed:I,speedFactor:q,delaySeconds:B};return qv.set(l,{data:X,timestamp:Date.now()}),X}catch(y){throw y instanceof Error&&y.name==="AbortError"?new Error("Traffic API request timed out"):y}},G_=(n,e)=>{if(!n)return 1;if(n.speedFactor!==void 0)return Math.max(.2,Math.min(1,n.speedFactor));switch(n.status){case"Light":return 1;case"Moderate":return e==="highway"?.7:e==="arterial"?.6:e==="city"?.55:.65;case"Heavy":return e==="highway"?.35:e==="arterial"?.25:e==="city"?.2:.3;default:return 1}},V_=(n,e,o="arterial")=>{if(!n||n.status==="Light")return 0;if(n.currentSpeed&&n.normalSpeed&&n.currentSpeed>0){const a=Math.min(e,10),l=a/n.normalSpeed*60,d=a/n.currentSpeed*60;return Math.max(0,Math.round(d-l))}return 0},Rw=Object.freeze(Object.defineProperty({__proto__:null,fetchRealTrafficData:Wf,getTrafficDelay:V_,getTrafficSpeedMultiplier:G_},Symbol.toStringTag,{value:"Module"})),Nw=(n,e)=>{const a=n[0]*(Math.PI/180),l=e[0]*(Math.PI/180),d=l-a,h=(e[1]-n[1])*(Math.PI/180),v=Math.sin(d/2)*Math.sin(d/2)+Math.cos(a)*Math.cos(l)*Math.sin(h/2)*Math.sin(h/2);return 3958.8*(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)))},F_=(n,e,o,a)=>{const l=Nw(n,e);let d="arterial",h=45,v=!1;return l>.5?(d="highway",h=Math.random()>.5?70:65,v=!1):l<.1?(d="residential",h=Math.random()>.5?30:25,v=Math.random()<.1):l<.3?Math.abs(n[0]-30)<.5&&Math.abs(n[1]+94)<.5?(d="city",h=Math.random()>.5?35:30,v=Math.random()<.35):(d="arterial",h=Math.random()>.5?50:45,v=Math.random()<.2):(d="arterial",h=Math.random()>.5?55:50,v=Math.random()<.25),{start:n,end:e,speedLimitMph:h,roadType:d,distance:l,hasTrafficSignal:v}},Nf=(n,e,o,a)=>{const l=n.speedLimitMph;let d=.95;switch(n.roadType){case"highway":d=.98;break;case"arterial":d=.96;break;case"city":d=.92;break;case"residential":d=.9;break}const h=l*d,v=Qf(o),y=G_(e,n.roadType),_=h*v*y;let x=!1,E=0,M=null;n.hasTrafficSignal&&a>45&&Math.random()<.5&&(x=!0,M=n.roadType==="residential"?"stop_sign":"traffic_light",M==="traffic_light"?E=20+Math.random()*55:E=3+Math.random()*5);const R=new Date().getHours();return(R>=7&&R<=9||R>=16&&R<=19)&&n.roadType==="city"&&!x&&a>60&&Math.random()<.25&&(x=!0,M="traffic_light",E=35+Math.random()*40),{baseSpeedMph:l,driverSpeedMph:h,adjustedSpeedMph:_,shouldStop:x,stopDuration:E,stopReason:M}},Z_=(n,e,o)=>{if(Math.abs(n-e)<1)return e;const d=o*(n<e?3:5);return n<e?Math.min(n+d,e):Math.max(n-d,e)},Y_=n=>{const e=(Math.random()-.5)*6;return Math.max(0,n+e)},Iw=Object.freeze(Object.defineProperty({__proto__:null,addSpeedVariation:Y_,analyzeRoadSegment:F_,applyAcceleration:Z_,calculateRealisticSpeed:Nf},Symbol.toStringTag,{value:"Module"})),sl=async n=>{if(n.length<2)return{path:n,segments:[],totalDistance:0,baseDuration:0};try{const l=n.map(h=>`${h[1]},${h[0]}`).join(";"),d=["https://routing.openstreetmap.de/routed-car/route/v1/driving","https://router.project-osrm.org/route/v1/driving"];for(const h of d)try{const v=`${h}/${l}?overview=full&geometries=geojson&steps=true`;console.log(` Trying OSRM server: ${h}`);const y=new AbortController,_=setTimeout(()=>y.abort(),1e4),x=await fetch(v,{signal:y.signal});clearTimeout(_);const E=await x.json();if(E.code==="Ok"&&E.routes&&E.routes.length>0){const M=E.routes[0];console.log(` Successfully got route from ${h}`);const R=M.geometry.coordinates.map(H=>[H[1],H[0]]),O=[];for(let H=0;H<R.length-1;H++){const I=F_(R[H],R[H+1],H,R.length-1);O.push(I)}const P=M.distance*621371e-9;return{path:R,segments:O,totalDistance:P,baseDuration:M.duration}}}catch(v){console.warn(` Server ${h} failed:`,v)}}catch(l){console.error("OSRM routing error:",l)}console.warn(" All OSRM servers failed, using interpolated fallback route");const e=[],o=[];for(let l=0;l<n.length-1;l++){const d=n[l],h=n[l+1];l===0&&e.push(d);const v=d[0]*Math.PI/180,y=h[0]*Math.PI/180,_=(h[0]-d[0])*Math.PI/180,x=(h[1]-d[1])*Math.PI/180,E=Math.sin(_/2)*Math.sin(_/2)+Math.cos(v)*Math.cos(y)*Math.sin(x/2)*Math.sin(x/2),R=3959*(2*Math.atan2(Math.sqrt(E),Math.sqrt(1-E))),O=Math.max(2,Math.floor(R/5));for(let P=1;P<=O;P++){const H=P/O,I=d[0]+(h[0]-d[0])*H,q=d[1]+(h[1]-d[1])*H,B=d[0]+(h[0]-d[0])*((P-1)/O),ee=d[1]+(h[1]-d[1])*((P-1)/O);if(e.push([I,q]),P<O||l<n.length-1){const j=R/O;o.push({start:[B,ee],end:[I,q],roadType:"highway",speedLimitMph:70,distance:j,hasTrafficSignal:!1})}}}const a=o.reduce((l,d)=>l+d.distance,0);return{path:e,segments:o,totalDistance:a,baseDuration:a/60*3600}};async function Dw(n){try{const e="http://localhost:8000",o={currentLocation:{lat:n.currentLocation[0],lng:n.currentLocation[1]},stops:n.stops.map(l=>({id:l.id,name:l.name,location:{lat:l.location[0],lng:l.location[1]},unloadingTimeMinutes:l.unloadingTimeMinutes||0})),currentSpeed:n.currentSpeed,trafficData:{congestionLevel:n.trafficData.status,currentSpeed:n.trafficData.currentSpeed,freeFlowSpeed:n.trafficData.normalSpeed},weatherData:{description:n.weatherData.description||n.weatherData.condition,temperature:n.weatherData.temperature,windSpeed:0},timeOfDay:n.timeOfDay,dayOfWeek:n.dayOfWeek,historicalData:n.historicalData},a=await fetch(`${e}/api/eta/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(5e3)});return a.ok?await a.json():(console.warn("ML ETA prediction failed:",a.status),null)}catch(e){return console.warn("ML ETA service unavailable, using fallback:",e),null}}function Lw(n,e,o,a,l=0){let d=0,h=0,v=0;if(e.length===0)d=n/96.5604*60;else for(const y of e){const _=y.distance;let x=y.speedLimitMph||60;const E=Pw(o),M=Uw(a),R=x;x*=E*M;const O=x*1.60934,P=_/O*60;d+=P;const H=_/(R*1.60934)*60,I=P-H;E<1&&(h+=I*.7),M<1&&(v+=I*.3)}return{eta:d+l,breakdown:{baseTime:d-h-v,trafficDelay:h,weatherDelay:v,unloadingTime:l,bufferTime:0}}}function Pw(n){if(!n)return 1;switch(n.status){case"Heavy":return .5;case"Moderate":return .75;case"Light":return .9;default:return 1}}function Uw(n){var o;if(!n)return 1;const e=((o=n.description)==null?void 0:o.toLowerCase())||"";return e.includes("storm")||e.includes("heavy rain")?.6:e.includes("rain")||e.includes("snow")?.8:e.includes("fog")||e.includes("mist")?.85:1}async function zw(n,e,o,a,l,d,h){const v=new Date,y=v.toTimeString().substring(0,5),_=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][v.getDay()],E=await Dw({currentLocation:n,stops:[e],currentSpeed:l,trafficData:d,weatherData:h,timeOfDay:y,dayOfWeek:_}),M=Lw(a,o,d,h,0);if(E&&E.predictions.length>0){const R=E.predictions[0],O=R.confidence>.7?.6:.4,P=1-O;return Math.round(R.estimatedArrivalMinutes*O+M.eta*P)}return Math.round(M.eta)}const us=(n,e)=>{const a=n[0]*(Math.PI/180),l=e[0]*(Math.PI/180),d=l-a,h=(e[1]-n[1])*(Math.PI/180);return 2*3958.8*Math.asin(Math.sqrt(Math.sin(d/2)*Math.sin(d/2)+Math.cos(a)*Math.cos(l)*Math.sin(h/2)*Math.sin(h/2)))},J_=(n,e,o)=>{const[a,l]=D.useState(n),[d,h]=D.useState(n.currentLocation||n.origin.location),[v,y]=D.useState(0),[_,x]=D.useState(wn.HIGH),[E,M]=D.useState(null),[R,O]=D.useState(null),[P,H]=D.useState(null),[I,q]=D.useState(!0),[B,ee]=D.useState(0),[j,X]=D.useState([]),[Y,oe]=D.useState([]),[le,pe]=D.useState(0),[me,ne]=D.useState(new Date),[Pe,ve]=D.useState(new Date(Date.now()+6e4)),Ge=D.useRef(0),[Z,ue]=D.useState(0),[de,Fe]=D.useState(!1),[_e,z]=D.useState(0),[$,fe]=D.useState(!1),[he,ye]=D.useState(0),[ge,Ae]=D.useState(null),Ie=D.useMemo(()=>[a.origin,...a.longHaulStops||[],a.hub,...a.lastMileStops],[a]),Oe=D.useMemo(()=>{var Be;return 1+(((Be=a.longHaulStops)==null?void 0:Be.length)||0)},[a.longHaulStops]);D.useEffect(()=>{(async()=>{try{console.log(" Fetching OSRM route..."),console.log(" Full Route Stops:",Ie.map((Xe,Ye)=>`${Ye}: ${Xe.name} (${Xe.id})`));const Ue=Ie.map(Xe=>Xe.location),Le=await sl(Ue);if(console.log(" OSRM route loaded:",{pathPoints:Le.path.length,segments:Le.segments.length}),X(Le.path),oe(Le.segments),Le.path.length>0&&d){let Xe=0,Ye=1/0;for(let St=0;St<Le.path.length;St++){const tt=us(d,Le.path[St]);tt<Ye&&(Ye=tt,Xe=St)}ee(Xe),console.log(` Truck repositioned to index ${Xe} on new route`)}q(!1)}catch(Ue){console.error(" Failed to fetch OSRM route:",Ue),q(!1)}})()},[Ie]);const Ee=D.useMemo(()=>{if(j.length===0)return new Map;const Be=new Map;return Ie.forEach(Ue=>{let Le=-1,Xe=1/0;j.forEach((Ye,St)=>{const tt=us(Ue.location,Ye);tt<Xe&&(Xe=tt,Le=St)}),Le!==-1&&Be.set(Ue.id,Le)}),Be},[Ie,j]),sn=D.useCallback(async()=>{console.log(" Updating weather and traffic data...");const Be=new Date;ne(Be),ve(new Date(Be.getTime()+6e4)),Ge.current=0;let Ue=null,Le=null;try{Ue=await Xf(d),O(Ue),console.log(" Weather data updated:",Ue)}catch(tt){console.error(" Failed to fetch weather data:",tt),O(null)}try{Le=await Wf(d),M(Le),console.log(" Traffic data updated:",Le)}catch(tt){console.error(" Failed to fetch traffic data:",tt),M(null)}const Xe=a.currentLegIndex+1,Ye=Ie[Xe];let St=0;if(Ye&&j.length>B){const tt=Array.from(Ee.values())[Xe];if(tt!==void 0)for(let an=B;an<tt&&an<j.length-1;an++)St+=us(j[an],j[an+1])}if(St>0&&Ue&&Le){const tt=q_(Ue,St),an=V_(Le,St,"arterial"),Jt=tt+an;if(console.log(" Delay calculation:",{distanceToNextStop:St,weatherDelay:tt,trafficDelay:an,totalDelay:Jt}),Jt>5){const ze=Date.now()+Jt*60*1e3,Ut=Ge.current,rn=Ut>0?Math.round((ze-Ut)/(60*1e3)):0;let Ft=wn.HIGH;if(Jt>20&&(Ft=wn.MEDIUM),Jt>40&&(Ft=wn.LOW),Math.abs(rn)>30&&(Ft=wn.LOW),Math.abs(rn)>5||!P){let wt=[];Le.status!=="Light"&&wt.push(`${Le.status} traffic`),Ue.condition!=="Clear"&&wt.push(`${Ue.condition} conditions`);const Kt=wt.length>0?wt.join(" and "):"current road conditions",gn=Le.currentSpeed&&Le.normalSpeed?{current:Le.currentSpeed,normal:Le.normalSpeed}:void 0,dt=await pw(Jt,Kt,Ft,rn>0?rn:void 0,Ut>0?Ut:void 0,ze,gn);H(dt)}x(Ft),l(wt=>({...wt,status:ei.DELAYED}))}else H(null),x(wn.HIGH)}else H(null),x(wn.HIGH)},[d]);D.useEffect(()=>{sn()},[]),D.useEffect(()=>{(async()=>{if(!a)return;console.log(" Calculating unloading times with Gemini...");const Ue=[a.origin,...a.longHaulStops||[],a.hub,...a.lastMileStops].filter(Boolean),Le=await vw(Ue,a.shipmentItems);l(Xe=>{const Ye=St=>({...St,unloadingTimeMinutes:Le[St.id]||St.unloadingTimeMinutes||0});return{...Xe,origin:Ye(Xe.origin),hub:Ye(Xe.hub),longHaulStops:(Xe.longHaulStops||[]).map(Ye),lastMileStops:Xe.lastMileStops.map(Ye)}})})()},[]);const nt=D.useRef({shipment:a,truckPosition:d,pathIndex:B,currentSpeed:le,timeSinceLastStop:Z,isCurrentlyStopped:de,stopTimeRemaining:_e,isUnloading:$,unloadingTimeRemaining:he,currentUnloadingStop:ge});nt.current={shipment:a,truckPosition:d,pathIndex:B,currentSpeed:le,timeSinceLastStop:Z,isCurrentlyStopped:de,stopTimeRemaining:_e,isUnloading:$,unloadingTimeRemaining:he,currentUnloadingStop:ge},D.useEffect(()=>{if(j.length===0)return;q(!1);const Ue=setInterval(async()=>{await sn();const{shipment:Le,truckPosition:Xe,pathIndex:Ye,currentSpeed:St,timeSinceLastStop:tt,isCurrentlyStopped:an,stopTimeRemaining:Jt}=nt.current;if(Le.status===ei.DELIVERED||Ye>=j.length-1){clearInterval(Ue),Le.status!==ei.DELIVERED&&l(He=>({...He,status:ei.DELIVERED}));return}let ze={...Le};const Ut=gg/1e3;if(nt.current.isUnloading&&nt.current.unloadingTimeRemaining>0){const He=Math.max(0,nt.current.unloadingTimeRemaining-Ut);if(ye(He),console.log(" Unloading in progress:",{stopId:nt.current.currentUnloadingStop,timeRemaining:Math.round(He/60)}),He===0){console.log(" Unloading complete at stop:",nt.current.currentUnloadingStop),fe(!1),Ae(null);const it=nt.current.currentUnloadingStop;it&&(ze.longHaulStops=ze.longHaulStops.map(we=>we.id===it?{...we,status:"Completed"}:we),ze.lastMileStops=ze.lastMileStops.map(we=>we.id===it?{...we,status:"Completed"}:we),l(ze))}return}if(an&&Jt>0){const He=Math.max(0,Jt-Ut);z(He),ue(0),He===0&&(Fe(!1),pe(0));return}const rn=Y.length>0?Y[Math.min(Ye,Y.length-1)]:{roadType:"primary"};let Ft,wt=!1;if(E&&E.currentSpeed!==void 0&&E.currentSpeed>0){if(console.log(" Using real TomTom speed:",E.currentSpeed,"mph"),Ft=E.currentSpeed,wt=!0,R){const He=R.condition==="Storm"?.55:R.condition==="Rain"?.75:1;Ft=Ft*He}}else{const He=Nf(rn,E,R,tt);if(He.shouldStop&&!an){Fe(!0),z(He.stopDuration),pe(0);return}Ft=Y_(He.adjustedSpeedMph)}const Kt=wt?Ft:Z_(St,Ft,Ut);pe(Kt);const gn=Kt*Ut/3600;console.log(" Truck movement:",{newSpeed:Math.round(Kt),travelDistance:gn.toFixed(4),usingRealTrafficSpeed:wt,trafficSpeed:E==null?void 0:E.currentSpeed});let dt=Ye,ce=Xe,Te=gn;for(;Te>0&&dt<j.length-1;){const He=ce,it=j[dt+1],we=us(He,it);if(Te>=we)Te-=we,dt++,ce=j[dt];else{const ht=Te/we,Qe=He[0]+(it[0]-He[0])*ht,Ct=He[1]+(it[1]-He[1])*ht;ce=[Qe,Ct],Te=0}}h(ce),ee(dt),ue(tt+Ut);const be=Ie[ze.currentLegIndex+1];if(be){const He=Ee.get(be.id);if(He!==void 0&&dt>=He&&ze.currentLegIndex<Ie.length-2){const it=ze.currentLegIndex+1,we=Ie[it];if(console.log(" Reached stop:",we.name,"Type:",we.type),(we.type==="Delivery"||ze.lastMileStops.some(Qe=>Qe.id===we.id))&&!nt.current.isUnloading){console.log(" Starting unloading at:",we.name);const Qe=ze.shipmentItems.filter(Ct=>Ct.destinationStopId===we.id);if(Qe.length>0){const Ct=Qe[0],Bt=Qe.reduce((mt,$e)=>mt+$e.quantity,0);console.log(" Predicting unloading time for:",Ct.contents,"Quantity:",Bt),gw(Ct.contents,Bt).then(mt=>{console.log(" Predicted unloading time:",mt,"minutes"),ze.lastMileStops=ze.lastMileStops.map($e=>$e.id===we.id?{...$e,status:"Unloading",unloadingTimeMinutes:mt}:$e),l(ze),fe(!0),ye(mt*60),Ae(we.id)}).catch(mt=>{console.error("Error predicting unloading time:",mt);const $e=10;ze.lastMileStops=ze.lastMileStops.map(en=>en.id===we.id?{...en,status:"Unloading",unloadingTimeMinutes:$e}:en),l(ze),fe(!0),ye($e*60),Ae(we.id)})}}else ze.longHaulStops=ze.longHaulStops.map(Qe=>Qe.id===we.id?{...Qe,status:"Completed"}:Qe),ze.hub.id===we.id&&(ze.hub={...ze.hub,status:"Completed"});P===null&&(it<Oe?ze.status=ei.IN_TRANSIT_LONG_HAUL:it===Oe?ze.status=ei.AT_HUB:ze.status=ei.IN_TRANSIT_LAST_MILE),ze.currentLegIndex=it}}ze.status===ei.PENDING&&(ze.status=ei.IN_TRANSIT_LONG_HAUL),ze.currentLocation=ce,l(ze);const Et=Date.now();Ge.current=Et,console.log(" Recalculating ETA with latest traffic/weather:",{newSpeed:Kt,traffic:E==null?void 0:E.status,weather:R==null?void 0:R.condition,nextPathIndex:dt,roadSegmentsCount:Y.length});const Tt=Ie[ze.currentLegIndex+1];if(console.log(" ETA Stop Check:",{currentLegIndex:ze.currentLegIndex,nextStopIndex:ze.currentLegIndex+1,totalStops:Ie.length,etaStop:Tt==null?void 0:Tt.name,allStops:Ie.map(He=>He.name)}),Tt){const He=Ee.get(Tt.id);if(console.log(" ETA Stop Path Index:",{stopId:Tt.id,stopName:Tt.name,pathIndex:He,stopPathIndicesSize:Ee.size,allIndices:Array.from(Ee.entries())}),He!==void 0){let it=us(ce,j[dt]);for(let $e=dt;$e<He&&$e<j.length-1;$e++)it+=us(j[$e],j[$e+1]);if(Kt>0){const $e=Math.min(it,1);if(Math.max(0,it-$e)>0){let Zt=0,kn=0;if(wt&&E&&E.currentSpeed)E.currentSpeed,R&&(R.condition==="Storm"||R.condition);else for(let ln=dt;ln<He&&ln<Y.length;ln++){const Tn=Y[ln],Xt=Nf(Tn,E,R,0);Zt+=Tn.distance,kn+=Xt.adjustedSpeedMph*Tn.distance}}}const we=await zw(ce,Tt,Y.slice(dt,He),it,Kt,E||{},R||{});let ht=0;const Qe=Ie[ze.currentLegIndex];(Qe?ze.lastMileStops.some($e=>$e.id===Qe.id):!1)&&nt.current.currentUnloadingStop===(Qe==null?void 0:Qe.id)&&nt.current.unloadingTimeRemaining>0&&(ht=Math.ceil(nt.current.unloadingTimeRemaining/60));const Bt=we+ht;console.log(" ETA Breakdown:",{stopName:Tt.name,roadTravelEta:we,unloadingTime:ht,totalEta:Bt,remainingDistance:it,newSpeed:Kt,usingRealTrafficSpeed:wt,trafficCurrentSpeed:E==null?void 0:E.currentSpeed,weatherCondition:R==null?void 0:R.condition}),y(Bt),l($e=>({...$e,currentEta:new Date(Date.now()+Bt*6e4).toISOString()}));let mt=wn.HIGH;(R==null?void 0:R.condition)==="Storm"||(E==null?void 0:E.status)==="Heavy"?mt=wn.LOW:((R==null?void 0:R.condition)==="Rain"||(E==null?void 0:E.status)==="Moderate")&&(mt=wn.MEDIUM),x(mt)}else{console.warn(" ETA Stop Path Index not found for stop:",Tt.name);const it=us(ce,Tt.location),we=Kt>0?Kt:30,ht=Math.round(it/we*60);let Qe=0;const Ct=Ie[ze.currentLegIndex];(Ct?ze.lastMileStops.some($e=>$e.id===Ct.id):!1)&&nt.current.currentUnloadingStop===(Ct==null?void 0:Ct.id)&&nt.current.unloadingTimeRemaining>0&&(Qe=Math.ceil(nt.current.unloadingTimeRemaining/60));const mt=ht+Qe;console.log(" Using fallback ETA calculation:",{straightLineDistance:it.toFixed(2),fallbackSpeed:we,roadEta:ht,unloadingTime:Qe,totalFallbackEta:mt}),y(mt),l($e=>({...$e,currentEta:new Date(Date.now()+mt*6e4).toISOString()}))}}else console.warn(" No next stop found for ETA calculation"),y(0)},gg);return()=>clearInterval(Ue)},[j,Ee,Ie,P,Oe,sn]);const bn=D.useMemo(()=>{if(e===Vt.MANAGER)return!0;if(e===Vt.SUPPLIER)return a.currentLegIndex<Oe;if(e===Vt.RECIPIENT){const Be=Ie.findIndex(Ue=>Ue.id===o);return a.currentLegIndex>=Oe&&Be!==-1&&a.currentLegIndex<=Be}return!1},[e,a.currentLegIndex,o,Ie,Oe]),{visibleStops:Ne,visiblePath:Ot}=D.useMemo(()=>{if(e===Vt.MANAGER)return{visibleStops:Ie,visiblePath:j};if(e===Vt.SUPPLIER){const Be=Ie.slice(0,Oe+1),Ue=Ee.get(Be[Be.length-1].id)||0,Le=j.slice(0,Ue+1);return{visibleStops:Be,visiblePath:Le}}if(e===Vt.RECIPIENT){const Be=Ie.findIndex(Ue=>Ue.id===o);if(Be>-1){const Ue=Ie.slice(Oe,Be+1),Le=Ee.get(Ue[0].id)||0,Xe=Ee.get(Ue[Ue.length-1].id)||0,Ye=j.slice(Le,Xe+1);return{visibleStops:Ue,visiblePath:Ye}}}return{visibleStops:[],visiblePath:[]}},[e,Ie,j,o,Oe,Ee]),pn=D.useCallback(Be=>{console.log(" Updating stop sequence in simulation:",Be.map(Ue=>Ue.id)),l(Ue=>({...Ue,lastMileStops:Be}))},[]),ni=D.useCallback((Be,Ue)=>{console.log(" Switching to new route from current truck position"),console.log(`Current position: [${d[0].toFixed(4)}, ${d[1].toFixed(4)}]`),console.log(`New route has ${Be.length} points`);let Le=0,Xe=1/0;for(let Ye=0;Ye<Be.length;Ye++){const St=us(d,Be[Ye]);St<Xe&&(Xe=St,Le=Ye)}console.log(`Closest point on new route: index ${Le} (${Xe.toFixed(3)} miles away)`),X(Be),oe(Ue),ee(Le),h(Be[Le]),console.log(` Route switched! Truck will now follow new path from index ${Le}`)},[d]);return D.useEffect(()=>{if(e!==Vt.MANAGER&&n){if(l(n),n.currentLocation&&h(n.currentLocation),n.currentEta){const Be=new Date(n.currentEta),Ue=new Date,Le=(Be.getTime()-Ue.getTime())/6e4;y(Le)}ne(new Date)}},[n,e]),{shipment:a,truckPosition:d,eta:v,confidence:_,traffic:E,weather:R,delayReason:P,isLoading:I,isVisible:bn,visibleStops:Ne,visiblePath:Ot,lastApiUpdate:me,nextApiUpdate:Pe,currentSpeed:le,isUnloading:$,unloadingTimeRemaining:he,currentUnloadingStop:ge,switchRoute:ni,updateStopSequence:pn}};function K_(n,e){const o=D.useRef(e);D.useEffect(function(){e!==o.current&&n.attributionControl!=null&&(o.current!=null&&n.attributionControl.removeAttribution(o.current),e!=null&&n.attributionControl.addAttribution(e)),o.current=e},[n,e])}var Ba=h_();const kw=1;function Hw(n){return Object.freeze({__version:kw,map:n})}function X_(n,e){return Object.freeze({...n,...e})}const $f=D.createContext(null);function rc(){const n=D.use($f);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function Q_(n){function e(o,a){const{instance:l,context:d}=n(o).current;D.useImperativeHandle(a,()=>l);const{children:h}=o;return h==null?null:on.createElement($f,{value:d},h)}return D.forwardRef(e)}function Ow(n){function e(o,a){const[l,d]=D.useState(!1),{instance:h}=n(o,d).current;D.useImperativeHandle(a,()=>h),D.useEffect(function(){l&&h.update()},[h,l,o.children]);const v=h._contentNode;return v?Ba.createPortal(o.children,v):null}return D.forwardRef(e)}function Bw(n){function e(o,a){const{instance:l}=n(o).current;return D.useImperativeHandle(a,()=>l),null}return D.forwardRef(e)}function jf(n,e){const o=D.useRef(void 0);D.useEffect(function(){return e!=null&&n.instance.on(e),o.current=e,function(){o.current!=null&&n.instance.off(o.current),o.current=null}},[n,e])}function lc(n,e){const o=n.pane??e.pane;return o?{...n,pane:o}:n}function qw(n,e){return function(a,l){const d=rc(),h=n(lc(a,d),d);return K_(d.map,a.attribution),jf(h.current,a.eventHandlers),e(h.current,d,a,l),h}}var il={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Gw=il.exports,Gv;function Vw(){return Gv||(Gv=1,(function(n,e){(function(o,a){a(e)})(Gw,(function(o){var a="1.9.4";function l(s){var u,p,T,C;for(p=1,T=arguments.length;p<T;p++){C=arguments[p];for(u in C)s[u]=C[u]}return s}var d=Object.create||(function(){function s(){}return function(u){return s.prototype=u,new s}})();function h(s,u){var p=Array.prototype.slice;if(s.bind)return s.bind.apply(s,p.call(arguments,1));var T=p.call(arguments,2);return function(){return s.apply(u,T.length?T.concat(p.call(arguments)):arguments)}}var v=0;function y(s){return"_leaflet_id"in s||(s._leaflet_id=++v),s._leaflet_id}function _(s,u,p){var T,C,b,U;return U=function(){T=!1,C&&(b.apply(p,C),C=!1)},b=function(){T?C=arguments:(s.apply(p,arguments),setTimeout(U,u),T=!0)},b}function x(s,u,p){var T=u[1],C=u[0],b=T-C;return s===T&&p?s:((s-C)%b+b)%b+C}function E(){return!1}function M(s,u){if(u===!1)return s;var p=Math.pow(10,u===void 0?6:u);return Math.round(s*p)/p}function R(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function O(s){return R(s).split(/\s+/)}function P(s,u){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?d(s.options):{});for(var p in u)s.options[p]=u[p];return s.options}function H(s,u,p){var T=[];for(var C in s)T.push(encodeURIComponent(p?C.toUpperCase():C)+"="+encodeURIComponent(s[C]));return(!u||u.indexOf("?")===-1?"?":"&")+T.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function q(s,u){return s.replace(I,function(p,T){var C=u[T];if(C===void 0)throw new Error("No value provided for variable "+p);return typeof C=="function"&&(C=C(u)),C})}var B=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ee(s,u){for(var p=0;p<s.length;p++)if(s[p]===u)return p;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function X(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var Y=0;function oe(s){var u=+new Date,p=Math.max(0,16-(u-Y));return Y=u+p,window.setTimeout(s,p)}var le=window.requestAnimationFrame||X("RequestAnimationFrame")||oe,pe=window.cancelAnimationFrame||X("CancelAnimationFrame")||X("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function me(s,u,p){if(p&&le===oe)s.call(u);else return le.call(window,h(s,u))}function ne(s){s&&pe.call(window,s)}var Pe={__proto__:null,extend:l,create:d,bind:h,get lastId(){return v},stamp:y,throttle:_,wrapNum:x,falseFn:E,formatNum:M,trim:R,splitWords:O,setOptions:P,getParamString:H,template:q,isArray:B,indexOf:ee,emptyImageUrl:j,requestFn:le,cancelFn:pe,requestAnimFrame:me,cancelAnimFrame:ne};function ve(){}ve.extend=function(s){var u=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,T=d(p);T.constructor=u,u.prototype=T;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(u[C]=this[C]);return s.statics&&l(u,s.statics),s.includes&&(Ge(s.includes),l.apply(null,[T].concat(s.includes))),l(T,s),delete T.statics,delete T.includes,T.options&&(T.options=p.options?d(p.options):{},l(T.options,s.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,U=T._initHooks.length;b<U;b++)T._initHooks[b].call(this)}},u},ve.include=function(s){var u=this.prototype.options;return l(this.prototype,s),s.options&&(this.prototype.options=u,this.mergeOptions(s.options)),this},ve.mergeOptions=function(s){return l(this.prototype.options,s),this},ve.addInitHook=function(s){var u=Array.prototype.slice.call(arguments,1),p=typeof s=="function"?s:function(){this[s].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function Ge(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=B(s)?s:[s];for(var u=0;u<s.length;u++)s[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(s,u,p){if(typeof s=="object")for(var T in s)this._on(T,s[T],u);else{s=O(s);for(var C=0,b=s.length;C<b;C++)this._on(s[C],u,p)}return this},off:function(s,u,p){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var T in s)this._off(T,s[T],u);else{s=O(s);for(var C=arguments.length===1,b=0,U=s.length;b<U;b++)C?this._off(s[b]):this._off(s[b],u,p)}return this},_on:function(s,u,p,T){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(s,u,p)===!1){p===this&&(p=void 0);var C={fn:u,ctx:p};T&&(C.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(C)}},_off:function(s,u,p){var T,C,b;if(this._events&&(T=this._events[s],!!T)){if(arguments.length===1){if(this._firingCount)for(C=0,b=T.length;C<b;C++)T[C].fn=E;delete this._events[s];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var U=this._listens(s,u,p);if(U!==!1){var F=T[U];this._firingCount&&(F.fn=E,this._events[s]=T=T.slice()),T.splice(U,1)}}},fire:function(s,u,p){if(!this.listens(s,p))return this;var T=l({},u,{type:s,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var C=this._events[s];if(C){this._firingCount=this._firingCount+1||1;for(var b=0,U=C.length;b<U;b++){var F=C[b],Q=F.fn;F.once&&this.off(s,Q,F.ctx),Q.call(F.ctx||this,T)}this._firingCount--}}return p&&this._propagateEvent(T),this},listens:function(s,u,p,T){typeof s!="string"&&console.warn('"string" type argument expected');var C=u;typeof u!="function"&&(T=!!u,C=void 0,p=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,C,p)!==!1)return!0;if(T){for(var U in this._eventParents)if(this._eventParents[U].listens(s,u,p,T))return!0}return!1},_listens:function(s,u,p){if(!this._events)return!1;var T=this._events[s]||[];if(!u)return!!T.length;p===this&&(p=void 0);for(var C=0,b=T.length;C<b;C++)if(T[C].fn===u&&T[C].ctx===p)return C;return!1},once:function(s,u,p){if(typeof s=="object")for(var T in s)this._on(T,s[T],u,!0);else{s=O(s);for(var C=0,b=s.length;C<b;C++)this._on(s[C],u,p,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[y(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[y(s)],this},_propagateEvent:function(s){for(var u in this._eventParents)this._eventParents[u].fire(s.type,l({layer:s.target,propagatedFrom:s.target},s),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var ue=ve.extend(Z);function de(s,u,p){this.x=p?Math.round(s):s,this.y=p?Math.round(u):u}var Fe=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};de.prototype={clone:function(){return new de(this.x,this.y)},add:function(s){return this.clone()._add(_e(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(_e(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new de(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new de(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Fe(this.x),this.y=Fe(this.y),this},distanceTo:function(s){s=_e(s);var u=s.x-this.x,p=s.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(s){return s=_e(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=_e(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+M(this.x)+", "+M(this.y)+")"}};function _e(s,u,p){return s instanceof de?s:B(s)?new de(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new de(s.x,s.y):new de(s,u,p)}function z(s,u){if(s)for(var p=u?[s,u]:s,T=0,C=p.length;T<C;T++)this.extend(p[T])}z.prototype={extend:function(s){var u,p;if(!s)return this;if(s instanceof de||typeof s[0]=="number"||"x"in s)u=p=_e(s);else if(s=$(s),u=s.min,p=s.max,!u||!p)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=p.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(s){return _e((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return _e(this.min.x,this.max.y)},getTopRight:function(){return _e(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var u,p;return typeof s[0]=="number"||s instanceof de?s=_e(s):s=$(s),s instanceof z?(u=s.min,p=s.max):u=p=s,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(s){s=$(s);var u=this.min,p=this.max,T=s.min,C=s.max,b=C.x>=u.x&&T.x<=p.x,U=C.y>=u.y&&T.y<=p.y;return b&&U},overlaps:function(s){s=$(s);var u=this.min,p=this.max,T=s.min,C=s.max,b=C.x>u.x&&T.x<p.x,U=C.y>u.y&&T.y<p.y;return b&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var u=this.min,p=this.max,T=Math.abs(u.x-p.x)*s,C=Math.abs(u.y-p.y)*s;return $(_e(u.x-T,u.y-C),_e(p.x+T,p.y+C))},equals:function(s){return s?(s=$(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function $(s,u){return!s||s instanceof z?s:new z(s,u)}function fe(s,u){if(s)for(var p=u?[s,u]:s,T=0,C=p.length;T<C;T++)this.extend(p[T])}fe.prototype={extend:function(s){var u=this._southWest,p=this._northEast,T,C;if(s instanceof ye)T=s,C=s;else if(s instanceof fe){if(T=s._southWest,C=s._northEast,!T||!C)return this}else return s?this.extend(ge(s)||he(s)):this;return!u&&!p?(this._southWest=new ye(T.lat,T.lng),this._northEast=new ye(C.lat,C.lng)):(u.lat=Math.min(T.lat,u.lat),u.lng=Math.min(T.lng,u.lng),p.lat=Math.max(C.lat,p.lat),p.lng=Math.max(C.lng,p.lng)),this},pad:function(s){var u=this._southWest,p=this._northEast,T=Math.abs(u.lat-p.lat)*s,C=Math.abs(u.lng-p.lng)*s;return new fe(new ye(u.lat-T,u.lng-C),new ye(p.lat+T,p.lng+C))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof ye||"lat"in s?s=ge(s):s=he(s);var u=this._southWest,p=this._northEast,T,C;return s instanceof fe?(T=s.getSouthWest(),C=s.getNorthEast()):T=C=s,T.lat>=u.lat&&C.lat<=p.lat&&T.lng>=u.lng&&C.lng<=p.lng},intersects:function(s){s=he(s);var u=this._southWest,p=this._northEast,T=s.getSouthWest(),C=s.getNorthEast(),b=C.lat>=u.lat&&T.lat<=p.lat,U=C.lng>=u.lng&&T.lng<=p.lng;return b&&U},overlaps:function(s){s=he(s);var u=this._southWest,p=this._northEast,T=s.getSouthWest(),C=s.getNorthEast(),b=C.lat>u.lat&&T.lat<p.lat,U=C.lng>u.lng&&T.lng<p.lng;return b&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,u){return s?(s=he(s),this._southWest.equals(s.getSouthWest(),u)&&this._northEast.equals(s.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(s,u){return s instanceof fe?s:new fe(s,u)}function ye(s,u,p){if(isNaN(s)||isNaN(u))throw new Error("Invalid LatLng object: ("+s+", "+u+")");this.lat=+s,this.lng=+u,p!==void 0&&(this.alt=+p)}ye.prototype={equals:function(s,u){if(!s)return!1;s=ge(s);var p=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return p<=(u===void 0?1e-9:u)},toString:function(s){return"LatLng("+M(this.lat,s)+", "+M(this.lng,s)+")"},distanceTo:function(s){return Ie.distance(this,ge(s))},wrap:function(){return Ie.wrapLatLng(this)},toBounds:function(s){var u=180*s/40075017,p=u/Math.cos(Math.PI/180*this.lat);return he([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function ge(s,u,p){return s instanceof ye?s:B(s)&&typeof s[0]!="object"?s.length===3?new ye(s[0],s[1],s[2]):s.length===2?new ye(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new ye(s.lat,"lng"in s?s.lng:s.lon,s.alt):u===void 0?null:new ye(s,u,p)}var Ae={latLngToPoint:function(s,u){var p=this.projection.project(s),T=this.scale(u);return this.transformation._transform(p,T)},pointToLatLng:function(s,u){var p=this.scale(u),T=this.transformation.untransform(s,p);return this.projection.unproject(T)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(s),T=this.transformation.transform(u.min,p),C=this.transformation.transform(u.max,p);return new z(T,C)},infinite:!1,wrapLatLng:function(s){var u=this.wrapLng?x(s.lng,this.wrapLng,!0):s.lng,p=this.wrapLat?x(s.lat,this.wrapLat,!0):s.lat,T=s.alt;return new ye(p,u,T)},wrapLatLngBounds:function(s){var u=s.getCenter(),p=this.wrapLatLng(u),T=u.lat-p.lat,C=u.lng-p.lng;if(T===0&&C===0)return s;var b=s.getSouthWest(),U=s.getNorthEast(),F=new ye(b.lat-T,b.lng-C),Q=new ye(U.lat-T,U.lng-C);return new fe(F,Q)}},Ie=l({},Ae,{wrapLng:[-180,180],R:6371e3,distance:function(s,u){var p=Math.PI/180,T=s.lat*p,C=u.lat*p,b=Math.sin((u.lat-s.lat)*p/2),U=Math.sin((u.lng-s.lng)*p/2),F=b*b+Math.cos(T)*Math.cos(C)*U*U,Q=2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F));return this.R*Q}}),Oe=6378137,Ee={R:Oe,MAX_LATITUDE:85.0511287798,project:function(s){var u=Math.PI/180,p=this.MAX_LATITUDE,T=Math.max(Math.min(p,s.lat),-p),C=Math.sin(T*u);return new de(this.R*s.lng*u,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(s){var u=180/Math.PI;return new ye((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*u,s.x*u/this.R)},bounds:(function(){var s=Oe*Math.PI;return new z([-s,-s],[s,s])})()};function sn(s,u,p,T){if(B(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=u,this._c=p,this._d=T}sn.prototype={transform:function(s,u){return this._transform(s.clone(),u)},_transform:function(s,u){return u=u||1,s.x=u*(this._a*s.x+this._b),s.y=u*(this._c*s.y+this._d),s},untransform:function(s,u){return u=u||1,new de((s.x/u-this._b)/this._a,(s.y/u-this._d)/this._c)}};function nt(s,u,p,T){return new sn(s,u,p,T)}var bn=l({},Ie,{code:"EPSG:3857",projection:Ee,transformation:(function(){var s=.5/(Math.PI*Ee.R);return nt(s,.5,-s,.5)})()}),Ne=l({},bn,{code:"EPSG:900913"});function Ot(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function pn(s,u){var p="",T,C,b,U,F,Q;for(T=0,b=s.length;T<b;T++){for(F=s[T],C=0,U=F.length;C<U;C++)Q=F[C],p+=(C?"L":"M")+Q.x+" "+Q.y;p+=u?Ce.svg?"z":"x":""}return p||"M0 0"}var ni=document.documentElement.style,Be="ActiveXObject"in window,Ue=Be&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),Xe=Xt("webkit"),Ye=Xt("android"),St=Xt("android 2")||Xt("android 3"),tt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),an=Ye&&Xt("Google")&&tt<537&&!("AudioNode"in window),Jt=!!window.opera,ze=!Le&&Xt("chrome"),Ut=Xt("gecko")&&!Xe&&!Jt&&!Be,rn=!ze&&Xt("safari"),Ft=Xt("phantom"),wt="OTransition"in ni,Kt=navigator.platform.indexOf("Win")===0,gn=Be&&"transition"in ni,dt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!St,ce="MozPerspective"in ni,Te=!window.L_DISABLE_3D&&(gn||dt||ce)&&!wt&&!Ft,be=typeof orientation<"u"||Xt("mobile"),Et=be&&Xe,Tt=be&&dt,He=!window.PointerEvent&&window.MSPointerEvent,it=!!(window.PointerEvent||He),we="ontouchstart"in window||!!window.TouchEvent,ht=!window.L_NO_TOUCH&&(we||it),Qe=be&&Jt,Ct=be&&Ut,Bt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,mt=(function(){var s=!1;try{var u=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",E,u),window.removeEventListener("testPassiveEventSupport",E,u)}catch{}return s})(),$e=(function(){return!!document.createElement("canvas").getContext})(),en=!!(document.createElementNS&&Ot("svg").createSVGRect),Zt=!!en&&(function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),kn=!en&&(function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var u=s.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}})(),ln=navigator.platform.indexOf("Mac")===0,Tn=navigator.platform.indexOf("Linux")===0;function Xt(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var Ce={ie:Be,ielt9:Ue,edge:Le,webkit:Xe,android:Ye,android23:St,androidStock:an,opera:Jt,chrome:ze,gecko:Ut,safari:rn,phantom:Ft,opera12:wt,win:Kt,ie3d:gn,webkit3d:dt,gecko3d:ce,any3d:Te,mobile:be,mobileWebkit:Et,mobileWebkit3d:Tt,msPointer:He,pointer:it,touch:ht,touchNative:we,mobileOpera:Qe,mobileGecko:Ct,retina:Bt,passiveEvents:mt,canvas:$e,svg:en,vml:kn,inlineSvg:Zt,mac:ln,linux:Tn},Gn=Ce.msPointer?"MSPointerDown":"pointerdown",Ai=Ce.msPointer?"MSPointerMove":"pointermove",Hn=Ce.msPointer?"MSPointerUp":"pointerup",un=Ce.msPointer?"MSPointerCancel":"pointercancel",xn={touchstart:Gn,touchmove:Ai,touchend:Hn,touchcancel:un},eo={touchstart:Mo,touchmove:Hi,touchend:Hi,touchcancel:Hi},ki={},gl=!1;function pc(s,u,p){return u==="touchstart"&&wo(),eo[u]?(p=eo[u].bind(this,p),s.addEventListener(xn[u],p,!1),p):(console.warn("wrong event specified:",u),E)}function vl(s,u,p){if(!xn[u]){console.warn("wrong event specified:",u);return}s.removeEventListener(xn[u],p,!1)}function ps(s){ki[s.pointerId]=s}function er(s){ki[s.pointerId]&&(ki[s.pointerId]=s)}function to(s){delete ki[s.pointerId]}function wo(){gl||(document.addEventListener(Gn,ps,!0),document.addEventListener(Ai,er,!0),document.addEventListener(Hn,to,!0),document.addEventListener(un,to,!0),gl=!0)}function Hi(s,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var p in ki)u.touches.push(ki[p]);u.changedTouches=[u],s(u)}}function Mo(s,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Qt(u),Hi(s,u)}function cn(s){var u={},p,T;for(T in s)p=s[T],u[T]=p&&p.bind?p.bind(s):p;return s=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var _l=200;function yl(s,u){s.addEventListener("dblclick",u);var p=0,T;function C(b){if(b.detail!==1){T=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var U=xs(b);if(!(U.some(function(Q){return Q instanceof HTMLLabelElement&&Q.attributes.for})&&!U.some(function(Q){return Q instanceof HTMLInputElement||Q instanceof HTMLSelectElement}))){var F=Date.now();F-p<=_l?(T++,T===2&&u(cn(b))):T=1,p=F}}}return s.addEventListener("click",C),{dblclick:u,simDblclick:C}}function no(s,u){s.removeEventListener("dblclick",u.dblclick),s.removeEventListener("click",u.simDblclick)}var Oi=_s(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gs=_s(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tr=gs==="webkitTransition"||gs==="OTransition"?gs+"End":"transitionend";function nr(s){return typeof s=="string"?document.getElementById(s):s}function vs(s,u){var p=s.style[u]||s.currentStyle&&s.currentStyle[u];if((!p||p==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(s,null);p=T?T[u]:null}return p==="auto"?null:p}function ot(s,u,p){var T=document.createElement(s);return T.className=u||"",p&&p.appendChild(T),T}function Rt(s){var u=s.parentNode;u&&u.removeChild(s)}function Vn(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function vn(s){var u=s.parentNode;u&&u.lastChild!==s&&u.appendChild(s)}function io(s){var u=s.parentNode;u&&u.firstChild!==s&&u.insertBefore(s,u.firstChild)}function ir(s,u){if(s.classList!==void 0)return s.classList.contains(u);var p=js(s);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Je(s,u){if(s.classList!==void 0)for(var p=O(u),T=0,C=p.length;T<C;T++)s.classList.add(p[T]);else if(!ir(s,u)){var b=js(s);bo(s,(b?b+" ":"")+u)}}function qt(s,u){s.classList!==void 0?s.classList.remove(u):bo(s,R((" "+js(s)+" ").replace(" "+u+" "," ")))}function bo(s,u){s.className.baseVal===void 0?s.className=u:s.className.baseVal=u}function js(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function zt(s,u){"opacity"in s.style?s.style.opacity=u:"filter"in s.style&&or(s,u)}function or(s,u){var p=!1,T="DXImageTransform.Microsoft.Alpha";try{p=s.filters.item(T)}catch{if(u===1)return}u=Math.round(u*100),p?(p.Enabled=u!==100,p.Opacity=u):s.style.filter+=" progid:"+T+"(opacity="+u+")"}function _s(s){for(var u=document.documentElement.style,p=0;p<s.length;p++)if(s[p]in u)return s[p];return!1}function wi(s,u,p){var T=u||new de(0,0);s.style[Oi]=(Ce.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(p?" scale("+p+")":"")}function Lt(s,u){s._leaflet_pos=u,Ce.any3d?wi(s,u):(s.style.left=u.x+"px",s.style.top=u.y+"px")}function Bi(s){return s._leaflet_pos||new de(0,0)}var Ro,fi,sr;if("onselectstart"in document)Ro=function(){Ve(window,"selectstart",Qt)},fi=function(){At(window,"selectstart",Qt)};else{var No=_s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ro=function(){if(No){var s=document.documentElement.style;sr=s[No],s[No]="none"}},fi=function(){No&&(document.documentElement.style[No]=sr,sr=void 0)}}function ea(){Ve(window,"dragstart",Qt)}function ys(){At(window,"dragstart",Qt)}var ta,ar;function Io(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Fn(),ta=s,ar=s.style.outlineStyle,s.style.outlineStyle="none",Ve(window,"keydown",Fn))}function Fn(){ta&&(ta.style.outlineStyle=ar,ta=void 0,ar=void 0,At(window,"keydown",Fn))}function na(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Ss(s){var u=s.getBoundingClientRect();return{x:u.width/s.offsetWidth||1,y:u.height/s.offsetHeight||1,boundingClientRect:u}}var Do={__proto__:null,TRANSFORM:Oi,TRANSITION:gs,TRANSITION_END:tr,get:nr,getStyle:vs,create:ot,remove:Rt,empty:Vn,toFront:vn,toBack:io,hasClass:ir,addClass:Je,removeClass:qt,setClass:bo,getClass:js,setOpacity:zt,testProp:_s,setTransform:wi,setPosition:Lt,getPosition:Bi,get disableTextSelection(){return Ro},get enableTextSelection(){return fi},disableImageDrag:ea,enableImageDrag:ys,preventOutline:Io,restoreOutline:Fn,getSizedParentNode:na,getScale:Ss};function Ve(s,u,p,T){if(u&&typeof u=="object")for(var C in u)oi(s,C,u[C],p);else{u=O(u);for(var b=0,U=u.length;b<U;b++)oi(s,u[b],p,T)}return this}var ii="_leaflet_events";function At(s,u,p,T){if(arguments.length===1)rr(s),delete s[ii];else if(u&&typeof u=="object")for(var C in u)Ts(s,C,u[C],p);else if(u=O(u),arguments.length===2)rr(s,function(F){return ee(u,F)!==-1});else for(var b=0,U=u.length;b<U;b++)Ts(s,u[b],p,T);return this}function rr(s,u){for(var p in s[ii]){var T=p.split(/\d/)[0];(!u||u(T))&&Ts(s,T,null,null,p)}}var oo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function oi(s,u,p,T){var C=u+y(p)+(T?"_"+y(T):"");if(s[ii]&&s[ii][C])return this;var b=function(F){return p.call(T||s,F||window.event)},U=b;!Ce.touchNative&&Ce.pointer&&u.indexOf("touch")===0?b=pc(s,u,b):Ce.touch&&u==="dblclick"?b=yl(s,b):"addEventListener"in s?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?s.addEventListener(oo[u]||u,b,Ce.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(b=function(F){F=F||window.event,Mi(s,F)&&U(F)},s.addEventListener(oo[u],b,!1)):s.addEventListener(u,U,!1):s.attachEvent("on"+u,b),s[ii]=s[ii]||{},s[ii][C]=b}function Ts(s,u,p,T,C){C=C||u+y(p)+(T?"_"+y(T):"");var b=s[ii]&&s[ii][C];if(!b)return this;!Ce.touchNative&&Ce.pointer&&u.indexOf("touch")===0?vl(s,u,b):Ce.touch&&u==="dblclick"?no(s,b):"removeEventListener"in s?s.removeEventListener(oo[u]||u,b,!1):s.detachEvent("on"+u,b),s[ii][C]=null}function si(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function hi(s){return oi(s,"wheel",si),this}function so(s){return Ve(s,"mousedown touchstart dblclick contextmenu",si),s._leaflet_disable_click=!0,this}function Qt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function qi(s){return Qt(s),si(s),this}function xs(s){if(s.composedPath)return s.composedPath();for(var u=[],p=s.target;p;)u.push(p),p=p.parentNode;return u}function Es(s,u){if(!u)return new de(s.clientX,s.clientY);var p=Ss(u),T=p.boundingClientRect;return new de((s.clientX-T.left)/p.x-u.clientLeft,(s.clientY-T.top)/p.y-u.clientTop)}var Sl=Ce.linux&&Ce.chrome?window.devicePixelRatio:Ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Rn(s){return Ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Sl:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Mi(s,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==s;)p=p.parentNode}catch{return!1}return p!==s}var ia={__proto__:null,on:Ve,off:At,stopPropagation:si,disableScrollPropagation:hi,disableClickPropagation:so,preventDefault:Qt,stop:qi,getPropagationPath:xs,getMousePosition:Es,getWheelDelta:Rn,isExternalTarget:Mi,addListener:Ve,removeListener:At},Lo=ue.extend({run:function(s,u,p,T){this.stop(),this._el=s,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=Bi(s),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=me(this._animate,this),this._step()},_step:function(s){var u=+new Date-this._startTime,p=this._duration*1e3;u<p?this._runFrame(this._easeOut(u/p),s):(this._runFrame(1),this._complete())},_runFrame:function(s,u){var p=this._startPos.add(this._offset.multiplyBy(s));u&&p._round(),Lt(this._el,p),this.fire("step")},_complete:function(){ne(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),lt=ue.extend({options:{crs:bn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,u){u=P(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(ge(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gs&&Ce.any3d&&!Ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ve(this._proxy,tr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,u,p){if(u=u===void 0?this._zoom:this._limitZoom(u),s=this._limitCenter(ge(s),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=l({animate:p.animate},p.zoom),p.pan=l({animate:p.animate,duration:p.duration},p.pan));var T=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,u,p.zoom):this._tryAnimatedPan(s,p.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(s,u,p.pan&&p.pan.noMoveStart),this},setZoom:function(s,u){return this._loaded?this.setView(this.getCenter(),s,{zoom:u}):(this._zoom=s,this)},zoomIn:function(s,u){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,u)},zoomOut:function(s,u){return s=s||(Ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,u)},setZoomAround:function(s,u,p){var T=this.getZoomScale(u),C=this.getSize().divideBy(2),b=s instanceof de?s:this.latLngToContainerPoint(s),U=b.subtract(C).multiplyBy(1-1/T),F=this.containerPointToLatLng(C.add(U));return this.setView(F,u,{zoom:p})},_getBoundsCenterZoom:function(s,u){u=u||{},s=s.getBounds?s.getBounds():he(s);var p=_e(u.paddingTopLeft||u.padding||[0,0]),T=_e(u.paddingBottomRight||u.padding||[0,0]),C=this.getBoundsZoom(s,!1,p.add(T));if(C=typeof u.maxZoom=="number"?Math.min(u.maxZoom,C):C,C===1/0)return{center:s.getCenter(),zoom:C};var b=T.subtract(p).divideBy(2),U=this.project(s.getSouthWest(),C),F=this.project(s.getNorthEast(),C),Q=this.unproject(U.add(F).divideBy(2).add(b),C);return{center:Q,zoom:C}},fitBounds:function(s,u){if(s=he(s),!s.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(s,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,u){return this.setView(s,this._zoom,{pan:u})},panBy:function(s,u){if(s=_e(s).round(),u=u||{},!s.x&&!s.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Lo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Je(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,u,p){if(p=p||{},p.animate===!1||!Ce.any3d)return this.setView(s,u,p);this._stop();var T=this.project(this.getCenter()),C=this.project(s),b=this.getSize(),U=this._zoom;s=ge(s),u=u===void 0?U:u;var F=Math.max(b.x,b.y),Q=F*this.getZoomScale(U,u),ae=C.distanceTo(T)||1,Se=1.42,De=Se*Se;function je(Yt){var Ii=Yt?-1:1,uo=Yt?Q:F,xr=Q*Q-F*F+Ii*De*De*ae*ae,Os=2*uo*De*ae,Bs=xr/Os,Qi=Math.sqrt(Bs*Bs+1)-Bs,Di=Qi<1e-9?-18:Math.log(Qi);return Di}function _n(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function Wt(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}function Bn(Yt){return _n(Yt)/Wt(Yt)}var pt=je(0);function gt(Yt){return F*(Wt(pt)/Wt(pt+Se*Yt))}function st(Yt){return F*(Wt(pt)*Bn(pt+Se*Yt)-_n(pt))/De}function Ki(Yt){return 1-Math.pow(1-Yt,1.5)}var Kn=Date.now(),va=(je(1)-pt)/Se,Xi=p.duration?1e3*p.duration:1e3*va*.8;function Tr(){var Yt=(Date.now()-Kn)/Xi,Ii=Ki(Yt)*va;Yt<=1?(this._flyToFrame=me(Tr,this),this._move(this.unproject(T.add(C.subtract(T).multiplyBy(st(Ii)/ae)),U),this.getScaleZoom(F/gt(Ii),U),{flyTo:!0})):this._move(s,u)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),Tr.call(this),this},flyToBounds:function(s,u){var p=this._getBoundsCenterZoom(s,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(s){return s=he(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var u=this.options.minZoom;return this.options.minZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var u=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&u!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,u){this._enforcingBounds=!0;var p=this.getCenter(),T=this._limitCenter(p,this._zoom,he(s));return p.equals(T)||this.panTo(T,u),this._enforcingBounds=!1,this},panInside:function(s,u){u=u||{};var p=_e(u.paddingTopLeft||u.padding||[0,0]),T=_e(u.paddingBottomRight||u.padding||[0,0]),C=this.project(this.getCenter()),b=this.project(s),U=this.getPixelBounds(),F=$([U.min.add(p),U.max.subtract(T)]),Q=F.getSize();if(!F.contains(b)){this._enforcingBounds=!0;var ae=b.subtract(F.getCenter()),Se=F.extend(b).getSize().subtract(Q);C.x+=ae.x<0?-Se.x:Se.x,C.y+=ae.y<0?-Se.y:Se.y,this.panTo(this.unproject(C),u),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=l({animate:!1,pan:!0},s===!0?{animate:!0}:s);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),T=u.divideBy(2).round(),C=p.divideBy(2).round(),b=T.subtract(C);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=l({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=h(this._handleGeolocationResponse,this),p=h(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,s):navigator.geolocation.getCurrentPosition(u,p,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var u=s.code,p=s.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var u=s.coords.latitude,p=s.coords.longitude,T=new ye(u,p),C=T.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var U=this.getBoundsZoom(C);this.setView(T,b.maxZoom?Math.min(U,b.maxZoom):U)}var F={latlng:T,bounds:C,timestamp:s.timestamp};for(var Q in s.coords)typeof s.coords[Q]=="number"&&(F[Q]=s.coords[Q]);this.fire("locationfound",F)}},addHandler:function(s,u){if(!u)return this;var p=this[s]=new u(this);return this._handlers.push(p),this.options[s]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ne(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)Rt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,u){var p="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),T=ot("div",p,u||this._mapPane);return s&&(this._panes[s]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),u=this.unproject(s.getBottomLeft()),p=this.unproject(s.getTopRight());return new fe(u,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,u,p){s=he(s),p=_e(p||[0,0]);var T=this.getZoom()||0,C=this.getMinZoom(),b=this.getMaxZoom(),U=s.getNorthWest(),F=s.getSouthEast(),Q=this.getSize().subtract(p),ae=$(this.project(F,T),this.project(U,T)).getSize(),Se=Ce.any3d?this.options.zoomSnap:1,De=Q.x/ae.x,je=Q.y/ae.y,_n=u?Math.max(De,je):Math.min(De,je);return T=this.getScaleZoom(_n,T),Se&&(T=Math.round(T/(Se/100))*(Se/100),T=u?Math.ceil(T/Se)*Se:Math.floor(T/Se)*Se),Math.max(C,Math.min(b,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new de(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,u){var p=this._getTopLeftPoint(s,u);return new z(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,u){var p=this.options.crs;return u=u===void 0?this._zoom:u,p.scale(s)/p.scale(u)},getScaleZoom:function(s,u){var p=this.options.crs;u=u===void 0?this._zoom:u;var T=p.zoom(s*p.scale(u));return isNaN(T)?1/0:T},project:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(ge(s),u)},unproject:function(s,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(_e(s),u)},layerPointToLatLng:function(s){var u=_e(s).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(s){var u=this.project(ge(s))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(he(s))},distance:function(s,u){return this.options.crs.distance(ge(s),ge(u))},containerPointToLayerPoint:function(s){return _e(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return _e(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var u=this.containerPointToLayerPoint(_e(s));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(s)))},mouseEventToContainerPoint:function(s){return Es(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var u=this._container=nr(s);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ve(u,"scroll",this._onScroll,this),this._containerId=y(u)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ce.any3d,Je(s,"leaflet-container"+(Ce.touch?" leaflet-touch":"")+(Ce.retina?" leaflet-retina":"")+(Ce.ielt9?" leaflet-oldie":"")+(Ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=vs(s,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Lt(this._mapPane,new de(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Je(s.markerPane,"leaflet-zoom-hide"),Je(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,u,p){Lt(this._mapPane,new de(0,0));var T=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var C=this._zoom!==u;this._moveStart(C,p)._move(s,u)._moveEnd(C),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(s,u){return s&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(s,u,p,T){u===void 0&&(u=this._zoom);var C=this._zoom!==u;return this._zoom=u,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),T?p&&p.pinch&&this.fire("zoom",p):((C||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ne(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Lt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[y(this._container)]=this;var u=s?At:Ve;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ne(this._resizeRequest),this._resizeRequest=me(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,u){for(var p=[],T,C=u==="mouseout"||u==="mouseover",b=s.target||s.srcElement,U=!1;b;){if(T=this._targets[y(b)],T&&(u==="click"||u==="preclick")&&this._draggableMoved(T)){U=!0;break}if(T&&T.listens(u,!0)&&(C&&!Mi(b,s)||(p.push(T),C))||b===this._container)break;b=b.parentNode}return!p.length&&!U&&!C&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var u=s.target||s.srcElement;if(!(!this._loaded||u._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(u))){var p=s.type;p==="mousedown"&&Io(u),this._fireDOMEvent(s,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,u,p){if(s.type==="click"){var T=l({},s);T.type="preclick",this._fireDOMEvent(T,T.type,p)}var C=this._findEventTargets(s,u);if(p){for(var b=[],U=0;U<p.length;U++)p[U].listens(u,!0)&&b.push(p[U]);C=b.concat(C)}if(C.length){u==="contextmenu"&&Qt(s);var F=C[0],Q={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var ae=F.getLatLng&&(!F._radius||F._radius<=10);Q.containerPoint=ae?this.latLngToContainerPoint(F.getLatLng()):this.mouseEventToContainerPoint(s),Q.layerPoint=this.containerPointToLayerPoint(Q.containerPoint),Q.latlng=ae?F.getLatLng():this.layerPointToLatLng(Q.layerPoint)}for(U=0;U<C.length;U++)if(C[U].fire(u,Q,!0),Q.originalEvent._stopped||C[U].options.bubblingMouseEvents===!1&&ee(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,u=this._handlers.length;s<u;s++)this._handlers[s].disable()},whenReady:function(s,u){return this._loaded?s.call(u||this,{target:this}):this.on("load",s,u),this},_getMapPanePos:function(){return Bi(this._mapPane)||new de(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,u){var p=s&&u!==void 0?this._getNewPixelOrigin(s,u):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,u){var p=this.getSize()._divideBy(2);return this.project(s,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,u,p){var T=this._getNewPixelOrigin(p,u);return this.project(s,u)._subtract(T)},_latLngBoundsToNewLayerBounds:function(s,u,p){var T=this._getNewPixelOrigin(p,u);return $([this.project(s.getSouthWest(),u)._subtract(T),this.project(s.getNorthWest(),u)._subtract(T),this.project(s.getSouthEast(),u)._subtract(T),this.project(s.getNorthEast(),u)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,u,p){if(!p)return s;var T=this.project(s,u),C=this.getSize().divideBy(2),b=new z(T.subtract(C),T.add(C)),U=this._getBoundsOffset(b,p,u);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?s:this.unproject(T.add(U),u)},_limitOffset:function(s,u){if(!u)return s;var p=this.getPixelBounds(),T=new z(p.min.add(s),p.max.add(s));return s.add(this._getBoundsOffset(T,u))},_getBoundsOffset:function(s,u,p){var T=$(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),C=T.min.subtract(s.min),b=T.max.subtract(s.max),U=this._rebound(C.x,-b.x),F=this._rebound(C.y,-b.y);return new de(U,F)},_rebound:function(s,u){return s+u>0?Math.round(s-u)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(u))},_limitZoom:function(s){var u=this.getMinZoom(),p=this.getMaxZoom(),T=Ce.any3d?this.options.zoomSnap:1;return T&&(s=Math.round(s/T)*T),Math.max(u,Math.min(p,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,u){var p=this._getCenterOffset(s)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,u),!0)},_createAnimProxy:function(){var s=this._proxy=ot("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(u){var p=Oi,T=this._proxy.style[p];wi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),T===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),u=this.getZoom();wi(this._proxy,this.project(s,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(u),C=this._getCenterOffset(s)._divideBy(1-1/T);return p.animate!==!0&&!this.getSize().contains(C)?!1:(me(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(s,u,!0)},this),!0)},_animateZoom:function(s,u,p,T){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=u,Je(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:u,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function lr(s,u){return new lt(s,u)}var On=ve.extend({options:{position:"topright"},initialize:function(s){P(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var u=this._map;return u&&u.removeControl(this),this.options.position=s,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var u=this._container=this.onAdd(s),p=this.getPosition(),T=s._controlCorners[p];return Je(u,"leaflet-control"),p.indexOf("bottom")!==-1?T.insertBefore(u,T.firstChild):T.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),bi=function(s){return new On(s)};lt.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},u="leaflet-",p=this._controlContainer=ot("div",u+"control-container",this._container);function T(C,b){var U=u+C+" "+u+b;s[C+b]=ot("div",U,p)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)Rt(this._controlCorners[s]);Rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Cs=On.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,u,p,T){return p<T?-1:T<p?1:0}},initialize:function(s,u,p){P(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in s)this._addLayer(s[T],T);for(T in u)this._addLayer(u[T],T,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return On.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,u){return this._addLayer(s,u),this._map?this._update():this},addOverlay:function(s,u){return this._addLayer(s,u,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var u=this._getLayer(y(s));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Je(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Je(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",u=this._container=ot("div",s),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),so(u),hi(u);var T=this._section=ot("section",s+"-list");p&&(this._map.on("click",this.collapse,this),Ve(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=ot("a",s+"-toggle",u);C.href="#",C.title="Layers",C.setAttribute("role","button"),Ve(C,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){Qt(b),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=ot("div",s+"-base",T),this._separator=ot("div",s+"-separator",T),this._overlaysList=ot("div",s+"-overlays",T),u.appendChild(T)},_getLayer:function(s){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&y(this._layers[u].layer)===s)return this._layers[u]},_addLayer:function(s,u,p){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(h(function(T,C){return this.options.sortFunction(T.layer,C.layer,T.name,C.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Vn(this._baseLayersList),Vn(this._overlaysList),this._layerControlInputs=[];var s,u,p,T,C=0;for(p=0;p<this._layers.length;p++)T=this._layers[p],this._addItem(T),u=u||T.overlay,s=s||!T.overlay,C+=T.overlay?0:1;return this.options.hideSingleBase&&(s=s&&C>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=u&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var u=this._getLayer(y(s.target)),p=u.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(s,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(u?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=p,T.firstChild},_addItem:function(s){var u=document.createElement("label"),p=this._map.hasLayer(s.layer),T;s.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=p):T=this._createRadioElement("leaflet-base-layers_"+y(this),p),this._layerControlInputs.push(T),T.layerId=y(s.layer),Ve(T,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+s.name;var b=document.createElement("span");u.appendChild(b),b.appendChild(T),b.appendChild(C);var U=s.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,u,p,T=[],C=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)u=s[b],p=this._getLayer(u.layerId).layer,u.checked?T.push(p):u.checked||C.push(p);for(b=0;b<C.length;b++)this._map.hasLayer(C[b])&&this._map.removeLayer(C[b]);for(b=0;b<T.length;b++)this._map.hasLayer(T[b])||this._map.addLayer(T[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,u,p,T=this._map.getZoom(),C=s.length-1;C>=0;C--)u=s[C],p=this._getLayer(u.layerId).layer,u.disabled=p.options.minZoom!==void 0&&T<p.options.minZoom||p.options.maxZoom!==void 0&&T>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ve(s,"click",Qt),this.expand();var u=this;setTimeout(function(){At(s,"click",Qt),u._preventClick=!1})}}),Tl=function(s,u,p){return new Cs(s,u,p)},ur=On.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var u="leaflet-control-zoom",p=ot("div",u+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,u,p,T,C){var b=ot("a",p,T);return b.innerHTML=s,b.href="#",b.title=u,b.setAttribute("role","button"),b.setAttribute("aria-label",u),so(b),Ve(b,"click",qi),Ve(b,"click",C,this),Ve(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,u="leaflet-disabled";qt(this._zoomInButton,u),qt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Je(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Je(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});lt.mergeOptions({zoomControl:!0}),lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ur,this.addControl(this.zoomControl))});var gc=function(s){return new ur(s)},xl=On.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var u="leaflet-control-scale",p=ot("div",u),T=this.options;return this._addScales(T,u+"-line",p),s.on(T.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),p},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,u,p){s.metric&&(this._mScale=ot("div",u,p)),s.imperial&&(this._iScale=ot("div",u,p))},_update:function(){var s=this._map,u=s.getSize().y/2,p=s.distance(s.containerPointToLatLng([0,u]),s.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var u=this._getRoundNum(s),p=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,p,u/s)},_updateImperial:function(s){var u=s*3.2808399,p,T,C;u>5280?(p=u/5280,T=this._getRoundNum(p),this._updateScale(this._iScale,T+" mi",T/p)):(C=this._getRoundNum(u),this._updateScale(this._iScale,C+" ft",C/u))},_updateScale:function(s,u,p){s.style.width=Math.round(this.options.maxWidth*p)+"px",s.innerHTML=u},_getRoundNum:function(s){var u=Math.pow(10,(Math.floor(s)+"").length-1),p=s/u;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,u*p}}),cr=function(s){return new xl(s)},vc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',dr=On.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ce.inlineSvg?vc+" ":"")+"Leaflet</a>"},initialize:function(s){P(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=ot("div","leaflet-control-attribution"),so(this._container);for(var u in s._layers)s._layers[u].getAttribution&&this.addAttribution(s._layers[u].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var u in this._attributions)this._attributions[u]&&s.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),s.length&&p.push(s.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});lt.mergeOptions({attributionControl:!0}),lt.addInitHook(function(){this.options.attributionControl&&new dr().addTo(this)});var _c=function(s){return new dr(s)};On.Layers=Cs,On.Zoom=ur,On.Scale=xl,On.Attribution=dr,bi.layers=Tl,bi.zoom=gc,bi.scale=cr,bi.attribution=_c;var mi=ve.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mi.addTo=function(s,u){return s.addHandler(u,this),this};var yc={Events:Z},fr=Ce.touch?"touchstart mousedown":"mousedown",Gi=ue.extend({options:{clickTolerance:3},initialize:function(s,u,p,T){P(this,T),this._element=s,this._dragStartTarget=u||s,this._preventOutline=p},enable:function(){this._enabled||(Ve(this._dragStartTarget,fr,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gi._dragging===this&&this.finishDrag(!0),At(this._dragStartTarget,fr,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!ir(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Gi._dragging===this&&this.finishDrag();return}if(!(Gi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Gi._dragging=this,this._preventOutline&&Io(this._element),ea(),Ro(),!this._moving)){this.fire("down");var u=s.touches?s.touches[0]:s,p=na(this._element);this._startPoint=new de(u.clientX,u.clientY),this._startPos=Bi(this._element),this._parentScale=Ss(p);var T=s.type==="mousedown";Ve(document,T?"mousemove":"touchmove",this._onMove,this),Ve(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var u=s.touches&&s.touches.length===1?s.touches[0]:s,p=new de(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Qt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Je(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Je(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Lt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){qt(document.body,"leaflet-dragging"),this._lastTarget&&(qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),At(document,"mousemove touchmove",this._onMove,this),At(document,"mouseup touchend touchcancel",this._onUp,this),ys(),fi();var u=this._moved&&this._moving;this._moving=!1,Gi._dragging=!1,u&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function El(s,u,p){var T,C=[1,4,2,8],b,U,F,Q,ae,Se,De,je;for(b=0,Se=s.length;b<Se;b++)s[b]._code=ao(s[b],u);for(F=0;F<4;F++){for(De=C[F],T=[],b=0,Se=s.length,U=Se-1;b<Se;U=b++)Q=s[b],ae=s[U],Q._code&De?ae._code&De||(je=oa(ae,Q,De,u,p),je._code=ao(je,u),T.push(je)):(ae._code&De&&(je=oa(ae,Q,De,u,p),je._code=ao(je,u),T.push(je)),T.push(Q));s=T}return s}function Cl(s,u){var p,T,C,b,U,F,Q,ae,Se;if(!s||s.length===0)throw new Error("latlngs not passed");Zn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var De=ge([0,0]),je=he(s),_n=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());_n<1700&&(De=hr(s));var Wt=s.length,Bn=[];for(p=0;p<Wt;p++){var pt=ge(s[p]);Bn.push(u.project(ge([pt.lat-De.lat,pt.lng-De.lng])))}for(F=Q=ae=0,p=0,T=Wt-1;p<Wt;T=p++)C=Bn[p],b=Bn[T],U=C.y*b.x-b.y*C.x,Q+=(C.x+b.x)*U,ae+=(C.y+b.y)*U,F+=U*3;F===0?Se=Bn[0]:Se=[Q/F,ae/F];var gt=u.unproject(_e(Se));return ge([gt.lat+De.lat,gt.lng+De.lng])}function hr(s){for(var u=0,p=0,T=0,C=0;C<s.length;C++){var b=ge(s[C]);u+=b.lat,p+=b.lng,T++}return ge([u/T,p/T])}var mr={__proto__:null,clipPolygon:El,polygonCenter:Cl,centroid:hr};function Al(s,u){if(!u||!s.length)return s.slice();var p=u*u;return s=Tc(s,p),s=Ml(s,p),s}function wl(s,u,p){return Math.sqrt(As(s,u,p,!0))}function Sc(s,u,p){return As(s,u,p)}function Ml(s,u){var p=s.length,T=typeof Uint8Array<"u"?Uint8Array:Array,C=new T(p);C[0]=C[p-1]=1,pr(s,C,u,0,p-1);var b,U=[];for(b=0;b<p;b++)C[b]&&U.push(s[b]);return U}function pr(s,u,p,T,C){var b=0,U,F,Q;for(F=T+1;F<=C-1;F++)Q=As(s[F],s[T],s[C],!0),Q>b&&(U=F,b=Q);b>p&&(u[U]=1,pr(s,u,p,T,U),pr(s,u,p,U,C))}function Tc(s,u){for(var p=[s[0]],T=1,C=0,b=s.length;T<b;T++)xc(s[T],s[C])>u&&(p.push(s[T]),C=T);return C<b-1&&p.push(s[b-1]),p}var bl;function Rl(s,u,p,T,C){var b=T?bl:ao(s,p),U=ao(u,p),F,Q,ae;for(bl=U;;){if(!(b|U))return[s,u];if(b&U)return!1;F=b||U,Q=oa(s,u,F,p,C),ae=ao(Q,p),F===b?(s=Q,b=ae):(u=Q,U=ae)}}function oa(s,u,p,T,C){var b=u.x-s.x,U=u.y-s.y,F=T.min,Q=T.max,ae,Se;return p&8?(ae=s.x+b*(Q.y-s.y)/U,Se=Q.y):p&4?(ae=s.x+b*(F.y-s.y)/U,Se=F.y):p&2?(ae=Q.x,Se=s.y+U*(Q.x-s.x)/b):p&1&&(ae=F.x,Se=s.y+U*(F.x-s.x)/b),new de(ae,Se,C)}function ao(s,u){var p=0;return s.x<u.min.x?p|=1:s.x>u.max.x&&(p|=2),s.y<u.min.y?p|=4:s.y>u.max.y&&(p|=8),p}function xc(s,u){var p=u.x-s.x,T=u.y-s.y;return p*p+T*T}function As(s,u,p,T){var C=u.x,b=u.y,U=p.x-C,F=p.y-b,Q=U*U+F*F,ae;return Q>0&&(ae=((s.x-C)*U+(s.y-b)*F)/Q,ae>1?(C=p.x,b=p.y):ae>0&&(C+=U*ae,b+=F*ae)),U=s.x-C,F=s.y-b,T?U*U+F*F:new de(C,b)}function Zn(s){return!B(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function sa(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Zn(s)}function Po(s,u){var p,T,C,b,U,F,Q,ae;if(!s||s.length===0)throw new Error("latlngs not passed");Zn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Se=ge([0,0]),De=he(s),je=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());je<1700&&(Se=hr(s));var _n=s.length,Wt=[];for(p=0;p<_n;p++){var Bn=ge(s[p]);Wt.push(u.project(ge([Bn.lat-Se.lat,Bn.lng-Se.lng])))}for(p=0,T=0;p<_n-1;p++)T+=Wt[p].distanceTo(Wt[p+1])/2;if(T===0)ae=Wt[0];else for(p=0,b=0;p<_n-1;p++)if(U=Wt[p],F=Wt[p+1],C=U.distanceTo(F),b+=C,b>T){Q=(b-T)/C,ae=[F.x-Q*(F.x-U.x),F.y-Q*(F.y-U.y)];break}var pt=u.unproject(_e(ae));return ge([pt.lat+Se.lat,pt.lng+Se.lng])}var Ec={__proto__:null,simplify:Al,pointToSegmentDistance:wl,closestPointOnSegment:Sc,clipSegment:Rl,_getEdgeIntersection:oa,_getBitCode:ao,_sqClosestPointOnSegment:As,isFlat:Zn,_flat:sa,polylineCenter:Po},aa={project:function(s){return new de(s.lng,s.lat)},unproject:function(s){return new ye(s.y,s.x)},bounds:new z([-180,-90],[180,90])},ra={R:6378137,R_MINOR:6356752314245179e-9,bounds:new z([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var u=Math.PI/180,p=this.R,T=s.lat*u,C=this.R_MINOR/p,b=Math.sqrt(1-C*C),U=b*Math.sin(T),F=Math.tan(Math.PI/4-T/2)/Math.pow((1-U)/(1+U),b/2);return T=-p*Math.log(Math.max(F,1e-10)),new de(s.lng*u*p,T)},unproject:function(s){for(var u=180/Math.PI,p=this.R,T=this.R_MINOR/p,C=Math.sqrt(1-T*T),b=Math.exp(-s.y/p),U=Math.PI/2-2*Math.atan(b),F=0,Q=.1,ae;F<15&&Math.abs(Q)>1e-7;F++)ae=C*Math.sin(U),ae=Math.pow((1-ae)/(1+ae),C/2),Q=Math.PI/2-2*Math.atan(b*ae)-U,U+=Q;return new ye(U*u,s.x*u/p)}},Nl={__proto__:null,LonLat:aa,Mercator:ra,SphericalMercator:Ee},Il=l({},Ie,{code:"EPSG:3395",projection:ra,transformation:(function(){var s=.5/(Math.PI*ra.R);return nt(s,.5,-s,.5)})()}),gr=l({},Ie,{code:"EPSG:4326",projection:aa,transformation:nt(1/180,1,-1/180,.5)}),Uo=l({},Ae,{projection:aa,transformation:nt(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,u){var p=u.lng-s.lng,T=u.lat-s.lat;return Math.sqrt(p*p+T*T)},infinite:!0});Ae.Earth=Ie,Ae.EPSG3395=Il,Ae.EPSG3857=bn,Ae.EPSG900913=Ne,Ae.EPSG4326=gr,Ae.Simple=Uo;var ai=ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[y(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[y(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var u=s.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});lt.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var u=y(s);return this._layers[u]?this:(this._layers[u]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var u=y(s);return this._layers[u]?(this._loaded&&s.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return y(s)in this._layers},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},_addLayers:function(s){s=s?B(s)?s:[s]:[];for(var u=0,p=s.length;u<p;u++)this.addLayer(s[u])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[y(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var u=y(s);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,u=-1/0,p=this._getZoomSpan();for(var T in this._zoomBoundLayers){var C=this._zoomBoundLayers[T].options;s=C.minZoom===void 0?s:Math.min(s,C.minZoom),u=C.maxZoom===void 0?u:Math.max(u,C.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=s===1/0?void 0:s,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var zo=ai.extend({initialize:function(s,u){P(this,u),this._layers={};var p,T;if(s)for(p=0,T=s.length;p<T;p++)this.addLayer(s[p])},addLayer:function(s){var u=this.getLayerId(s);return this._layers[u]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var u=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(s){var u=typeof s=="number"?s:this.getLayerId(s);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var u=Array.prototype.slice.call(arguments,1),p,T;for(p in this._layers)T=this._layers[p],T[s]&&T[s].apply(T,u);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,u){for(var p in this._layers)s.call(u,this._layers[p]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return y(s)}}),Cc=function(s,u){return new zo(s,u)},pi=zo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),zo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),zo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new fe;for(var u in this._layers){var p=this._layers[u];s.extend(p.getBounds?p.getBounds():p.getLatLng())}return s}}),Dl=function(s,u){return new pi(s,u)},gi=ve.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){P(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,u){var p=this._getIconUrl(s);if(!p){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(p,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(T,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(s,u){var p=this.options,T=p[u+"Size"];typeof T=="number"&&(T=[T,T]);var C=_e(T),b=_e(u==="shadow"&&p.shadowAnchor||p.iconAnchor||C&&C.divideBy(2,!0));s.className="leaflet-marker-"+u+" "+(p.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),C&&(s.style.width=C.x+"px",s.style.height=C.y+"px")},_createImg:function(s,u){return u=u||document.createElement("img"),u.src=s,u},_getIconUrl:function(s){return Ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function ws(s){return new gi(s)}var Ms=gi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ms.imagePath!="string"&&(Ms.imagePath=this._detectIconPath()),(this.options.imagePath||Ms.imagePath)+gi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var u=function(p,T,C){var b=T.exec(p);return b&&b[C]};return s=u(s,/^url\((['"])?(.+)\1\)$/,2),s&&u(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=ot("div","leaflet-default-icon-path",document.body),u=vs(s,"background-image")||vs(s,"backgroundImage");if(document.body.removeChild(s),u=this._stripUrl(u),u)return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),bs=mi.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Gi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Je(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var u=this._marker,p=u._map,T=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,b=Bi(u._icon),U=p.getPixelBounds(),F=p.getPixelOrigin(),Q=$(U.min._subtract(F).add(C),U.max._subtract(F).subtract(C));if(!Q.contains(b)){var ae=_e((Math.max(Q.max.x,b.x)-Q.max.x)/(U.max.x-Q.max.x)-(Math.min(Q.min.x,b.x)-Q.min.x)/(U.min.x-Q.min.x),(Math.max(Q.max.y,b.y)-Q.max.y)/(U.max.y-Q.max.y)-(Math.min(Q.min.y,b.y)-Q.min.y)/(U.min.y-Q.min.y)).multiplyBy(T);p.panBy(ae,{animate:!1}),this._draggable._newPos._add(ae),this._draggable._startPos._add(ae),Lt(u._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=me(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(ne(this._panRequest),this._panRequest=me(this._adjustPan.bind(this,s)))},_onDrag:function(s){var u=this._marker,p=u._shadow,T=Bi(u._icon),C=u._map.layerPointToLatLng(T);p&&Lt(p,T),u._latlng=C,s.latlng=C,s.oldLatLng=this._oldLatLng,u.fire("move",s).fire("drag",s)},_onDragEnd:function(s){ne(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Rs=ai.extend({options:{icon:new Ms,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,u){P(this,u),this._latlng=ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var u=this._latlng;return this._latlng=ge(s),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=s.icon.createIcon(this._icon),T=!1;p!==this._icon&&(this._icon&&this._removeIcon(),T=!0,s.title&&(p.title=s.title),p.tagName==="IMG"&&(p.alt=s.alt||"")),Je(p,u),s.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(p,"focus",this._panOnFocus,this);var C=s.icon.createShadow(this._shadow),b=!1;C!==this._shadow&&(this._removeShadow(),b=!0),C&&(Je(C,u),C.alt=""),this._shadow=C,s.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&At(this._icon,"focus",this._panOnFocus,this),Rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Lt(this._icon,s),this._shadow&&Lt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Je(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bs)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bs(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&zt(this._icon,s),this._shadow&&zt(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var u=this.options.icon.options,p=u.iconSize?_e(u.iconSize):_e(0,0),T=u.iconAnchor?_e(u.iconAnchor):_e(0,0);s.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:p.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ll(s,u){return new Rs(s,u)}var vi=ai.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return P(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ko=vi.extend({options:{fill:!0,radius:10},initialize:function(s,u){P(this,u),this._latlng=ge(s),this._radius=this.options.radius},setLatLng:function(s){var u=this._latlng;return this._latlng=ge(s),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var u=s&&s.radius||this._radius;return vi.prototype.setStyle.call(this,s),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,u=this._radiusY||s,p=this._clickTolerance(),T=[s+p,u+p];this._pxBounds=new z(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Pl(s,u){return new ko(s,u)}var la=ko.extend({initialize:function(s,u,p){if(typeof u=="number"&&(u=l({},p,{radius:u})),P(this,u),this._latlng=ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new fe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:vi.prototype.setStyle,_project:function(){var s=this._latlng.lng,u=this._latlng.lat,p=this._map,T=p.options.crs;if(T.distance===Ie.distance){var C=Math.PI/180,b=this._mRadius/Ie.R/C,U=p.project([u+b,s]),F=p.project([u-b,s]),Q=U.add(F).divideBy(2),ae=p.unproject(Q).lat,Se=Math.acos((Math.cos(b*C)-Math.sin(u*C)*Math.sin(ae*C))/(Math.cos(u*C)*Math.cos(ae*C)))/C;(isNaN(Se)||Se===0)&&(Se=b/Math.cos(Math.PI/180*u)),this._point=Q.subtract(p.getPixelOrigin()),this._radius=isNaN(Se)?0:Q.x-p.project([ae,s-Se]).x,this._radiusY=Q.y-U.y}else{var De=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(De).x}this._updateBounds()}});function Ul(s,u,p){return new la(s,u,p)}var Ri=vi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,u){P(this,u),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var u=1/0,p=null,T=As,C,b,U=0,F=this._parts.length;U<F;U++)for(var Q=this._parts[U],ae=1,Se=Q.length;ae<Se;ae++){C=Q[ae-1],b=Q[ae];var De=T(s,C,b,!0);De<u&&(u=De,p=T(s,C,b))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Po(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,u){return u=u||this._defaultShape(),s=ge(s),u.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new fe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var u=[],p=Zn(s),T=0,C=s.length;T<C;T++)p?(u[T]=ge(s[T]),this._bounds.extend(u[T])):u[T]=this._convertLatLngs(s[T]);return u},_project:function(){var s=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),u=new de(s,s);this._rawPxBounds&&(this._pxBounds=new z([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(s,u,p){var T=s[0]instanceof ye,C=s.length,b,U;if(T){for(U=[],b=0;b<C;b++)U[b]=this._map.latLngToLayerPoint(s[b]),p.extend(U[b]);u.push(U)}else for(b=0;b<C;b++)this._projectLatlngs(s[b],u,p)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,p,T,C,b,U,F,Q;for(p=0,C=0,b=this._rings.length;p<b;p++)for(Q=this._rings[p],T=0,U=Q.length;T<U-1;T++)F=Rl(Q[T],Q[T+1],s,T,!0),F&&(u[C]=u[C]||[],u[C].push(F[0]),(F[1]!==Q[T+1]||T===U-2)&&(u[C].push(F[1]),C++))}},_simplifyPoints:function(){for(var s=this._parts,u=this.options.smoothFactor,p=0,T=s.length;p<T;p++)s[p]=Al(s[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,u){var p,T,C,b,U,F,Q=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(p=0,b=this._parts.length;p<b;p++)for(F=this._parts[p],T=0,U=F.length,C=U-1;T<U;C=T++)if(!(!u&&T===0)&&wl(s,F[C],F[T])<=Q)return!0;return!1}});function Ac(s,u){return new Ri(s,u)}Ri._flat=sa;var Ho=Ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var u=Ri.prototype._convertLatLngs.call(this,s),p=u.length;return p>=2&&u[0]instanceof ye&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(s){Ri.prototype._setLatLngs.call(this,s),Zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,u=this.options.weight,p=new de(u,u);if(s=new z(s.min.subtract(p),s.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,C=this._rings.length,b;T<C;T++)b=El(this._rings[T],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var u=!1,p,T,C,b,U,F,Q,ae;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,Q=this._parts.length;b<Q;b++)for(p=this._parts[b],U=0,ae=p.length,F=ae-1;U<ae;F=U++)T=p[U],C=p[F],T.y>s.y!=C.y>s.y&&s.x<(C.x-T.x)*(s.y-T.y)/(C.y-T.y)+T.x&&(u=!u);return u||Ri.prototype._containsPoint.call(this,s,!0)}});function wc(s,u){return new Ho(s,u)}var Ni=pi.extend({initialize:function(s,u){P(this,u),this._layers={},s&&this.addData(s)},addData:function(s){var u=B(s)?s:s.features,p,T,C;if(u){for(p=0,T=u.length;p<T;p++)C=u[p],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var U=En(s,b);return U?(U.feature=da(s),U.defaultOptions=U.options,this.resetStyle(U),b.onEachFeature&&b.onEachFeature(s,U),this.addLayer(U)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=l({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(u){this._setLayerStyle(u,s)},this)},_setLayerStyle:function(s,u){s.setStyle&&(typeof u=="function"&&(u=u(s.feature)),s.setStyle(u))}});function En(s,u){var p=s.type==="Feature"?s.geometry:s,T=p?p.coordinates:null,C=[],b=u&&u.pointToLayer,U=u&&u.coordsToLatLng||ua,F,Q,ae,Se;if(!T&&!p)return null;switch(p.type){case"Point":return F=U(T),Oo(b,s,F,u);case"MultiPoint":for(ae=0,Se=T.length;ae<Se;ae++)F=U(T[ae]),C.push(Oo(b,s,F,u));return new pi(C);case"LineString":case"MultiLineString":return Q=Ns(T,p.type==="LineString"?0:1,U),new Ri(Q,u);case"Polygon":case"MultiPolygon":return Q=Ns(T,p.type==="Polygon"?1:2,U),new Ho(Q,u);case"GeometryCollection":for(ae=0,Se=p.geometries.length;ae<Se;ae++){var De=En({geometry:p.geometries[ae],type:"Feature",properties:s.properties},u);De&&C.push(De)}return new pi(C);case"FeatureCollection":for(ae=0,Se=p.features.length;ae<Se;ae++){var je=En(p.features[ae],u);je&&C.push(je)}return new pi(C);default:throw new Error("Invalid GeoJSON object.")}}function Oo(s,u,p,T){return s?s(u,p):new Rs(p,T&&T.markersInheritOptions&&T)}function ua(s){return new ye(s[1],s[0],s[2])}function Ns(s,u,p){for(var T=[],C=0,b=s.length,U;C<b;C++)U=u?Ns(s[C],u-1,p):(p||ua)(s[C]),T.push(U);return T}function ca(s,u){return s=ge(s),s.alt!==void 0?[M(s.lng,u),M(s.lat,u),M(s.alt,u)]:[M(s.lng,u),M(s.lat,u)]}function Is(s,u,p,T){for(var C=[],b=0,U=s.length;b<U;b++)C.push(u?Is(s[b],Zn(s[b])?0:u-1,p,T):ca(s[b],T));return!u&&p&&C.length>0&&C.push(C[0].slice()),C}function Vi(s,u){return s.feature?l({},s.feature,{geometry:u}):da(u)}function da(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Fi={toGeoJSON:function(s){return Vi(this,{type:"Point",coordinates:ca(this.getLatLng(),s)})}};Rs.include(Fi),la.include(Fi),ko.include(Fi),Ri.include({toGeoJSON:function(s){var u=!Zn(this._latlngs),p=Is(this._latlngs,u?1:0,!1,s);return Vi(this,{type:(u?"Multi":"")+"LineString",coordinates:p})}}),Ho.include({toGeoJSON:function(s){var u=!Zn(this._latlngs),p=u&&!Zn(this._latlngs[0]),T=Is(this._latlngs,p?2:u?1:0,!0,s);return u||(T=[T]),Vi(this,{type:(p?"Multi":"")+"Polygon",coordinates:T})}}),zo.include({toMultiPoint:function(s){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(s).geometry.coordinates)}),Vi(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(s){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(s);var p=u==="GeometryCollection",T=[];return this.eachLayer(function(C){if(C.toGeoJSON){var b=C.toGeoJSON(s);if(p)T.push(b.geometry);else{var U=da(b);U.type==="FeatureCollection"?T.push.apply(T,U.features):T.push(U)}}}),p?Vi(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function fa(s,u){return new Ni(s,u)}var Ds=fa,Bo=ai.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,u,p){this._url=s,this._bounds=he(u),P(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Je(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&vn(this._image),this},bringToBack:function(){return this._map&&io(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=he(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",u=this._image=s?this._url:ot("img");if(Je(u,"leaflet-image-layer"),this._zoomAnimated&&Je(u,"leaflet-zoom-animated"),this.options.className&&Je(u,this.options.className),u.onselectstart=E,u.onmousemove=E,u.onload=h(this.fire,this,"load"),u.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(s){var u=this._map.getZoomScale(s.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;wi(this._image,p,u)},_reset:function(){var s=this._image,u=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();Lt(s,u.min),s.style.width=p.x+"px",s.style.height=p.y+"px"},_updateOpacity:function(){zt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),zl=function(s,u,p){return new Bo(s,u,p)},Zi=Bo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",u=this._image=s?this._url:ot("video");if(Je(u,"leaflet-image-layer"),this._zoomAnimated&&Je(u,"leaflet-zoom-animated"),this.options.className&&Je(u,this.options.className),u.onselectstart=E,u.onmousemove=E,u.onloadeddata=h(this.fire,this,"load"),s){for(var p=u.getElementsByTagName("source"),T=[],C=0;C<p.length;C++)T.push(p[C].src);this._url=p.length>0?T:[u.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var U=ot("source");U.src=this._url[b],u.appendChild(U)}}});function qo(s,u,p){return new Zi(s,u,p)}var ha=Bo.extend({_initImage:function(){var s=this._image=this._url;Je(s,"leaflet-image-layer"),this._zoomAnimated&&Je(s,"leaflet-zoom-animated"),this.options.className&&Je(s,this.options.className),s.onselectstart=E,s.onmousemove=E}});function kl(s,u,p){return new ha(s,u,p)}var Cn=ai.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,u){s&&(s instanceof ye||B(s))?(this._latlng=ge(s),P(this,u)):(P(this,s),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&zt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&zt(this._container,1),this.bringToFront(),this.options.interactive&&(Je(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(zt(this._container,0),this._removeTimeout=setTimeout(h(Rt,void 0,this._container),200)):Rt(this._container),this.options.interactive&&(qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&vn(this._container),this},bringToBack:function(){return this._map&&io(this._container),this},_prepareOpen:function(s){var u=this._source;if(!u._map)return!1;if(u instanceof pi){u=null;var p=this._source._layers;for(var T in p)if(p[T]._map){u=p[T];break}if(!u)return!1;this._source=u}if(!s)if(u.getCenter)s=u.getCenter();else if(u.getLatLng)s=u.getLatLng();else if(u.getBounds)s=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")s.innerHTML=u;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),u=_e(this.options.offset),p=this._getAnchor();this._zoomAnimated?Lt(this._container,s.add(p)):u=u.add(s).add(p);var T=this._containerBottom=-u.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=T+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});lt.include({_initOverlay:function(s,u,p,T){var C=u;return C instanceof s||(C=new s(T).setContent(u)),p&&C.setLatLng(p),C}}),ai.include({_initOverlay:function(s,u,p,T){var C=p;return C instanceof s?(P(C,T),C._source=this):(C=u&&!T?u:new s(T,this),C.setContent(p)),C}});var Ls=Cn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Cn.prototype.openOn.call(this,s)},onAdd:function(s){Cn.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vi||this._source.on("preclick",si))},onRemove:function(s){Cn.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vi||this._source.off("preclick",si))},getEvents:function(){var s=Cn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",u=this._container=ot("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=ot("div",s+"-content-wrapper",u);if(this._contentNode=ot("div",s+"-content",p),so(u),hi(this._contentNode),Ve(u,"contextmenu",si),this._tipContainer=ot("div",s+"-tip-container",u),this._tip=ot("div",s+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=ot("a",s+"-close-button",u);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Ve(T,"click",function(C){Qt(C),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,u=s.style;u.width="",u.whiteSpace="nowrap";var p=s.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var T=s.offsetHeight,C=this.options.maxHeight,b="leaflet-popup-scrolled";C&&T>C?(u.height=C+"px",Je(s,b)):qt(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),p=this._getAnchor();Lt(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,u=parseInt(vs(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,T=this._containerWidth,C=new de(this._containerLeft,-p-this._containerBottom);C._add(Bi(this._container));var b=s.layerPointToContainerPoint(C),U=_e(this.options.autoPanPadding),F=_e(this.options.autoPanPaddingTopLeft||U),Q=_e(this.options.autoPanPaddingBottomRight||U),ae=s.getSize(),Se=0,De=0;b.x+T+Q.x>ae.x&&(Se=b.x+T-ae.x+Q.x),b.x-Se-F.x<0&&(Se=b.x-F.x),b.y+p+Q.y>ae.y&&(De=b.y+p-ae.y+Q.y),b.y-De-F.y<0&&(De=b.y-F.y),(Se||De)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([Se,De]))}},_getAnchor:function(){return _e(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Hl=function(s,u){return new Ls(s,u)};lt.mergeOptions({closePopupOnClick:!0}),lt.include({openPopup:function(s,u,p){return this._initOverlay(Ls,s,u,p).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),ai.include({bindPopup:function(s,u){return this._popup=this._initOverlay(Ls,this._popup,s,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof pi||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){qi(s);var u=s.layer||s.target;if(this._popup._source===u&&!(u instanceof vi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=u,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Ps=Cn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Cn.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Cn.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Cn.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",u=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ot("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+y(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var u,p,T=this._map,C=this._container,b=T.latLngToContainerPoint(T.getCenter()),U=T.layerPointToContainerPoint(s),F=this.options.direction,Q=C.offsetWidth,ae=C.offsetHeight,Se=_e(this.options.offset),De=this._getAnchor();F==="top"?(u=Q/2,p=ae):F==="bottom"?(u=Q/2,p=0):F==="center"?(u=Q/2,p=ae/2):F==="right"?(u=0,p=ae/2):F==="left"?(u=Q,p=ae/2):U.x<b.x?(F="right",u=0,p=ae/2):(F="left",u=Q+(Se.x+De.x)*2,p=ae/2),s=s.subtract(_e(u,p,!0)).add(Se).add(De),qt(C,"leaflet-tooltip-right"),qt(C,"leaflet-tooltip-left"),qt(C,"leaflet-tooltip-top"),qt(C,"leaflet-tooltip-bottom"),Je(C,"leaflet-tooltip-"+F),Lt(C,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&zt(this._container,s)},_animateZoom:function(s){var u=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(u)},_getAnchor:function(){return _e(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Mc=function(s,u){return new Ps(s,u)};lt.include({openTooltip:function(s,u,p){return this._initOverlay(Ps,s,u,p).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),ai.include({bindTooltip:function(s,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ps,this._tooltip,s,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var u=s?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof pi||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&(Ve(u,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ve(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var u=typeof s.getElement=="function"&&s.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var u=s.latlng,p,T;this._tooltip.options.sticky&&s.originalEvent&&(p=this._map.mouseEventToContainerPoint(s.originalEvent),T=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(u)}});var Ol=gi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var u=s&&s.tagName==="DIV"?s:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Vn(u),u.appendChild(p.html)):u.innerHTML=p.html!==!1?p.html:"",p.bgPos){var T=_e(p.bgPos);u.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function bc(s){return new Ol(s)}gi.Default=Ms;var Go=ai.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){P(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),Rt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(vn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(io(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=_(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof de?s:new de(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var u=this.getPane().children,p=-s(-1/0,1/0),T=0,C=u.length,b;T<C;T++)b=u[T].style.zIndex,u[T]!==this._container&&b&&(p=s(p,+b));isFinite(p)&&(this.options.zIndex=p+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ce.ielt9){zt(this._container,this.options.opacity);var s=+new Date,u=!1,p=!1;for(var T in this._tiles){var C=this._tiles[T];if(!(!C.current||!C.loaded)){var b=Math.min(1,(s-C.loaded)/200);zt(C.el,b),b<1?u=!0:(C.active?p=!0:this._onOpaqueTile(C),C.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(ne(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=ot("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,u=this.options.maxZoom;if(s!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===s?(this._levels[p].el.style.zIndex=u-Math.abs(s-p),this._onUpdateLevel(p)):(Rt(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var T=this._levels[s],C=this._map;return T||(T=this._levels[s]={},T.el=ot("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=u,T.origin=C.project(C.unproject(C.getPixelOrigin()),s).round(),T.zoom=s,this._setZoomTransform(T,C.getCenter(),C.getZoom()),E(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var s,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)u=this._tiles[s],u.retain=u.current;for(s in this._tiles)if(u=this._tiles[s],u.current&&!u.active){var T=u.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var u in this._tiles)this._tiles[u].coords.z===s&&this._removeTile(u)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)Rt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,u,p,T){var C=Math.floor(s/2),b=Math.floor(u/2),U=p-1,F=new de(+C,+b);F.z=+U;var Q=this._tileCoordsToKey(F),ae=this._tiles[Q];return ae&&ae.active?(ae.retain=!0,!0):(ae&&ae.loaded&&(ae.retain=!0),U>T?this._retainParent(C,b,U,T):!1)},_retainChildren:function(s,u,p,T){for(var C=2*s;C<2*s+2;C++)for(var b=2*u;b<2*u+2;b++){var U=new de(C,b);U.z=p+1;var F=this._tileCoordsToKey(U),Q=this._tiles[F];if(Q&&Q.active){Q.retain=!0;continue}else Q&&Q.loaded&&(Q.retain=!0);p+1<T&&this._retainChildren(C,b,p+1,T)}},_resetView:function(s){var u=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var u=this.options;return u.minNativeZoom!==void 0&&s<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<s?u.maxNativeZoom:s},_setView:function(s,u,p,T){var C=Math.round(u);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var b=this.options.updateWhenZooming&&C!==this._tileZoom;(!T||b)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(s),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(s,u)},_setZoomTransforms:function(s,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],s,u)},_setZoomTransform:function(s,u,p){var T=this._map.getZoomScale(p,s.zoom),C=s.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(u,p)).round();Ce.any3d?wi(s.el,C,T):Lt(s.el,C)},_resetGrid:function(){var s=this._map,u=s.options.crs,p=this._tileSize=this.getTileSize(),T=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,u.wrapLng[0]],T).x/p.x),Math.ceil(s.project([0,u.wrapLng[1]],T).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([u.wrapLat[0],0],T).y/p.x),Math.ceil(s.project([u.wrapLat[1],0],T).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),T=u.getZoomScale(p,this._tileZoom),C=u.project(s,this._tileZoom).floor(),b=u.getSize().divideBy(T*2);return new z(C.subtract(b),C.add(b))},_update:function(s){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(s===void 0&&(s=u.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(s),C=this._pxBoundsToTileRange(T),b=C.getCenter(),U=[],F=this.options.keepBuffer,Q=new z(C.getBottomLeft().subtract([F,-F]),C.getTopRight().add([F,-F]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ae in this._tiles){var Se=this._tiles[ae].coords;(Se.z!==this._tileZoom||!Q.contains(new de(Se.x,Se.y)))&&(this._tiles[ae].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(s,p);return}for(var De=C.min.y;De<=C.max.y;De++)for(var je=C.min.x;je<=C.max.x;je++){var _n=new de(je,De);if(_n.z=this._tileZoom,!!this._isValidTile(_n)){var Wt=this._tiles[this._tileCoordsToKey(_n)];Wt?Wt.current=!0:U.push(_n)}}if(U.sort(function(pt,gt){return pt.distanceTo(b)-gt.distanceTo(b)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bn=document.createDocumentFragment();for(je=0;je<U.length;je++)this._addTile(U[je],Bn);this._level.el.appendChild(Bn)}}}},_isValidTile:function(s){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(s.x<p.min.x||s.x>p.max.x)||!u.wrapLat&&(s.y<p.min.y||s.y>p.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(s);return he(this.options.bounds).overlaps(T)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var u=this._map,p=this.getTileSize(),T=s.scaleBy(p),C=T.add(p),b=u.unproject(T,s.z),U=u.unproject(C,s.z);return[b,U]},_tileCoordsToBounds:function(s){var u=this._tileCoordsToNwSe(s),p=new fe(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var u=s.split(":"),p=new de(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(s){var u=this._tiles[s];u&&(Rt(u.el),delete this._tiles[s],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Je(s,"leaflet-tile");var u=this.getTileSize();s.style.width=u.x+"px",s.style.height=u.y+"px",s.onselectstart=E,s.onmousemove=E,Ce.ielt9&&this.options.opacity<1&&zt(s,this.options.opacity)},_addTile:function(s,u){var p=this._getTilePos(s),T=this._tileCoordsToKey(s),C=this.createTile(this._wrapCoords(s),h(this._tileReady,this,s));this._initTile(C),this.createTile.length<2&&me(h(this._tileReady,this,s,null,C)),Lt(C,p),this._tiles[T]={el:C,coords:s,current:!0},u.appendChild(C),this.fire("tileloadstart",{tile:C,coords:s})},_tileReady:function(s,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:s});var T=this._tileCoordsToKey(s);p=this._tiles[T],p&&(p.loaded=+new Date,this._map._fadeAnimated?(zt(p.el,0),ne(this._fadeFrame),this._fadeFrame=me(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Je(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ce.ielt9||!this._map._fadeAnimated?me(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var u=new de(this._wrapX?x(s.x,this._wrapX):s.x,this._wrapY?x(s.y,this._wrapY):s.y);return u.z=s.z,u},_pxBoundsToTileRange:function(s){var u=this.getTileSize();return new z(s.min.unscaleBy(u).floor(),s.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Bl(s){return new Go(s)}var Yi=Go.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,u){this._url=s,u=P(this,u),u.detectRetina&&Ce.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,u){return this._url===s&&u===void 0&&(u=!0),this._url=s,u||this.redraw(),this},createTile:function(s,u){var p=document.createElement("img");return Ve(p,"load",h(this._tileOnLoad,this,u,p)),Ve(p,"error",h(this._tileOnError,this,u,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(s),p},getTileUrl:function(s){var u={r:Ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-s.y;this.options.tms&&(u.y=p),u["-y"]=p}return q(this._url,l(u,this.options))},_tileOnLoad:function(s,u){Ce.ielt9?setTimeout(h(s,this,null,u),0):s(null,u)},_tileOnError:function(s,u,p){var T=this.options.errorTileUrl;T&&u.getAttribute("src")!==T&&(u.src=T),s(p,u)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,u=this.options.maxZoom,p=this.options.zoomReverse,T=this.options.zoomOffset;return p&&(s=u-s),s+T},_getSubdomain:function(s){var u=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var s,u;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(u=this._tiles[s].el,u.onload=E,u.onerror=E,!u.complete)){u.src=j;var p=this._tiles[s].coords;Rt(u),delete this._tiles[s],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(s){var u=this._tiles[s];if(u)return u.el.setAttribute("src",j),Go.prototype._removeTile.call(this,s)},_tileReady:function(s,u,p){if(!(!this._map||p&&p.getAttribute("src")===j))return Go.prototype._tileReady.call(this,s,u,p)}});function Yn(s,u){return new Yi(s,u)}var Us=Yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,u){this._url=s;var p=l({},this.defaultWmsParams);for(var T in u)T in this.options||(p[T]=u[T]);u=P(this,u);var C=u.detectRetina&&Ce.retina?2:1,b=this.getTileSize();p.width=b.x*C,p.height=b.y*C,this.wmsParams=p},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Yi.prototype.onAdd.call(this,s)},getTileUrl:function(s){var u=this._tileCoordsToNwSe(s),p=this._crs,T=$(p.project(u[0]),p.project(u[1])),C=T.min,b=T.max,U=(this._wmsVersion>=1.3&&this._crs===gr?[C.y,C.x,b.y,b.x]:[C.x,C.y,b.x,b.y]).join(","),F=Yi.prototype.getTileUrl.call(this,s);return F+H(this.wmsParams,F,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(s,u){return l(this.wmsParams,s),u||this.redraw(),this}});function Jn(s,u){return new Us(s,u)}Yi.WMS=Us,Yn.wms=Jn;var Ln=ai.extend({options:{padding:.1},initialize:function(s){P(this,s),y(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Je(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,u){var p=this._map.getZoomScale(u,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,u),b=T.multiplyBy(-p).add(C).subtract(this._map._getNewPixelOrigin(s,u));Ce.any3d?wi(this._container,b,p):Lt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-s)).round();this._bounds=new z(p,p.add(u.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ma=Ln.extend({options:{tolerance:0},getEvents:function(){var s=Ln.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ve(s,"mousemove",this._onMouseMove,this),Ve(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ve(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){ne(this._redrawRequest),delete this._ctx,Rt(this._container),At(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var u in this._layers)s=this._layers[u],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var s=this._bounds,u=this._container,p=s.getSize(),T=Ce.retina?2:1;Lt(u,s.min),u.width=T*p.x,u.height=T*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",Ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[y(s)]=s;var u=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var u=s._order,p=u.next,T=u.prev;p?p.prev=T:this._drawLast=T,T?T.next=p:this._drawFirst=p,delete s._order,delete this._layers[y(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var u=s.options.dashArray.split(/[, ]+/),p=[],T,C;for(C=0;C<u.length;C++){if(T=Number(u[C]),isNaN(T))return;p.push(T)}s.options._dashArray=p}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||me(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var u=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(s._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(s._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var u=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)s=T.layer,(!u||s._pxBounds&&s._pxBounds.intersects(u))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,u){if(this._drawing){var p,T,C,b,U=s._parts,F=U.length,Q=this._ctx;if(F){for(Q.beginPath(),p=0;p<F;p++){for(T=0,C=U[p].length;T<C;T++)b=U[p][T],Q[T?"lineTo":"moveTo"](b.x,b.y);u&&Q.closePath()}this._fillStroke(Q,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var u=s._point,p=this._ctx,T=Math.max(Math.round(s._radius),1),C=(Math.max(Math.round(s._radiusY),1)||T)/T;C!==1&&(p.save(),p.scale(1,C)),p.beginPath(),p.arc(u.x,u.y/C,T,0,Math.PI*2,!1),C!==1&&p.restore(),this._fillStroke(p,s)}},_fillStroke:function(s,u){var p=u.options;p.fill&&(s.globalAlpha=p.fillOpacity,s.fillStyle=p.fillColor||p.color,s.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(s.setLineDash&&s.setLineDash(u.options&&u.options._dashArray||[]),s.globalAlpha=p.opacity,s.lineWidth=p.weight,s.strokeStyle=p.color,s.lineCap=p.lineCap,s.lineJoin=p.lineJoin,s.stroke())},_onClick:function(s){for(var u=this._map.mouseEventToLayerPoint(s),p,T,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(u)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(p))&&(T=p);this._fireEvent(T?[T]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,u)}},_handleMouseOut:function(s){var u=this._hoveredLayer;u&&(qt(this._container,"leaflet-interactive"),this._fireEvent([u],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,u){if(!this._mouseHoverThrottled){for(var p,T,C=this._drawFirst;C;C=C.next)p=C.layer,p.options.interactive&&p._containsPoint(u)&&(T=p);T!==this._hoveredLayer&&(this._handleMouseOut(s),T&&(Je(this._container,"leaflet-interactive"),this._fireEvent([T],s,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,u,p){this._map._fireDOMEvent(u,p||u.type,s)},_bringToFront:function(s){var u=s._order;if(u){var p=u.next,T=u.prev;if(p)p.prev=T;else return;T?T.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(s)}},_bringToBack:function(s){var u=s._order;if(u){var p=u.next,T=u.prev;if(T)T.next=p;else return;p?p.prev=T:T&&(this._drawLast=T),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(s)}}});function zs(s){return Ce.canvas?new ma(s):null}var Ji=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),vr={_initContainer:function(){this._container=ot("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ln.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var u=s._container=Ji("shape");Je(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",s._path=Ji("path"),u.appendChild(s._path),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){var u=s._container;this._container.appendChild(u),s.options.interactive&&s.addInteractiveTarget(u)},_removePath:function(s){var u=s._container;Rt(u),s.removeInteractiveTarget(u),delete this._layers[y(s)]},_updateStyle:function(s){var u=s._stroke,p=s._fill,T=s.options,C=s._container;C.stroked=!!T.stroke,C.filled=!!T.fill,T.stroke?(u||(u=s._stroke=Ji("stroke")),C.appendChild(u),u.weight=T.weight+"px",u.color=T.color,u.opacity=T.opacity,T.dashArray?u.dashStyle=B(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=T.lineCap.replace("butt","flat"),u.joinstyle=T.lineJoin):u&&(C.removeChild(u),s._stroke=null),T.fill?(p||(p=s._fill=Ji("fill")),C.appendChild(p),p.color=T.fillColor||T.color,p.opacity=T.fillOpacity):p&&(C.removeChild(p),s._fill=null)},_updateCircle:function(s){var u=s._point.round(),p=Math.round(s._radius),T=Math.round(s._radiusY||p);this._setPath(s,s._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+T+" 0,"+65535*360)},_setPath:function(s,u){s._path.v=u},_bringToFront:function(s){vn(s._container)},_bringToBack:function(s){io(s._container)}},_i=Ce.vml?Ji:Ot,Vo=Ln.extend({_initContainer:function(){this._container=_i("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_i("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rt(this._container),At(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var s=this._bounds,u=s.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),Lt(p,s.min),p.setAttribute("viewBox",[s.min.x,s.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(s){var u=s._path=_i("path");s.options.className&&Je(u,s.options.className),s.options.interactive&&Je(u,"leaflet-interactive"),this._updateStyle(s),this._layers[y(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){Rt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[y(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var u=s._path,p=s.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(s,u){this._setPath(s,pn(s._parts,u))},_updateCircle:function(s){var u=s._point,p=Math.max(Math.round(s._radius),1),T=Math.max(Math.round(s._radiusY),1)||p,C="a"+p+","+T+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(u.x-p)+","+u.y+C+p*2+",0 "+C+-p*2+",0 ";this._setPath(s,b)},_setPath:function(s,u){s._path.setAttribute("d",u)},_bringToFront:function(s){vn(s._path)},_bringToBack:function(s){io(s._path)}});Ce.vml&&Vo.include(vr);function ks(s){return Ce.svg||Ce.vml?new Vo(s):null}lt.include({getRenderer:function(s){var u=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var u=this._paneRenderers[s];return u===void 0&&(u=this._createRenderer({pane:s}),this._paneRenderers[s]=u),u},_createRenderer:function(s){return this.options.preferCanvas&&zs(s)||ks(s)}});var ro=Ho.extend({initialize:function(s,u){Ho.prototype.initialize.call(this,this._boundsToLatLngs(s),u)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=he(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Rc(s,u){return new ro(s,u)}Vo.create=_i,Vo.pointsToPath=pn,Ni.geometryToLayer=En,Ni.coordsToLatLng=ua,Ni.coordsToLatLngs=Ns,Ni.latLngToCoords=ca,Ni.latLngsToCoords=Is,Ni.getFeature=Vi,Ni.asFeature=da,lt.mergeOptions({boxZoom:!0});var Pn=mi.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){At(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ro(),ea(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ve(document,{contextmenu:qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=ot("div","leaflet-zoom-box",this._container),Je(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var u=new z(this._point,this._startPoint),p=u.getSize();Lt(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(Rt(this._box),qt(this._container,"leaflet-crosshair")),fi(),ys(),At(document,{contextmenu:qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var u=new fe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});lt.addInitHook("addHandler","boxZoom",Pn),lt.mergeOptions({doubleClickZoom:!0});var pa=mi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var u=this._map,p=u.getZoom(),T=u.options.zoomDelta,C=s.originalEvent.shiftKey?p-T:p+T;u.options.doubleClickZoom==="center"?u.setZoom(C):u.setZoomAround(s.containerPoint,C)}});lt.addInitHook("addHandler","doubleClickZoom",pa),lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yi=mi.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Gi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Je(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){qt(this._map._container,"leaflet-grab"),qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=he(this._map.options.maxBounds);this._offsetLimit=$(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,u){return s-(s-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;s.x<u.min.x&&(s.x=this._viscousLimit(s.x,u.min.x)),s.y<u.min.y&&(s.y=this._viscousLimit(s.y,u.min.y)),s.x>u.max.x&&(s.x=this._viscousLimit(s.x,u.max.x)),s.y>u.max.y&&(s.y=this._viscousLimit(s.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,u=Math.round(s/2),p=this._initialWorldOffset,T=this._draggable._newPos.x,C=(T-u+p)%s+u-p,b=(T+u+p)%s-u-p,U=Math.abs(C+p)<Math.abs(b+p)?C:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(s){var u=this._map,p=u.options,T=!p.inertia||s.noInertia||this._times.length<2;if(u.fire("dragend",s),T)u.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,U=p.easeLinearity,F=C.multiplyBy(U/b),Q=F.distanceTo([0,0]),ae=Math.min(p.inertiaMaxSpeed,Q),Se=F.multiplyBy(ae/Q),De=ae/(p.inertiaDeceleration*U),je=Se.multiplyBy(-De/2).round();!je.x&&!je.y?u.fire("moveend"):(je=u._limitOffset(je,u.options.maxBounds),me(function(){u.panBy(je,{duration:De,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});lt.addInitHook("addHandler","dragging",yi),lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _r=mi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ve(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),At(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,u=document.documentElement,p=s.scrollTop||u.scrollTop,T=s.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(T,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var u=this._panKeys={},p=this.keyCodes,T,C;for(T=0,C=p.left.length;T<C;T++)u[p.left[T]]=[-1*s,0];for(T=0,C=p.right.length;T<C;T++)u[p.right[T]]=[s,0];for(T=0,C=p.down.length;T<C;T++)u[p.down[T]]=[0,s];for(T=0,C=p.up.length;T<C;T++)u[p.up[T]]=[0,-1*s]},_setZoomDelta:function(s){var u=this._zoomKeys={},p=this.keyCodes,T,C;for(T=0,C=p.zoomIn.length;T<C;T++)u[p.zoomIn[T]]=s;for(T=0,C=p.zoomOut.length;T<C;T++)u[p.zoomOut[T]]=-s},_addHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){At(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var u=s.keyCode,p=this._map,T;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(T=this._panKeys[u],s.shiftKey&&(T=_e(T).multiplyBy(3)),p.options.maxBounds&&(T=p._limitOffset(_e(T),p.options.maxBounds)),p.options.worldCopyJump){var C=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(T)));p.panTo(C)}else p.panBy(T)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;qi(s)}}});lt.addInitHook("addHandler","keyboard",_r),lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Hs=mi.extend({addHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){At(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var u=Rn(s),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var T=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),T),qi(s)},_performZoom:function(){var s=this._map,u=s.getZoom(),p=this._map.options.zoomSnap||0;s._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,b=p?Math.ceil(C/p)*p:C,U=s._limitZoom(u+(this._delta>0?b:-b))-u;this._delta=0,this._startTime=null,U&&(s.options.scrollWheelZoom==="center"?s.setZoom(u+U):s.setZoomAround(this._lastMousePos,u+U))}});lt.addInitHook("addHandler","scrollWheelZoom",Hs);var lo=600;lt.mergeOptions({tapHold:Ce.touchNative&&Ce.safari&&Ce.mobile,tapTolerance:15});var ga=mi.extend({addHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){At(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var u=s.touches[0];this._startPos=this._newPos=new de(u.clientX,u.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(Ve(document,"touchend",Qt),Ve(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),lo),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){At(document,"touchend",Qt),At(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),At(document,"touchend touchcancel contextmenu",this._cancel,this),At(document,"touchmove",this._onMove,this)},_onMove:function(s){var u=s.touches[0];this._newPos=new de(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,u){var p=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});lt.addInitHook("addHandler","tapHold",ga),lt.mergeOptions({touchZoom:Ce.touch,bounceAtZoomLimits:!0});var yr=mi.extend({addHooks:function(){Je(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){qt(this._map._container,"leaflet-touch-zoom"),At(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var u=this._map;if(!(!s.touches||s.touches.length!==2||u._animatingZoom||this._zooming)){var p=u.mouseEventToContainerPoint(s.touches[0]),T=u.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(T)._divideBy(2))),this._startDist=p.distanceTo(T),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),Qt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var u=this._map,p=u.mouseEventToContainerPoint(s.touches[0]),T=u.mouseEventToContainerPoint(s.touches[1]),C=p.distanceTo(T)/this._startDist;if(this._zoom=u.getScaleZoom(C,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&C<1||this._zoom>u.getMaxZoom()&&C>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var b=p._add(T)._divideBy(2)._subtract(this._centerPoint);if(C===1&&b.x===0&&b.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),ne(this._animRequest);var U=h(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=me(U,this,!0),Qt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ne(this._animRequest),At(document,"touchmove",this._onTouchMove,this),At(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});lt.addInitHook("addHandler","touchZoom",yr),lt.BoxZoom=Pn,lt.DoubleClickZoom=pa,lt.Drag=yi,lt.Keyboard=_r,lt.ScrollWheelZoom=Hs,lt.TapHold=ga,lt.TouchZoom=yr,o.Bounds=z,o.Browser=Ce,o.CRS=Ae,o.Canvas=ma,o.Circle=la,o.CircleMarker=ko,o.Class=ve,o.Control=On,o.DivIcon=Ol,o.DivOverlay=Cn,o.DomEvent=ia,o.DomUtil=Do,o.Draggable=Gi,o.Evented=ue,o.FeatureGroup=pi,o.GeoJSON=Ni,o.GridLayer=Go,o.Handler=mi,o.Icon=gi,o.ImageOverlay=Bo,o.LatLng=ye,o.LatLngBounds=fe,o.Layer=ai,o.LayerGroup=zo,o.LineUtil=Ec,o.Map=lt,o.Marker=Rs,o.Mixin=yc,o.Path=vi,o.Point=de,o.PolyUtil=mr,o.Polygon=Ho,o.Polyline=Ri,o.Popup=Ls,o.PosAnimation=Lo,o.Projection=Nl,o.Rectangle=ro,o.Renderer=Ln,o.SVG=Vo,o.SVGOverlay=ha,o.TileLayer=Yi,o.Tooltip=Ps,o.Transformation=sn,o.Util=Pe,o.VideoOverlay=Zi,o.bind=h,o.bounds=$,o.canvas=zs,o.circle=Ul,o.circleMarker=Pl,o.control=bi,o.divIcon=bc,o.extend=l,o.featureGroup=Dl,o.geoJSON=fa,o.geoJson=Ds,o.gridLayer=Bl,o.icon=ws,o.imageOverlay=zl,o.latLng=ge,o.latLngBounds=he,o.layerGroup=Cc,o.map=lr,o.marker=Ll,o.point=_e,o.polygon=wc,o.polyline=Ac,o.popup=Hl,o.rectangle=Rc,o.setOptions=P,o.stamp=y,o.svg=ks,o.svgOverlay=kl,o.tileLayer=Yn,o.tooltip=Mc,o.transformation=nt,o.version=a,o.videoOverlay=qo;var Sr=window.L;o.noConflict=function(){return window.L=Sr,this},window.L=o}))})(il,il.exports)),il.exports}var Qa=Vw();const Fa=Of(Qa);function uc(n,e,o){return Object.freeze({instance:n,context:e,container:o})}function cc(n,e){return e==null?function(a,l){const d=D.useRef(void 0);return d.current||(d.current=n(a,l)),d}:function(a,l){const d=D.useRef(void 0);d.current||(d.current=n(a,l));const h=D.useRef(a),{instance:v}=d.current;return D.useEffect(function(){h.current!==a&&(e(v,a,h.current),h.current=a)},[v,a,e]),d}}function W_(n,e){D.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){var d;(d=e.layerContainer)==null||d.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function $_(n){return function(o){const a=rc(),l=n(lc(o,a),a);return K_(a.map,o.attribution),jf(l.current,o.eventHandlers),W_(l.current,a),l}}function Fw(n,e){const o=D.useRef(void 0);D.useEffect(function(){if(e.pathOptions!==o.current){const l=e.pathOptions??{};n.instance.setStyle(l),o.current=l}},[n,e])}function Zw(n){return function(o){const a=rc(),l=n(lc(o,a),a);return jf(l.current,o.eventHandlers),W_(l.current,a),Fw(l.current,o),l}}function Yw(n,e){const o=cc(n,e),a=$_(o);return Q_(a)}function Jw(n,e){const o=cc(n),a=qw(o,e);return Ow(a)}function Kw(n,e){const o=cc(n,e),a=Zw(o);return Q_(a)}function Xw(n,e){const o=cc(n,e),a=$_(o);return Bw(a)}function Qw(n,e,o){const{opacity:a,zIndex:l}=e;a!=null&&a!==o.opacity&&n.setOpacity(a),l!=null&&l!==o.zIndex&&n.setZIndex(l)}function Ww(){return rc().map}function $w({bounds:n,boundsOptions:e,center:o,children:a,className:l,id:d,placeholder:h,style:v,whenReady:y,zoom:_,...x},E){const[M]=D.useState({className:l,id:d,style:v}),[R,O]=D.useState(null),P=D.useRef(void 0);D.useImperativeHandle(E,()=>(R==null?void 0:R.map)??null,[R]);const H=D.useCallback(q=>{if(q!==null&&!P.current){const B=new Qa.Map(q,x);P.current=B,o!=null&&_!=null?B.setView(o,_):n!=null&&B.fitBounds(n,e),y!=null&&B.whenReady(y),O(Hw(B))}},[]);D.useEffect(()=>()=>{R==null||R.map.remove()},[R]);const I=R?on.createElement($f,{value:R},a):h??null;return on.createElement("div",{...M,ref:H},I)}const jw=D.forwardRef($w),hf=Yw(function({position:e,...o},a){const l=new Qa.Marker(e,o);return uc(l,X_(a,{overlayContainer:l}))},function(e,o,a){o.position!==a.position&&e.setLatLng(o.position),o.icon!=null&&o.icon!==a.icon&&e.setIcon(o.icon),o.zIndexOffset!=null&&o.zIndexOffset!==a.zIndexOffset&&e.setZIndexOffset(o.zIndexOffset),o.opacity!=null&&o.opacity!==a.opacity&&e.setOpacity(o.opacity),e.dragging!=null&&o.draggable!==a.draggable&&(o.draggable===!0?e.dragging.enable():e.dragging.disable())}),mf=Kw(function({positions:e,...o},a){const l=new Qa.Polyline(e,o);return uc(l,X_(a,{overlayContainer:l}))},function(e,o,a){o.positions!==a.positions&&e.setLatLngs(o.positions)}),nl=Jw(function(e,o){const a=new Qa.Popup(e,o.overlayContainer);return uc(a,o)},function(e,o,{position:a},l){D.useEffect(function(){const{instance:h}=e;function v(_){_.popup===h&&(h.update(),l(!0))}function y(_){_.popup===h&&l(!1)}return o.map.on({popupopen:v,popupclose:y}),o.overlayContainer==null?(a!=null&&h.setLatLng(a),h.openOn(o.map)):o.overlayContainer.bindPopup(h),function(){var x;o.map.off({popupopen:v,popupclose:y}),(x=o.overlayContainer)==null||x.unbindPopup(),o.map.removeLayer(h)}},[e,o,l,a])}),eM=Xw(function({url:e,...o},a){const l=new Qa.TileLayer(e,lc(o,a));return uc(l,a)},function(e,o,a){Qw(e,o,a);const{url:l}=o;l!=null&&l!==a.url&&e.setUrl(l)}),Vv=new Fa.Icon({iconUrl:"data:image/svg+xml;base64,"+btoa(`
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" stroke="black" stroke-width="1.5" stroke-linejoin="round">
            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
        </svg>
    `),iconSize:[38,38],iconAnchor:[19,19],popupAnchor:[0,-20],className:""}),tM=(n,e)=>new Fa.DivIcon({className:"custom-div-icon",html:`<div style="background-color: ${e}; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.3);">${n}</div>`,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]}),nM=({truckPosition:n,destination:e,otherShipments:o})=>{const a=Ww(),[l,d]=D.useState(null),[h,v]=D.useState(!1);return D.useEffect(()=>{const y=()=>{v(!0)};return a.on("zoomstart",y),a.on("movestart",y),()=>{a.off("zoomstart",y),a.off("movestart",y)}},[a]),D.useEffect(()=>{a.invalidateSize();const y=l===null||Math.abs(n[0]-l[0])>.001||Math.abs(n[1]-l[1])>.001;if(y&&!h){const _=[n,e];o&&o.forEach(E=>{_.push(E.truckPosition)});const x=Fa.latLngBounds(_);a.fitBounds(x,{padding:[50,50],maxZoom:13,animate:!0,duration:1.5}),d(n)}else y&&d(n);if(h&&y){const _=setTimeout(()=>{v(!1)},5e3);return()=>clearTimeout(_)}},[n,e,a,l,h,o]),null},j_=({truckPosition:n,routePath:e,stops:o,currentSpeed:a,isUnloading:l,unloadingMinutesRemaining:d,alternativeRoutes:h=[],activeRouteId:v,onRouteSelect:y,otherShipments:_=[],customStopLabels:x={}})=>{var P,H;const[E,M]=D.useState(null);if(!n||!Array.isArray(n)||n.length!==2)return A.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:A.jsxs("div",{className:"text-center p-4",children:[A.jsx("div",{className:"animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto mb-3"}),A.jsx("p",{className:"text-gray-600",children:"Waiting for GPS position..."})]})});if(!e||e.length===0)return A.jsx("div",{className:"flex items-center justify-center h-full bg-gray-100",children:A.jsxs("div",{className:"text-center p-4",children:[A.jsx("div",{className:"animate-pulse h-8 w-8 bg-blue-200 rounded-full mx-auto mb-3"}),A.jsx("p",{className:"text-gray-600",children:"Loading route data..."}),A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Fetching from OSRM service"})]})});const R=((P=o.find(I=>I.status==="Pending"))==null?void 0:P.location)||((H=o[o.length-1])==null?void 0:H.location)||e[e.length-1];let O;try{const I=e.filter(q=>Array.isArray(q)&&q.length===2&&!isNaN(q[0])&&!isNaN(q[1])&&q[0]>=-90&&q[0]<=90&&q[1]>=-180&&q[1]<=180);I.length<2?O=Fa.latLngBounds([n,R]):O=Fa.latLngBounds(I)}catch(I){console.error("Error creating map bounds:",I),O=Fa.latLngBounds([n,R])}return A.jsxs(jw,{center:e[0],bounds:O,scrollWheelZoom:!0,zoomControl:!0,className:"h-full w-full z-0",children:[A.jsx(eM,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),h.map(I=>I.id===v?null:A.jsx(mf,{positions:I.path,color:"#22c55e",weight:5,opacity:.6,dashArray:"8, 8",eventHandlers:{click:()=>{console.log(` Clicked alternative route: ${I.id}`),y&&y(I.id)},mouseover:B=>{B.target.setStyle({opacity:.9,weight:6})},mouseout:B=>{B.target.setStyle({opacity:.6,weight:5})}},children:A.jsx(nl,{children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-bold text-sm mb-1",children:I.metadata.routeType==="toll-free"?" Toll-Free Route":I.metadata.routeType==="fastest"?" Fastest Route":I.metadata.routeType==="shortest"?" Shortest Route":" Balanced Route"}),A.jsxs("div",{className:"text-xs text-gray-600",children:["ETA: ",I.metadata.currentETAMinutes," min"]}),A.jsx("div",{className:"text-xs text-blue-600 mt-1 cursor-pointer hover:underline",children:"Click to select this route"})]})})},I.id)),A.jsx(mf,{positions:e,color:"#3b82f6",weight:5,opacity:.9,children:A.jsx(nl,{children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-bold text-sm text-blue-600 mb-1",children:" Active Route"}),A.jsx("div",{className:"text-xs text-gray-600",children:"Currently following this route"})]})})}),o.map((I,q)=>{const B=x[I.id]||(q+1).toString();return A.jsx(hf,{position:I.location,icon:tM(B,I.status==="Completed"?"#4ade80":"#9ca3af"),children:A.jsxs(nl,{children:[B,". ",I.name]})},I.id)}),A.jsx(hf,{position:n,icon:Vv,children:A.jsx(nl,{children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-bold text-sm mb-1",children:l?" Unloading":"Current Location"}),l&&d!==void 0&&A.jsxs("div",{className:"text-orange-600 font-semibold mb-2",children:[" ",d," min remaining"]}),a!==void 0&&!l&&A.jsxs("div",{className:"text-blue-600 font-semibold",children:[" ",Math.round(a)," mph"]})]})})}),A.jsx(nM,{truckPosition:n,destination:R,otherShipments:_}),_.map(I=>A.jsxs(on.Fragment,{children:[A.jsx(mf,{positions:I.routePath,color:I.color||"#9ca3af",weight:4,opacity:.6,dashArray:"5, 10"}),A.jsx(hf,{position:I.truckPosition,icon:Vv,opacity:.7,children:A.jsx(nl,{children:A.jsxs("div",{className:"p-2",children:[A.jsxs("h3",{className:"font-bold text-gray-800",children:["Shipment ",I.id]}),A.jsx("p",{className:"text-sm text-gray-600",children:"Tracking..."})]})})})]},I.id))]})},fs=({icon:n,title:e,value:o,colorClass:a,subtext:l})=>A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md flex items-start space-x-4",children:[A.jsx("div",{className:`p-3 rounded-full ${a} text-white`,children:A.jsx(Ze,{name:n,className:"h-6 w-6"})}),A.jsxs("div",{children:[A.jsx("p",{className:"text-sm text-gray-500 font-medium",children:e}),A.jsx("p",{className:"text-xl font-bold text-gray-800",children:o}),l&&A.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l})]})]});class iM{constructor(){this.listeners=new Map,this.eventHistory=[],this.maxHistorySize=100}subscribe(e,o){return this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(o),()=>{const a=this.listeners.get(e);if(a){const l=a.indexOf(o);l>-1&&a.splice(l,1)}}}async publishRerouteEvent(e){console.log(" Publishing reroute event:",e.eventType,e.eventId);try{this.eventHistory.unshift(e),this.eventHistory.length>this.maxHistorySize&&this.eventHistory.pop(),this.persistEvent(e),(this.listeners.get(e.shipmentId)||[]).forEach(a=>{try{a(e)}catch(l){console.error("Error in reroute event callback:",l)}}),await this.notifyAffectedParties(e),console.log(" Reroute event published successfully")}catch(o){throw console.error("Error publishing reroute event:",o),o}}getEventHistory(e){return e?this.eventHistory.filter(o=>o.shipmentId===e):[...this.eventHistory]}clearHistory(){this.eventHistory=[];try{localStorage.removeItem("reroute_event_history")}catch(e){console.error("Error clearing event history:",e)}}persistEvent(e){try{const o=localStorage.getItem("reroute_event_history"),a=o?JSON.parse(o):[];a.unshift({...e,timestamp:e.timestamp.toISOString()}),a.length>50&&a.splice(50),localStorage.setItem("reroute_event_history",JSON.stringify(a))}catch(o){console.warn("Could not persist reroute event:",o)}}async notifyAffectedParties(e){const o=this.getTrackingNumberMap(),a=Object.entries(o).filter(([l,d])=>d.shipmentId===e.shipmentId).map(([l,d])=>({trackingNumber:l,...d}));for(const l of a){const d=this.buildNotification(l,e);"Notification"in window&&Notification.permission==="granted"&&new Notification("Delivery Update",{body:d.message,icon:"/truck-icon.png"}),console.log(` Notification for ${l.trackingNumber}:`,d),this.queueNotification(l.trackingNumber,d)}}buildNotification(e,o){const{role:a,recipientStopId:l}=e;if(a===Vt.SUPPLIER){const d=o.changes.newETAs.hub||o.changes.newETAs[Object.keys(o.changes.newETAs)[0]];return{type:"ETA_UPDATE",message:`Route optimized. Delivery ETA updated to ${d} minutes. ${o.changes.reason}`,newETA:d,oldETA:o.changes.oldETAs.hub}}if(a===Vt.RECIPIENT&&l){const d=o.changes.oldETAs[l],h=o.changes.newETAs[l],v=h-d;if(o.eventType==="LAST_MILE_RESEQUENCE"){const y=o.changes.affectedStops.indexOf(l)+1,_=Object.keys(o.changes.newETAs),x=_.indexOf(l)+1;return{type:"SEQUENCE_CHANGE",message:`Delivery sequence optimized. You are now stop ${x} of ${_.length}. New ETA: ${h} minutes (${v>0?"+":""}${v} min). ${o.changes.reason}`,newETA:h,oldETA:d,newPosition:x,oldPosition:y}}return{type:"ETA_UPDATE",message:`Route updated. New ETA: ${h} minutes (${v>0?"+":""}${v} min). ${o.changes.reason}`,newETA:h,oldETA:d}}return{type:"REROUTE",message:`Route updated. ${o.changes.reason}`}}getTrackingNumberMap(){try{const e=localStorage.getItem("trackingNumberMap");return e?JSON.parse(e):{}}catch(e){return console.error("Error reading tracking number map:",e),{}}}queueNotification(e,o){try{const a=`notifications_${e}`,l=localStorage.getItem(a),d=l?JSON.parse(l):[];d.unshift({...o,timestamp:new Date().toISOString()}),d.length>20&&d.splice(20),localStorage.setItem(a,JSON.stringify(d))}catch(a){console.warn("Could not queue notification:",a)}}getNotifications(e){try{const o=`notifications_${e}`,a=localStorage.getItem(o);return a?JSON.parse(a).map(d=>({...d,timestamp:new Date(d.timestamp)})):[]}catch(o){return console.error("Error reading notifications:",o),[]}}clearNotifications(e){try{const o=`notifications_${e}`;localStorage.removeItem(o)}catch(o){console.error("Error clearing notifications:",o)}}}const $u=new iM;"Notification"in window&&Notification.permission==="default"&&Notification.requestPermission();const oM=({trackingNumber:n,role:e,shipment:o,recipientStopId:a})=>{const{shipment:l,truckPosition:d,eta:h,confidence:v,delayReason:y,isLoading:_,isVisible:x,visibleStops:E,visiblePath:M,lastApiUpdate:R,nextApiUpdate:O,traffic:P,weather:H,currentSpeed:I,isUnloading:q,unloadingTimeRemaining:B,currentUnloadingStop:ee}=J_(o,e,a),[j,X]=D.useState([]);D.useEffect(()=>{if(!(o!=null&&o.trackingNumber))return;const ne=$u.getNotifications(n);ne.length>0&&X(ne.map((ve,Ge)=>({...ve,id:`existing-${Ge}`})));const Pe=$u.subscribe(o.trackingNumber,ve=>{console.log(" Reroute event received in TrackingView:",ve.eventType);let Ge="",Z="ETA_UPDATE";if(ve.eventType==="LONG_HAUL_REROUTE"){Z="REROUTE";const de=(ve.changes.oldETAs.nextStop||0)-(ve.changes.newETAs.nextStop||0);Ge=de>0?`Route optimized! ETA improved by ${Math.round(de)} minutes. ${ve.changes.reason}`:`Route updated. ${ve.changes.reason}`}else ve.eventType==="LAST_MILE_RESEQUENCE"?(Z="SEQUENCE_CHANGE",Ge=`Delivery sequence optimized. ${ve.changes.reason}`):Ge=`Route updated. ${ve.changes.reason}`;const ue={type:Z,message:Ge,newETA:ve.changes.newETAs.nextStop,oldETA:ve.changes.oldETAs.nextStop,timestamp:new Date,id:ve.eventId};X(de=>[ue,...de].slice(0,5))});return()=>Pe()},[o==null?void 0:o.trackingNumber,n]);const Y=D.useCallback(ne=>{X(Pe=>Pe.filter(ve=>ve.id!==ne))},[]),[oe,le]=D.useState({lastUpdate:"0s ago",nextUpdate:"60s"});if(on.useEffect(()=>{const ne=()=>{if(!R)return;const Ge=Math.floor((new Date().getTime()-R.getTime())/1e3);le({lastUpdate:(ue=>{if(ue<60)return`${ue}s ago`;const de=Math.floor(ue/60),Fe=ue%60;return`${de}:${Fe.toString().padStart(2,"0")} ago`})(Ge),nextUpdate:""})};ne();const Pe=setInterval(ne,1e3);return()=>clearInterval(Pe)},[R]),_)return A.jsx("div",{className:"text-center p-8",children:"Loading shipment data..."});const pe=E.find(ne=>ne.status!=="Completed"),me=()=>{if(e===Vt.RECIPIENT&&a){const ne=l.shipmentItems.find(Pe=>Pe.destinationStopId===a);return A.jsxs("p",{children:[A.jsx("strong",{children:"Your Delivery:"})," ",(ne==null?void 0:ne.contents)||"N/A"]})}return l.shipmentItems.length===0?A.jsxs("p",{children:[A.jsx("strong",{children:"Contents:"})," No items listed."]}):A.jsxs("div",{children:[A.jsx("p",{children:A.jsx("strong",{children:"Manifest Summary:"})}),A.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mt-1 pl-2",children:l.shipmentItems.map(ne=>A.jsxs("li",{children:[A.jsxs("span",{className:"font-semibold text-indigo-600",children:[ne.quantity,"x"]})," ",ne.contents]},ne.id))})]})};return A.jsxs("div",{className:"h-full w-full flex flex-col md:flex-row bg-gray-50",children:[A.jsx("div",{className:"md:w-2/3 h-1/2 md:h-full",children:x?A.jsx(j_,{truckPosition:d,routePath:M,stops:E,currentSpeed:I,isUnloading:q,unloadingMinutesRemaining:Math.ceil(B/60)}):A.jsx("div",{className:"flex h-full items-center justify-center bg-gray-200",children:A.jsxs("div",{className:"text-center p-4 bg-white rounded-lg shadow-lg",children:[A.jsx(Ze,{name:"truck",className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),A.jsx("h2",{className:"text-xl font-semibold text-gray-700",children:"Awaiting Your Shipment Segment"}),A.jsx("p",{className:"text-gray-500 mt-2",children:e===Vt.SUPPLIER?"The shipment has left the distribution hub. Your tracking view has ended.":"Your delivery segment has not yet begun. The map will become active when the truck is en route to you."})]})})}),A.jsxs("div",{className:"md:w-1/3 h-1/2 md:h-full p-4 overflow-y-auto space-y-4",children:[A.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Tracking #",n]}),A.jsxs("p",{className:"text-sm text-gray-500 -mt-3 pb-2 border-b",children:["Role: ",e]}),j.length>0&&A.jsx("div",{className:"space-y-2",children:j.map(ne=>A.jsxs("div",{className:`p-3 rounded-lg border-l-4 shadow-sm animate-slide-down relative ${ne.type==="REROUTE"?"bg-green-50 border-green-500 text-green-800":ne.type==="SEQUENCE_CHANGE"?"bg-blue-50 border-blue-500 text-blue-800":"bg-indigo-50 border-indigo-500 text-indigo-800"}`,children:[A.jsx("button",{onClick:()=>Y(ne.id),className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",children:A.jsx(Ze,{name:"x-circle",className:"h-4 w-4"})}),A.jsxs("div",{className:"flex items-start space-x-2",children:[A.jsx(Ze,{name:ne.type==="REROUTE"?"zap":ne.type==="SEQUENCE_CHANGE"?"list":"bell",className:"h-5 w-5 mt-0.5 flex-shrink-0"}),A.jsxs("div",{className:"flex-1 pr-4",children:[A.jsx("p",{className:"text-sm font-medium",children:ne.message}),ne.newETA!==void 0&&ne.oldETA!==void 0&&A.jsxs("p",{className:"text-xs mt-1 opacity-75",children:["ETA: ",Math.round(ne.oldETA)," min  ",Math.round(ne.newETA)," min"]}),A.jsx("p",{className:"text-xs opacity-50 mt-1",children:ne.timestamp.toLocaleTimeString()})]})]})]},ne.id))}),A.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3 text-xs",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"animate-pulse h-2 w-2 bg-green-500 rounded-full"}),A.jsx(Ze,{name:"clock",className:"h-4 w-4 text-blue-600"}),A.jsxs("span",{className:"text-gray-700",children:["Last updated: ",A.jsx("span",{className:"font-semibold text-blue-600",children:oe.lastUpdate})]})]})}),q&&ee&&A.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-amber-100 border-l-4 border-orange-500 text-orange-900 p-4 rounded-md shadow-lg",children:[A.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[A.jsx(Ze,{name:"truck",className:"h-6 w-6 text-orange-600"}),A.jsx("p",{className:"font-bold text-lg",children:" Unloading in Progress"})]}),A.jsx("p",{className:"text-sm",children:(()=>{const ne=E.find(ve=>ve.id===ee),Pe=Math.ceil(B/60);return`Unloading at ${(ne==null?void 0:ne.name)||"delivery location"} - ${Pe} minutes remaining`})()})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx(fs,{icon:"clock",title:"ETA to Next Stop",value:new Date(Date.now()+h*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),colorClass:"bg-blue-500",subtext:pe==null?void 0:pe.name}),A.jsx(fs,{icon:"pin",title:"Confidence",value:v,colorClass:v===wn.HIGH?"bg-green-500":"bg-yellow-500"}),A.jsx(fs,{icon:"traffic",title:"Traffic",value:(P==null?void 0:P.status)||"N/A",colorClass:"bg-red-500",subtext:P==null?void 0:P.description}),A.jsx(fs,{icon:"cloud",title:"Weather",value:(H==null?void 0:H.condition)||"N/A",colorClass:"bg-purple-500",subtext:H==null?void 0:H.description})]}),y&&A.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md",role:"alert",children:[A.jsx("p",{className:"font-bold",children:"Delay Information"}),A.jsx("p",{children:y})]}),A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Shipment Details"}),me(),A.jsxs("p",{className:"mt-2",children:[A.jsx("strong",{children:"Status:"})," ",A.jsx("span",{className:"font-medium text-indigo-600",children:l.status})]})]}),A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Route for You"}),A.jsx("ul",{className:"space-y-3",children:E.map((ne,Pe)=>{const ve=ne.status==="Unloading"?`Unloading (${ne.unloadingTimeMinutes||0} min)`:ne.status,Ge=ne.status==="Unloading"&&ne.id===ee;return A.jsxs("li",{className:"flex items-center",children:[A.jsx(Ze,{name:ne.status==="Completed"?"check-circle":"x-circle",className:`h-6 w-6 mr-3 ${ne.status==="Completed"?"text-green-500":Ge?"text-orange-500 animate-pulse":"text-gray-400"}`}),A.jsxs("div",{children:[A.jsx("p",{className:`font-medium ${ne.status==="Completed"?"text-gray-500":"text-gray-800"}`,children:ne.name}),A.jsx("p",{className:`text-sm ${Ge?"text-orange-600 font-semibold":"text-gray-500"}`,children:ve})]})]},ne.id)})})]})]})]})},sM=({routes:n,activeRouteId:e,recommendedRouteId:o,onSelectRoute:a,truckPosition:l,currentETA:d,trafficData:h,weatherData:v})=>{const[y,_]=D.useState(!1),x=n.find(E=>E.id===e)||n[0];return n.length===1?null:A.jsxs("div",{className:"route-selector bg-white rounded-lg shadow-md overflow-hidden",children:[A.jsxs("div",{className:"active-route-bar bg-indigo-600 text-white p-3 flex justify-between items-center cursor-pointer hover:bg-indigo-700 transition",onClick:()=>_(!y),children:[A.jsxs("div",{className:"flex items-center space-x-3",children:[A.jsx(Ze,{name:"route",className:"h-5 w-5"}),A.jsxs("div",{children:[A.jsxs("span",{className:"font-bold capitalize",children:[x.metadata.routeType," Route"]}),A.jsx("span",{className:"ml-2 text-indigo-200",children:""}),A.jsxs("span",{className:"ml-2 text-sm",children:["ETA: ",(()=>{const E=d!==void 0?d:x.metadata.currentETAMinutes;return`${new Date(Date.now()+E*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} (${Math.round(E)}m)`})()]})]})]}),A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsxs("span",{className:"text-sm bg-indigo-500 px-2 py-1 rounded",children:[n.length-1," alternative",n.length>2?"s":""]}),A.jsx(Ze,{name:"chevron-down",className:`h-5 w-5 transition-transform ${y?"rotate-180":""}`})]})]}),y&&A.jsx("div",{className:"routes-grid p-4",children:A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(E=>A.jsx(aM,{route:E,isActive:E.id===e,recommendedRouteId:o,currentETA:d,trafficData:h,weatherData:v,onSelect:()=>{console.log(` User clicked route: ${E.id} (${E.metadata.routeType})`),a(E.id),setTimeout(()=>_(!1),100)}},E.id))})})]})},aM=({route:n,isActive:e,recommendedRouteId:o,currentETA:a,trafficData:l,weatherData:d,onSelect:h})=>{var x;const v=(l==null?void 0:l.status)||n.liveConditions.currentTrafficLevel,y=(d==null?void 0:d.condition)||n.liveConditions.weatherCondition,_=(d==null?void 0:d.description)||n.liveConditions.weatherCondition;return A.jsxs("div",{className:`route-card border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-lg ${e?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-300 hover:border-indigo-400 bg-white"}`,onClick:h,children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-bold text-lg capitalize",children:n.metadata.routeType}),n.id===o&&A.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Recommended"})]}),e&&A.jsx(Ze,{name:"check-circle",className:"h-6 w-6 text-green-500 flex-shrink-0"})]}),A.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsx("span",{className:"text-gray-600",children:"ETA:"}),A.jsx("span",{className:"font-bold text-lg text-indigo-600",children:(()=>{const E=e&&a!==void 0?a:n.metadata.currentETAMinutes;return(E>1e3||E<0)&&console.warn(` Route ${n.id} has suspicious ETA: ${E} minutes`),`${new Date(Date.now()+E*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} (${Math.round(E)} min)`})()})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Distance:"}),A.jsxs("span",{className:"font-medium",children:[n.metadata.totalDistanceMiles.toFixed(1)," mi"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Fuel Cost:"}),A.jsxs("span",{className:"font-medium text-gray-800",children:["$",((x=n.metadata.fuelCost)==null?void 0:x.toFixed(2))||"0.00"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Highway:"}),A.jsxs("span",{className:"font-medium",children:[Math.round(n.metadata.highwayMiles/n.metadata.totalDistanceMiles*100),"%"]})]}),n.metadata.tollRoadMiles>0&&A.jsxs("div",{className:"flex justify-between text-yellow-700",children:[A.jsxs("span",{className:"flex items-center",children:[A.jsx(Ze,{name:"alert-triangle",className:"h-4 w-4 mr-1"}),"Tolls:"]}),A.jsxs("span",{className:"font-medium",children:[n.metadata.tollRoadMiles.toFixed(1)," mi"]})]})]}),A.jsxs("div",{className:"flex gap-2 mb-3",children:[A.jsx(rM,{label:"Traffic",score:n.metadata.trafficRiskScore}),A.jsx(lM,{condition:y})]}),A.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-200",children:[A.jsxs("div",{className:"flex items-center space-x-1",children:[A.jsx(Ze,{name:"shield-check",className:"h-3 w-3"}),A.jsxs("span",{children:["Confidence: ",n.liveConditions.confidence]})]}),A.jsxs("span",{children:[v," traffic"]})]}),_&&A.jsx("div",{className:"text-xxs text-gray-500 mt-1",children:_})]})},rM=({label:n,score:e})=>{const o=()=>e<.3?"bg-green-100 text-green-700 border-green-300":e<.6?"bg-yellow-100 text-yellow-700 border-yellow-300":"bg-red-100 text-red-700 border-red-300",a=()=>e<.3?"Low":e<.6?"Med":"High";return A.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded border text-xs ${o()}`,children:[A.jsxs("span",{className:"font-medium",children:[n,":"]}),A.jsx("span",{children:a()})]})},lM=({condition:n})=>{const e=()=>{const d=(n==null?void 0:n.toString().toLowerCase())||"clear";return d.includes("storm")||d.includes("thunder")||d.includes("severe")?{color:"bg-red-100 text-red-700 border-red-300",label:"Storm",icon:""}:d.includes("rain")||d.includes("drizzle")||d.includes("shower")?{color:"bg-blue-100 text-blue-700 border-blue-300",label:"Rain",icon:""}:d.includes("snow")||d.includes("sleet")||d.includes("ice")?{color:"bg-blue-100 text-blue-700 border-blue-300",label:"Snow",icon:""}:d.includes("cloud")||d.includes("overcast")||d.includes("fog")||d.includes("mist")?{color:"bg-gray-100 text-gray-700 border-gray-300",label:"Cloudy",icon:""}:{color:"bg-green-100 text-green-700 border-green-300",label:"Clear",icon:""}},{color:o,label:a,icon:l}=e();return A.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded border text-xs ${o}`,children:[A.jsx("span",{children:l}),A.jsx("span",{className:"font-medium",children:"Weather:"}),A.jsx("span",{children:a})]})};function uM(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return D.useMemo(()=>a=>{e.forEach(l=>l(a))},e)}const dc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Wa(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function eh(n){return"nodeType"in n}function ti(n){var e,o;return n?Wa(n)?n:eh(n)&&(e=(o=n.ownerDocument)==null?void 0:o.defaultView)!=null?e:window:window}function th(n){const{Document:e}=ti(n);return n instanceof e}function hl(n){return Wa(n)?!1:n instanceof ti(n).HTMLElement}function ey(n){return n instanceof ti(n).SVGElement}function $a(n){return n?Wa(n)?n.document:eh(n)?th(n)?n:hl(n)||ey(n)?n.ownerDocument:document:document:document}const ji=dc?D.useLayoutEffect:D.useEffect;function nh(n){const e=D.useRef(n);return ji(()=>{e.current=n}),D.useCallback(function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.current==null?void 0:e.current(...a)},[])}function cM(){const n=D.useRef(null),e=D.useCallback((a,l)=>{n.current=setInterval(a,l)},[]),o=D.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,o]}function ul(n,e){e===void 0&&(e=[n]);const o=D.useRef(n);return ji(()=>{o.current!==n&&(o.current=n)},e),o}function ml(n,e){const o=D.useRef();return D.useMemo(()=>{const a=n(o.current);return o.current=a,a},[...e])}function ju(n){const e=nh(n),o=D.useRef(null),a=D.useCallback(l=>{l!==o.current&&(e==null||e(l,o.current)),o.current=l},[]);return[o,a]}function If(n){const e=D.useRef();return D.useEffect(()=>{e.current=n},[n]),e.current}let pf={};function pl(n,e){return D.useMemo(()=>{if(e)return e;const o=pf[n]==null?0:pf[n]+1;return pf[n]=o,n+"-"+o},[n,e])}function ty(n){return function(e){for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return a.reduce((d,h)=>{const v=Object.entries(h);for(const[y,_]of v){const x=d[y];x!=null&&(d[y]=x+n*_)}return d},{...e})}}const Za=ty(1),cl=ty(-1);function dM(n){return"clientX"in n&&"clientY"in n}function ih(n){if(!n)return!1;const{KeyboardEvent:e}=ti(n.target);return e&&n instanceof e}function fM(n){if(!n)return!1;const{TouchEvent:e}=ti(n.target);return e&&n instanceof e}function Df(n){if(fM(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:o}=n.touches[0];return{x:e,y:o}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:o}=n.changedTouches[0];return{x:e,y:o}}}return dM(n)?{x:n.clientX,y:n.clientY}:null}const dl=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:o}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(o?Math.round(o):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:o}=n;return"scaleX("+e+") scaleY("+o+")"}},Transform:{toString(n){if(n)return[dl.Translate.toString(n),dl.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:o,easing:a}=n;return e+" "+o+"ms "+a}}}),Fv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function hM(n){return n.matches(Fv)?n:n.querySelector(Fv)}const mM={display:"none"};function pM(n){let{id:e,value:o}=n;return on.createElement("div",{id:e,style:mM},o)}function gM(n){let{id:e,announcement:o,ariaLiveType:a="assertive"}=n;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return on.createElement("div",{id:e,style:l,role:"status","aria-live":a,"aria-atomic":!0},o)}function vM(){const[n,e]=D.useState("");return{announce:D.useCallback(a=>{a!=null&&e(a)},[]),announcement:n}}const ny=D.createContext(null);function _M(n){const e=D.useContext(ny);D.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function yM(){const[n]=D.useState(()=>new Set),e=D.useCallback(a=>(n.add(a),()=>n.delete(a)),[n]);return[D.useCallback(a=>{let{type:l,event:d}=a;n.forEach(h=>{var v;return(v=h[l])==null?void 0:v.call(h,d)})},[n]),e]}const SM={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},TM={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:o}=n;return o?"Draggable item "+e.id+" was moved over droppable area "+o.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:o}=n;return o?"Draggable item "+e.id+" was dropped over droppable area "+o.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function xM(n){let{announcements:e=TM,container:o,hiddenTextDescribedById:a,screenReaderInstructions:l=SM}=n;const{announce:d,announcement:h}=vM(),v=pl("DndLiveRegion"),[y,_]=D.useState(!1);if(D.useEffect(()=>{_(!0)},[]),_M(D.useMemo(()=>({onDragStart(E){let{active:M}=E;d(e.onDragStart({active:M}))},onDragMove(E){let{active:M,over:R}=E;e.onDragMove&&d(e.onDragMove({active:M,over:R}))},onDragOver(E){let{active:M,over:R}=E;d(e.onDragOver({active:M,over:R}))},onDragEnd(E){let{active:M,over:R}=E;d(e.onDragEnd({active:M,over:R}))},onDragCancel(E){let{active:M,over:R}=E;d(e.onDragCancel({active:M,over:R}))}}),[d,e])),!y)return null;const x=on.createElement(on.Fragment,null,on.createElement(pM,{id:a,value:l.draggable}),on.createElement(gM,{id:v,announcement:h}));return o?Ba.createPortal(x,o):x}var Sn;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Sn||(Sn={}));function ec(){}function Zv(n,e){return D.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function EM(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return D.useMemo(()=>[...e].filter(a=>a!=null),[...e])}const Ui=Object.freeze({x:0,y:0});function iy(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function oy(n,e){let{data:{value:o}}=n,{data:{value:a}}=e;return o-a}function CM(n,e){let{data:{value:o}}=n,{data:{value:a}}=e;return a-o}function Yv(n){let{left:e,top:o,height:a,width:l}=n;return[{x:e,y:o},{x:e+l,y:o},{x:e,y:o+a},{x:e+l,y:o+a}]}function sy(n,e){if(!n||n.length===0)return null;const[o]=n;return o[e]}function Jv(n,e,o){return e===void 0&&(e=n.left),o===void 0&&(o=n.top),{x:e+n.width*.5,y:o+n.height*.5}}const AM=n=>{let{collisionRect:e,droppableRects:o,droppableContainers:a}=n;const l=Jv(e,e.left,e.top),d=[];for(const h of a){const{id:v}=h,y=o.get(v);if(y){const _=iy(Jv(y),l);d.push({id:v,data:{droppableContainer:h,value:_}})}}return d.sort(oy)},wM=n=>{let{collisionRect:e,droppableRects:o,droppableContainers:a}=n;const l=Yv(e),d=[];for(const h of a){const{id:v}=h,y=o.get(v);if(y){const _=Yv(y),x=l.reduce((M,R,O)=>M+iy(_[O],R),0),E=Number((x/4).toFixed(4));d.push({id:v,data:{droppableContainer:h,value:E}})}}return d.sort(oy)};function MM(n,e){const o=Math.max(e.top,n.top),a=Math.max(e.left,n.left),l=Math.min(e.left+e.width,n.left+n.width),d=Math.min(e.top+e.height,n.top+n.height),h=l-a,v=d-o;if(a<l&&o<d){const y=e.width*e.height,_=n.width*n.height,x=h*v,E=x/(y+_-x);return Number(E.toFixed(4))}return 0}const bM=n=>{let{collisionRect:e,droppableRects:o,droppableContainers:a}=n;const l=[];for(const d of a){const{id:h}=d,v=o.get(h);if(v){const y=MM(v,e);y>0&&l.push({id:h,data:{droppableContainer:d,value:y}})}}return l.sort(CM)};function RM(n,e,o){return{...n,scaleX:e&&o?e.width/o.width:1,scaleY:e&&o?e.height/o.height:1}}function ay(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Ui}function NM(n){return function(o){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return l.reduce((h,v)=>({...h,top:h.top+n*v.y,bottom:h.bottom+n*v.y,left:h.left+n*v.x,right:h.right+n*v.x}),{...o})}}const IM=NM(1);function DM(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function LM(n,e,o){const a=DM(e);if(!a)return n;const{scaleX:l,scaleY:d,x:h,y:v}=a,y=n.left-h-(1-l)*parseFloat(o),_=n.top-v-(1-d)*parseFloat(o.slice(o.indexOf(" ")+1)),x=l?n.width/l:n.width,E=d?n.height/d:n.height;return{width:x,height:E,top:_,right:y+x,bottom:_+E,left:y}}const PM={ignoreTransform:!1};function ja(n,e){e===void 0&&(e=PM);let o=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:_,transformOrigin:x}=ti(n).getComputedStyle(n);_&&(o=LM(o,_,x))}const{top:a,left:l,width:d,height:h,bottom:v,right:y}=o;return{top:a,left:l,width:d,height:h,bottom:v,right:y}}function Kv(n){return ja(n,{ignoreTransform:!0})}function UM(n){const e=n.innerWidth,o=n.innerHeight;return{top:0,left:0,right:e,bottom:o,width:e,height:o}}function zM(n,e){return e===void 0&&(e=ti(n).getComputedStyle(n)),e.position==="fixed"}function kM(n,e){e===void 0&&(e=ti(n).getComputedStyle(n));const o=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const d=e[l];return typeof d=="string"?o.test(d):!1})}function fc(n,e){const o=[];function a(l){if(e!=null&&o.length>=e||!l)return o;if(th(l)&&l.scrollingElement!=null&&!o.includes(l.scrollingElement))return o.push(l.scrollingElement),o;if(!hl(l)||ey(l)||o.includes(l))return o;const d=ti(n).getComputedStyle(l);return l!==n&&kM(l,d)&&o.push(l),zM(l,d)?o:a(l.parentNode)}return n?a(n):o}function ry(n){const[e]=fc(n,1);return e??null}function gf(n){return!dc||!n?null:Wa(n)?n:eh(n)?th(n)||n===$a(n).scrollingElement?window:hl(n)?n:null:null}function ly(n){return Wa(n)?n.scrollX:n.scrollLeft}function uy(n){return Wa(n)?n.scrollY:n.scrollTop}function Lf(n){return{x:ly(n),y:uy(n)}}var Mn;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Mn||(Mn={}));function cy(n){return!dc||!n?!1:n===document.scrollingElement}function dy(n){const e={x:0,y:0},o=cy(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},a={x:n.scrollWidth-o.width,y:n.scrollHeight-o.height},l=n.scrollTop<=e.y,d=n.scrollLeft<=e.x,h=n.scrollTop>=a.y,v=n.scrollLeft>=a.x;return{isTop:l,isLeft:d,isBottom:h,isRight:v,maxScroll:a,minScroll:e}}const HM={x:.2,y:.2};function OM(n,e,o,a,l){let{top:d,left:h,right:v,bottom:y}=o;a===void 0&&(a=10),l===void 0&&(l=HM);const{isTop:_,isBottom:x,isLeft:E,isRight:M}=dy(n),R={x:0,y:0},O={x:0,y:0},P={height:e.height*l.y,width:e.width*l.x};return!_&&d<=e.top+P.height?(R.y=Mn.Backward,O.y=a*Math.abs((e.top+P.height-d)/P.height)):!x&&y>=e.bottom-P.height&&(R.y=Mn.Forward,O.y=a*Math.abs((e.bottom-P.height-y)/P.height)),!M&&v>=e.right-P.width?(R.x=Mn.Forward,O.x=a*Math.abs((e.right-P.width-v)/P.width)):!E&&h<=e.left+P.width&&(R.x=Mn.Backward,O.x=a*Math.abs((e.left+P.width-h)/P.width)),{direction:R,speed:O}}function BM(n){if(n===document.scrollingElement){const{innerWidth:d,innerHeight:h}=window;return{top:0,left:0,right:d,bottom:h,width:d,height:h}}const{top:e,left:o,right:a,bottom:l}=n.getBoundingClientRect();return{top:e,left:o,right:a,bottom:l,width:n.clientWidth,height:n.clientHeight}}function fy(n){return n.reduce((e,o)=>Za(e,Lf(o)),Ui)}function qM(n){return n.reduce((e,o)=>e+ly(o),0)}function GM(n){return n.reduce((e,o)=>e+uy(o),0)}function VM(n,e){if(e===void 0&&(e=ja),!n)return;const{top:o,left:a,bottom:l,right:d}=e(n);ry(n)&&(l<=0||d<=0||o>=window.innerHeight||a>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const FM=[["x",["left","right"],qM],["y",["top","bottom"],GM]];class oh{constructor(e,o){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=fc(o),l=fy(a);this.rect={...e},this.width=e.width,this.height=e.height;for(const[d,h,v]of FM)for(const y of h)Object.defineProperty(this,y,{get:()=>{const _=v(a),x=l[d]-_;return this.rect[y]+x},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class al{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(o=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...o)})},this.target=e}add(e,o,a){var l;(l=this.target)==null||l.addEventListener(e,o,a),this.listeners.push([e,o,a])}}function ZM(n){const{EventTarget:e}=ti(n);return n instanceof e?n:$a(n)}function vf(n,e){const o=Math.abs(n.x),a=Math.abs(n.y);return typeof e=="number"?Math.sqrt(o**2+a**2)>e:"x"in e&&"y"in e?o>e.x&&a>e.y:"x"in e?o>e.x:"y"in e?a>e.y:!1}var Ei;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Ei||(Ei={}));function Xv(n){n.preventDefault()}function YM(n){n.stopPropagation()}var ft;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(ft||(ft={}));const hy={start:[ft.Space,ft.Enter],cancel:[ft.Esc],end:[ft.Space,ft.Enter,ft.Tab]},JM=(n,e)=>{let{currentCoordinates:o}=e;switch(n.code){case ft.Right:return{...o,x:o.x+25};case ft.Left:return{...o,x:o.x-25};case ft.Down:return{...o,y:o.y+25};case ft.Up:return{...o,y:o.y-25}}};class sh{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:o}}=e;this.props=e,this.listeners=new al($a(o)),this.windowListeners=new al(ti(o)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ei.Resize,this.handleCancel),this.windowListeners.add(Ei.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ei.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:o}=this.props,a=e.node.current;a&&VM(a),o(Ui)}handleKeyDown(e){if(ih(e)){const{active:o,context:a,options:l}=this.props,{keyboardCodes:d=hy,coordinateGetter:h=JM,scrollBehavior:v="smooth"}=l,{code:y}=e;if(d.end.includes(y)){this.handleEnd(e);return}if(d.cancel.includes(y)){this.handleCancel(e);return}const{collisionRect:_}=a.current,x=_?{x:_.left,y:_.top}:Ui;this.referenceCoordinates||(this.referenceCoordinates=x);const E=h(e,{active:o,context:a.current,currentCoordinates:x});if(E){const M=cl(E,x),R={x:0,y:0},{scrollableAncestors:O}=a.current;for(const P of O){const H=e.code,{isTop:I,isRight:q,isLeft:B,isBottom:ee,maxScroll:j,minScroll:X}=dy(P),Y=BM(P),oe={x:Math.min(H===ft.Right?Y.right-Y.width/2:Y.right,Math.max(H===ft.Right?Y.left:Y.left+Y.width/2,E.x)),y:Math.min(H===ft.Down?Y.bottom-Y.height/2:Y.bottom,Math.max(H===ft.Down?Y.top:Y.top+Y.height/2,E.y))},le=H===ft.Right&&!q||H===ft.Left&&!B,pe=H===ft.Down&&!ee||H===ft.Up&&!I;if(le&&oe.x!==E.x){const me=P.scrollLeft+M.x,ne=H===ft.Right&&me<=j.x||H===ft.Left&&me>=X.x;if(ne&&!M.y){P.scrollTo({left:me,behavior:v});return}ne?R.x=P.scrollLeft-me:R.x=H===ft.Right?P.scrollLeft-j.x:P.scrollLeft-X.x,R.x&&P.scrollBy({left:-R.x,behavior:v});break}else if(pe&&oe.y!==E.y){const me=P.scrollTop+M.y,ne=H===ft.Down&&me<=j.y||H===ft.Up&&me>=X.y;if(ne&&!M.x){P.scrollTo({top:me,behavior:v});return}ne?R.y=P.scrollTop-me:R.y=H===ft.Down?P.scrollTop-j.y:P.scrollTop-X.y,R.y&&P.scrollBy({top:-R.y,behavior:v});break}}this.handleMove(e,Za(cl(E,this.referenceCoordinates),R))}}}handleMove(e,o){const{onMove:a}=this.props;e.preventDefault(),a(o)}handleEnd(e){const{onEnd:o}=this.props;e.preventDefault(),this.detach(),o()}handleCancel(e){const{onCancel:o}=this.props;e.preventDefault(),this.detach(),o()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sh.activators=[{eventName:"onKeyDown",handler:(n,e,o)=>{let{keyboardCodes:a=hy,onActivation:l}=e,{active:d}=o;const{code:h}=n.nativeEvent;if(a.start.includes(h)){const v=d.activatorNode.current;return v&&n.target!==v?!1:(n.preventDefault(),l==null||l({event:n.nativeEvent}),!0)}return!1}}];function Qv(n){return!!(n&&"distance"in n)}function Wv(n){return!!(n&&"delay"in n)}class ah{constructor(e,o,a){var l;a===void 0&&(a=ZM(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=o;const{event:d}=e,{target:h}=d;this.props=e,this.events=o,this.document=$a(h),this.documentListeners=new al(this.document),this.listeners=new al(a),this.windowListeners=new al(ti(h)),this.initialCoordinates=(l=Df(d))!=null?l:Ui,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:o,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ei.Resize,this.handleCancel),this.windowListeners.add(Ei.DragStart,Xv),this.windowListeners.add(Ei.VisibilityChange,this.handleCancel),this.windowListeners.add(Ei.ContextMenu,Xv),this.documentListeners.add(Ei.Keydown,this.handleKeydown),o){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Wv(o)){this.timeoutId=setTimeout(this.handleStart,o.delay),this.handlePending(o);return}if(Qv(o)){this.handlePending(o);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,o){const{active:a,onPending:l}=this.props;l(a,e,this.initialCoordinates,o)}handleStart(){const{initialCoordinates:e}=this,{onStart:o}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ei.Click,YM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ei.SelectionChange,this.removeTextSelection),o(e))}handleMove(e){var o;const{activated:a,initialCoordinates:l,props:d}=this,{onMove:h,options:{activationConstraint:v}}=d;if(!l)return;const y=(o=Df(e))!=null?o:Ui,_=cl(l,y);if(!a&&v){if(Qv(v)){if(v.tolerance!=null&&vf(_,v.tolerance))return this.handleCancel();if(vf(_,v.distance))return this.handleStart()}if(Wv(v)&&vf(_,v.tolerance))return this.handleCancel();this.handlePending(v,_);return}e.cancelable&&e.preventDefault(),h(y)}handleEnd(){const{onAbort:e,onEnd:o}=this.props;this.detach(),this.activated||e(this.props.active),o()}handleCancel(){const{onAbort:e,onCancel:o}=this.props;this.detach(),this.activated||e(this.props.active),o()}handleKeydown(e){e.code===ft.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const KM={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rh extends ah{constructor(e){const{event:o}=e,a=$a(o.target);super(e,KM,a)}}rh.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:o}=n,{onActivation:a}=e;return!o.isPrimary||o.button!==0?!1:(a==null||a({event:o}),!0)}}];const XM={move:{name:"mousemove"},end:{name:"mouseup"}};var Pf;(function(n){n[n.RightClick=2]="RightClick"})(Pf||(Pf={}));class QM extends ah{constructor(e){super(e,XM,$a(e.event.target))}}QM.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:o}=n,{onActivation:a}=e;return o.button===Pf.RightClick?!1:(a==null||a({event:o}),!0)}}];const _f={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WM extends ah{constructor(e){super(e,_f)}static setup(){return window.addEventListener(_f.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(_f.move.name,e)};function e(){}}}WM.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:o}=n,{onActivation:a}=e;const{touches:l}=o;return l.length>1?!1:(a==null||a({event:o}),!0)}}];var rl;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(rl||(rl={}));var tc;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(tc||(tc={}));function $M(n){let{acceleration:e,activator:o=rl.Pointer,canScroll:a,draggingRect:l,enabled:d,interval:h=5,order:v=tc.TreeOrder,pointerCoordinates:y,scrollableAncestors:_,scrollableAncestorRects:x,delta:E,threshold:M}=n;const R=eb({delta:E,disabled:!d}),[O,P]=cM(),H=D.useRef({x:0,y:0}),I=D.useRef({x:0,y:0}),q=D.useMemo(()=>{switch(o){case rl.Pointer:return y?{top:y.y,bottom:y.y,left:y.x,right:y.x}:null;case rl.DraggableRect:return l}},[o,l,y]),B=D.useRef(null),ee=D.useCallback(()=>{const X=B.current;if(!X)return;const Y=H.current.x*I.current.x,oe=H.current.y*I.current.y;X.scrollBy(Y,oe)},[]),j=D.useMemo(()=>v===tc.TreeOrder?[..._].reverse():_,[v,_]);D.useEffect(()=>{if(!d||!_.length||!q){P();return}for(const X of j){if((a==null?void 0:a(X))===!1)continue;const Y=_.indexOf(X),oe=x[Y];if(!oe)continue;const{direction:le,speed:pe}=OM(X,oe,q,e,M);for(const me of["x","y"])R[me][le[me]]||(pe[me]=0,le[me]=0);if(pe.x>0||pe.y>0){P(),B.current=X,O(ee,h),H.current=pe,I.current=le;return}}H.current={x:0,y:0},I.current={x:0,y:0},P()},[e,ee,a,P,d,h,JSON.stringify(q),JSON.stringify(R),O,_,j,x,JSON.stringify(M)])}const jM={x:{[Mn.Backward]:!1,[Mn.Forward]:!1},y:{[Mn.Backward]:!1,[Mn.Forward]:!1}};function eb(n){let{delta:e,disabled:o}=n;const a=If(e);return ml(l=>{if(o||!a||!l)return jM;const d={x:Math.sign(e.x-a.x),y:Math.sign(e.y-a.y)};return{x:{[Mn.Backward]:l.x[Mn.Backward]||d.x===-1,[Mn.Forward]:l.x[Mn.Forward]||d.x===1},y:{[Mn.Backward]:l.y[Mn.Backward]||d.y===-1,[Mn.Forward]:l.y[Mn.Forward]||d.y===1}}},[o,e,a])}function tb(n,e){const o=e!=null?n.get(e):void 0,a=o?o.node.current:null;return ml(l=>{var d;return e==null?null:(d=a??l)!=null?d:null},[a,e])}function nb(n,e){return D.useMemo(()=>n.reduce((o,a)=>{const{sensor:l}=a,d=l.activators.map(h=>({eventName:h.eventName,handler:e(h.handler,a)}));return[...o,...d]},[]),[n,e])}var fl;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(fl||(fl={}));var Uf;(function(n){n.Optimized="optimized"})(Uf||(Uf={}));const $v=new Map;function ib(n,e){let{dragging:o,dependencies:a,config:l}=e;const[d,h]=D.useState(null),{frequency:v,measure:y,strategy:_}=l,x=D.useRef(n),E=H(),M=ul(E),R=D.useCallback(function(I){I===void 0&&(I=[]),!M.current&&h(q=>q===null?I:q.concat(I.filter(B=>!q.includes(B))))},[M]),O=D.useRef(null),P=ml(I=>{if(E&&!o)return $v;if(!I||I===$v||x.current!==n||d!=null){const q=new Map;for(let B of n){if(!B)continue;if(d&&d.length>0&&!d.includes(B.id)&&B.rect.current){q.set(B.id,B.rect.current);continue}const ee=B.node.current,j=ee?new oh(y(ee),ee):null;B.rect.current=j,j&&q.set(B.id,j)}return q}return I},[n,d,o,E,y]);return D.useEffect(()=>{x.current=n},[n]),D.useEffect(()=>{E||R()},[o,E]),D.useEffect(()=>{d&&d.length>0&&h(null)},[JSON.stringify(d)]),D.useEffect(()=>{E||typeof v!="number"||O.current!==null||(O.current=setTimeout(()=>{R(),O.current=null},v))},[v,E,R,...a]),{droppableRects:P,measureDroppableContainers:R,measuringScheduled:d!=null};function H(){switch(_){case fl.Always:return!1;case fl.BeforeDragging:return o;default:return!o}}}function my(n,e){return ml(o=>n?o||(typeof e=="function"?e(n):n):null,[e,n])}function ob(n,e){return my(n,e)}function sb(n){let{callback:e,disabled:o}=n;const a=nh(e),l=D.useMemo(()=>{if(o||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(a)},[a,o]);return D.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function hc(n){let{callback:e,disabled:o}=n;const a=nh(e),l=D.useMemo(()=>{if(o||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(a)},[o]);return D.useEffect(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function ab(n){return new oh(ja(n),n)}function jv(n,e,o){e===void 0&&(e=ab);const[a,l]=D.useState(null);function d(){l(y=>{if(!n)return null;if(n.isConnected===!1){var _;return(_=y??o)!=null?_:null}const x=e(n);return JSON.stringify(y)===JSON.stringify(x)?y:x})}const h=sb({callback(y){if(n)for(const _ of y){const{type:x,target:E}=_;if(x==="childList"&&E instanceof HTMLElement&&E.contains(n)){d();break}}}}),v=hc({callback:d});return ji(()=>{d(),n?(v==null||v.observe(n),h==null||h.observe(document.body,{childList:!0,subtree:!0})):(v==null||v.disconnect(),h==null||h.disconnect())},[n]),a}function rb(n){const e=my(n);return ay(n,e)}const e_=[];function lb(n){const e=D.useRef(n),o=ml(a=>n?a&&a!==e_&&n&&e.current&&n.parentNode===e.current.parentNode?a:fc(n):e_,[n]);return D.useEffect(()=>{e.current=n},[n]),o}function ub(n){const[e,o]=D.useState(null),a=D.useRef(n),l=D.useCallback(d=>{const h=gf(d.target);h&&o(v=>v?(v.set(h,Lf(h)),new Map(v)):null)},[]);return D.useEffect(()=>{const d=a.current;if(n!==d){h(d);const v=n.map(y=>{const _=gf(y);return _?(_.addEventListener("scroll",l,{passive:!0}),[_,Lf(_)]):null}).filter(y=>y!=null);o(v.length?new Map(v):null),a.current=n}return()=>{h(n),h(d)};function h(v){v.forEach(y=>{const _=gf(y);_==null||_.removeEventListener("scroll",l)})}},[l,n]),D.useMemo(()=>n.length?e?Array.from(e.values()).reduce((d,h)=>Za(d,h),Ui):fy(n):Ui,[n,e])}function t_(n,e){e===void 0&&(e=[]);const o=D.useRef(null);return D.useEffect(()=>{o.current=null},e),D.useEffect(()=>{const a=n!==Ui;a&&!o.current&&(o.current=n),!a&&o.current&&(o.current=null)},[n]),o.current?cl(n,o.current):Ui}function cb(n){D.useEffect(()=>{if(!dc)return;const e=n.map(o=>{let{sensor:a}=o;return a.setup==null?void 0:a.setup()});return()=>{for(const o of e)o==null||o()}},n.map(e=>{let{sensor:o}=e;return o}))}function db(n,e){return D.useMemo(()=>n.reduce((o,a)=>{let{eventName:l,handler:d}=a;return o[l]=h=>{d(h,e)},o},{}),[n,e])}function py(n){return D.useMemo(()=>n?UM(n):null,[n])}const n_=[];function fb(n,e){e===void 0&&(e=ja);const[o]=n,a=py(o?ti(o):null),[l,d]=D.useState(n_);function h(){d(()=>n.length?n.map(y=>cy(y)?a:new oh(e(y),y)):n_)}const v=hc({callback:h});return ji(()=>{v==null||v.disconnect(),h(),n.forEach(y=>v==null?void 0:v.observe(y))},[n]),l}function hb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return hl(e)?e:n}function mb(n){let{measure:e}=n;const[o,a]=D.useState(null),l=D.useCallback(_=>{for(const{target:x}of _)if(hl(x)){a(E=>{const M=e(x);return E?{...E,width:M.width,height:M.height}:M});break}},[e]),d=hc({callback:l}),h=D.useCallback(_=>{const x=hb(_);d==null||d.disconnect(),x&&(d==null||d.observe(x)),a(x?e(x):null)},[e,d]),[v,y]=ju(h);return D.useMemo(()=>({nodeRef:v,rect:o,setRef:y}),[o,v,y])}const pb=[{sensor:rh,options:{}},{sensor:sh,options:{}}],gb={current:{}},Zu={draggable:{measure:Kv},droppable:{measure:Kv,strategy:fl.WhileDragging,frequency:Uf.Optimized},dragOverlay:{measure:ja}};class ll extends Map{get(e){var o;return e!=null&&(o=super.get(e))!=null?o:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:o}=e;return!o})}getNodeFor(e){var o,a;return(o=(a=this.get(e))==null?void 0:a.node.current)!=null?o:void 0}}const vb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ll,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ec},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zu,measureDroppableContainers:ec,windowRect:null,measuringScheduled:!1},_b={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ec,draggableNodes:new Map,over:null,measureDroppableContainers:ec},mc=D.createContext(_b),gy=D.createContext(vb);function yb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ll}}}function Sb(n,e){switch(e.type){case Sn.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Sn.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Sn.DragEnd:case Sn.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Sn.RegisterDroppable:{const{element:o}=e,{id:a}=o,l=new ll(n.droppable.containers);return l.set(a,o),{...n,droppable:{...n.droppable,containers:l}}}case Sn.SetDroppableDisabled:{const{id:o,key:a,disabled:l}=e,d=n.droppable.containers.get(o);if(!d||a!==d.key)return n;const h=new ll(n.droppable.containers);return h.set(o,{...d,disabled:l}),{...n,droppable:{...n.droppable,containers:h}}}case Sn.UnregisterDroppable:{const{id:o,key:a}=e,l=n.droppable.containers.get(o);if(!l||a!==l.key)return n;const d=new ll(n.droppable.containers);return d.delete(o),{...n,droppable:{...n.droppable,containers:d}}}default:return n}}function Tb(n){let{disabled:e}=n;const{active:o,activatorEvent:a,draggableNodes:l}=D.useContext(mc),d=If(a),h=If(o==null?void 0:o.id);return D.useEffect(()=>{if(!e&&!a&&d&&h!=null){if(!ih(d)||document.activeElement===d.target)return;const v=l.get(h);if(!v)return;const{activatorNode:y,node:_}=v;if(!y.current&&!_.current)return;requestAnimationFrame(()=>{for(const x of[y.current,_.current]){if(!x)continue;const E=hM(x);if(E){E.focus();break}}})}},[a,e,l,h,d]),null}function xb(n,e){let{transform:o,...a}=e;return n!=null&&n.length?n.reduce((l,d)=>d({transform:l,...a}),o):o}function Eb(n){return D.useMemo(()=>({draggable:{...Zu.draggable,...n==null?void 0:n.draggable},droppable:{...Zu.droppable,...n==null?void 0:n.droppable},dragOverlay:{...Zu.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function Cb(n){let{activeNode:e,measure:o,initialRect:a,config:l=!0}=n;const d=D.useRef(!1),{x:h,y:v}=typeof l=="boolean"?{x:l,y:l}:l;ji(()=>{if(!h&&!v||!e){d.current=!1;return}if(d.current||!a)return;const _=e==null?void 0:e.node.current;if(!_||_.isConnected===!1)return;const x=o(_),E=ay(x,a);if(h||(E.x=0),v||(E.y=0),d.current=!0,Math.abs(E.x)>0||Math.abs(E.y)>0){const M=ry(_);M&&M.scrollBy({top:E.y,left:E.x})}},[e,h,v,a,o])}const vy=D.createContext({...Ui,scaleX:1,scaleY:1});var cs;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(cs||(cs={}));const Ab=D.memo(function(e){var o,a,l,d;let{id:h,accessibility:v,autoScroll:y=!0,children:_,sensors:x=pb,collisionDetection:E=bM,measuring:M,modifiers:R,...O}=e;const P=D.useReducer(Sb,void 0,yb),[H,I]=P,[q,B]=yM(),[ee,j]=D.useState(cs.Uninitialized),X=ee===cs.Initialized,{draggable:{active:Y,nodes:oe,translate:le},droppable:{containers:pe}}=H,me=Y!=null?oe.get(Y):null,ne=D.useRef({initial:null,translated:null}),Pe=D.useMemo(()=>{var we;return Y!=null?{id:Y,data:(we=me==null?void 0:me.data)!=null?we:gb,rect:ne}:null},[Y,me]),ve=D.useRef(null),[Ge,Z]=D.useState(null),[ue,de]=D.useState(null),Fe=ul(O,Object.values(O)),_e=pl("DndDescribedBy",h),z=D.useMemo(()=>pe.getEnabled(),[pe]),$=Eb(M),{droppableRects:fe,measureDroppableContainers:he,measuringScheduled:ye}=ib(z,{dragging:X,dependencies:[le.x,le.y],config:$.droppable}),ge=tb(oe,Y),Ae=D.useMemo(()=>ue?Df(ue):null,[ue]),Ie=it(),Oe=ob(ge,$.draggable.measure);Cb({activeNode:Y!=null?oe.get(Y):null,config:Ie.layoutShiftCompensation,initialRect:Oe,measure:$.draggable.measure});const Ee=jv(ge,$.draggable.measure,Oe),sn=jv(ge?ge.parentElement:null),nt=D.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:oe,draggingNode:null,draggingNodeRect:null,droppableContainers:pe,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),bn=pe.getNodeFor((o=nt.current.over)==null?void 0:o.id),Ne=mb({measure:$.dragOverlay.measure}),Ot=(a=Ne.nodeRef.current)!=null?a:ge,pn=X?(l=Ne.rect)!=null?l:Ee:null,ni=!!(Ne.nodeRef.current&&Ne.rect),Be=rb(ni?null:Ee),Ue=py(Ot?ti(Ot):null),Le=lb(X?bn??ge:null),Xe=fb(Le),Ye=xb(R,{transform:{x:le.x-Be.x,y:le.y-Be.y,scaleX:1,scaleY:1},activatorEvent:ue,active:Pe,activeNodeRect:Ee,containerNodeRect:sn,draggingNodeRect:pn,over:nt.current.over,overlayNodeRect:Ne.rect,scrollableAncestors:Le,scrollableAncestorRects:Xe,windowRect:Ue}),St=Ae?Za(Ae,le):null,tt=ub(Le),an=t_(tt),Jt=t_(tt,[Ee]),ze=Za(Ye,an),Ut=pn?IM(pn,Ye):null,rn=Pe&&Ut?E({active:Pe,collisionRect:Ut,droppableRects:fe,droppableContainers:z,pointerCoordinates:St}):null,Ft=sy(rn,"id"),[wt,Kt]=D.useState(null),gn=ni?Ye:Za(Ye,Jt),dt=RM(gn,(d=wt==null?void 0:wt.rect)!=null?d:null,Ee),ce=D.useRef(null),Te=D.useCallback((we,ht)=>{let{sensor:Qe,options:Ct}=ht;if(ve.current==null)return;const Bt=oe.get(ve.current);if(!Bt)return;const mt=we.nativeEvent,$e=new Qe({active:ve.current,activeNode:Bt,event:mt,options:Ct,context:nt,onAbort(Zt){if(!oe.get(Zt))return;const{onDragAbort:ln}=Fe.current,Tn={id:Zt};ln==null||ln(Tn),q({type:"onDragAbort",event:Tn})},onPending(Zt,kn,ln,Tn){if(!oe.get(Zt))return;const{onDragPending:Ce}=Fe.current,Gn={id:Zt,constraint:kn,initialCoordinates:ln,offset:Tn};Ce==null||Ce(Gn),q({type:"onDragPending",event:Gn})},onStart(Zt){const kn=ve.current;if(kn==null)return;const ln=oe.get(kn);if(!ln)return;const{onDragStart:Tn}=Fe.current,Xt={activatorEvent:mt,active:{id:kn,data:ln.data,rect:ne}};Ba.unstable_batchedUpdates(()=>{Tn==null||Tn(Xt),j(cs.Initializing),I({type:Sn.DragStart,initialCoordinates:Zt,active:kn}),q({type:"onDragStart",event:Xt}),Z(ce.current),de(mt)})},onMove(Zt){I({type:Sn.DragMove,coordinates:Zt})},onEnd:en(Sn.DragEnd),onCancel:en(Sn.DragCancel)});ce.current=$e;function en(Zt){return async function(){const{active:ln,collisions:Tn,over:Xt,scrollAdjustedTranslate:Ce}=nt.current;let Gn=null;if(ln&&Ce){const{cancelDrop:Ai}=Fe.current;Gn={activatorEvent:mt,active:ln,collisions:Tn,delta:Ce,over:Xt},Zt===Sn.DragEnd&&typeof Ai=="function"&&await Promise.resolve(Ai(Gn))&&(Zt=Sn.DragCancel)}ve.current=null,Ba.unstable_batchedUpdates(()=>{I({type:Zt}),j(cs.Uninitialized),Kt(null),Z(null),de(null),ce.current=null;const Ai=Zt===Sn.DragEnd?"onDragEnd":"onDragCancel";if(Gn){const Hn=Fe.current[Ai];Hn==null||Hn(Gn),q({type:Ai,event:Gn})}})}}},[oe]),be=D.useCallback((we,ht)=>(Qe,Ct)=>{const Bt=Qe.nativeEvent,mt=oe.get(Ct);if(ve.current!==null||!mt||Bt.dndKit||Bt.defaultPrevented)return;const $e={active:mt};we(Qe,ht.options,$e)===!0&&(Bt.dndKit={capturedBy:ht.sensor},ve.current=Ct,Te(Qe,ht))},[oe,Te]),Et=nb(x,be);cb(x),ji(()=>{Ee&&ee===cs.Initializing&&j(cs.Initialized)},[Ee,ee]),D.useEffect(()=>{const{onDragMove:we}=Fe.current,{active:ht,activatorEvent:Qe,collisions:Ct,over:Bt}=nt.current;if(!ht||!Qe)return;const mt={active:ht,activatorEvent:Qe,collisions:Ct,delta:{x:ze.x,y:ze.y},over:Bt};Ba.unstable_batchedUpdates(()=>{we==null||we(mt),q({type:"onDragMove",event:mt})})},[ze.x,ze.y]),D.useEffect(()=>{const{active:we,activatorEvent:ht,collisions:Qe,droppableContainers:Ct,scrollAdjustedTranslate:Bt}=nt.current;if(!we||ve.current==null||!ht||!Bt)return;const{onDragOver:mt}=Fe.current,$e=Ct.get(Ft),en=$e&&$e.rect.current?{id:$e.id,rect:$e.rect.current,data:$e.data,disabled:$e.disabled}:null,Zt={active:we,activatorEvent:ht,collisions:Qe,delta:{x:Bt.x,y:Bt.y},over:en};Ba.unstable_batchedUpdates(()=>{Kt(en),mt==null||mt(Zt),q({type:"onDragOver",event:Zt})})},[Ft]),ji(()=>{nt.current={activatorEvent:ue,active:Pe,activeNode:ge,collisionRect:Ut,collisions:rn,droppableRects:fe,draggableNodes:oe,draggingNode:Ot,draggingNodeRect:pn,droppableContainers:pe,over:wt,scrollableAncestors:Le,scrollAdjustedTranslate:ze},ne.current={initial:pn,translated:Ut}},[Pe,ge,rn,Ut,oe,Ot,pn,fe,pe,wt,Le,ze]),$M({...Ie,delta:le,draggingRect:Ut,pointerCoordinates:St,scrollableAncestors:Le,scrollableAncestorRects:Xe});const Tt=D.useMemo(()=>({active:Pe,activeNode:ge,activeNodeRect:Ee,activatorEvent:ue,collisions:rn,containerNodeRect:sn,dragOverlay:Ne,draggableNodes:oe,droppableContainers:pe,droppableRects:fe,over:wt,measureDroppableContainers:he,scrollableAncestors:Le,scrollableAncestorRects:Xe,measuringConfiguration:$,measuringScheduled:ye,windowRect:Ue}),[Pe,ge,Ee,ue,rn,sn,Ne,oe,pe,fe,wt,he,Le,Xe,$,ye,Ue]),He=D.useMemo(()=>({activatorEvent:ue,activators:Et,active:Pe,activeNodeRect:Ee,ariaDescribedById:{draggable:_e},dispatch:I,draggableNodes:oe,over:wt,measureDroppableContainers:he}),[ue,Et,Pe,Ee,I,_e,oe,wt,he]);return on.createElement(ny.Provider,{value:B},on.createElement(mc.Provider,{value:He},on.createElement(gy.Provider,{value:Tt},on.createElement(vy.Provider,{value:dt},_)),on.createElement(Tb,{disabled:(v==null?void 0:v.restoreFocus)===!1})),on.createElement(xM,{...v,hiddenTextDescribedById:_e}));function it(){const we=(Ge==null?void 0:Ge.autoScrollEnabled)===!1,ht=typeof y=="object"?y.enabled===!1:y===!1,Qe=X&&!we&&!ht;return typeof y=="object"?{...y,enabled:Qe}:{enabled:Qe}}}),wb=D.createContext(null),i_="button",Mb="Draggable";function bb(n){let{id:e,data:o,disabled:a=!1,attributes:l}=n;const d=pl(Mb),{activators:h,activatorEvent:v,active:y,activeNodeRect:_,ariaDescribedById:x,draggableNodes:E,over:M}=D.useContext(mc),{role:R=i_,roleDescription:O="draggable",tabIndex:P=0}=l??{},H=(y==null?void 0:y.id)===e,I=D.useContext(H?vy:wb),[q,B]=ju(),[ee,j]=ju(),X=db(h,e),Y=ul(o);ji(()=>(E.set(e,{id:e,key:d,node:q,activatorNode:ee,data:Y}),()=>{const le=E.get(e);le&&le.key===d&&E.delete(e)}),[E,e]);const oe=D.useMemo(()=>({role:R,tabIndex:P,"aria-disabled":a,"aria-pressed":H&&R===i_?!0:void 0,"aria-roledescription":O,"aria-describedby":x.draggable}),[a,R,P,H,O,x.draggable]);return{active:y,activatorEvent:v,activeNodeRect:_,attributes:oe,isDragging:H,listeners:a?void 0:X,node:q,over:M,setNodeRef:B,setActivatorNodeRef:j,transform:I}}function Rb(){return D.useContext(gy)}const Nb="Droppable",Ib={timeout:25};function Db(n){let{data:e,disabled:o=!1,id:a,resizeObserverConfig:l}=n;const d=pl(Nb),{active:h,dispatch:v,over:y,measureDroppableContainers:_}=D.useContext(mc),x=D.useRef({disabled:o}),E=D.useRef(!1),M=D.useRef(null),R=D.useRef(null),{disabled:O,updateMeasurementsFor:P,timeout:H}={...Ib,...l},I=ul(P??a),q=D.useCallback(()=>{if(!E.current){E.current=!0;return}R.current!=null&&clearTimeout(R.current),R.current=setTimeout(()=>{_(Array.isArray(I.current)?I.current:[I.current]),R.current=null},H)},[H]),B=hc({callback:q,disabled:O||!h}),ee=D.useCallback((oe,le)=>{B&&(le&&(B.unobserve(le),E.current=!1),oe&&B.observe(oe))},[B]),[j,X]=ju(ee),Y=ul(e);return D.useEffect(()=>{!B||!j.current||(B.disconnect(),E.current=!1,B.observe(j.current))},[j,B]),D.useEffect(()=>(v({type:Sn.RegisterDroppable,element:{id:a,key:d,disabled:o,node:j,rect:M,data:Y}}),()=>v({type:Sn.UnregisterDroppable,key:d,id:a})),[a]),D.useEffect(()=>{o!==x.current.disabled&&(v({type:Sn.SetDroppableDisabled,id:a,key:d,disabled:o}),x.current.disabled=o)},[a,d,o,v]),{active:h,rect:M,isOver:(y==null?void 0:y.id)===a,node:j,over:y,setNodeRef:X}}function lh(n,e,o){const a=n.slice();return a.splice(o<0?a.length+o:o,0,a.splice(e,1)[0]),a}function Lb(n,e){return n.reduce((o,a,l)=>{const d=e.get(a);return d&&(o[l]=d),o},Array(n.length))}function ku(n){return n!==null&&n>=0}function Pb(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let o=0;o<n.length;o++)if(n[o]!==e[o])return!1;return!0}function Ub(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const _y=n=>{let{rects:e,activeIndex:o,overIndex:a,index:l}=n;const d=lh(e,a,o),h=e[l],v=d[l];return!v||!h?null:{x:v.left-h.left,y:v.top-h.top,scaleX:v.width/h.width,scaleY:v.height/h.height}},Hu={scaleX:1,scaleY:1},zb=n=>{var e;let{activeIndex:o,activeNodeRect:a,index:l,rects:d,overIndex:h}=n;const v=(e=d[o])!=null?e:a;if(!v)return null;if(l===o){const _=d[h];return _?{x:0,y:o<h?_.top+_.height-(v.top+v.height):_.top-v.top,...Hu}:null}const y=kb(d,l,o);return l>o&&l<=h?{x:0,y:-v.height-y,...Hu}:l<o&&l>=h?{x:0,y:v.height+y,...Hu}:{x:0,y:0,...Hu}};function kb(n,e,o){const a=n[e],l=n[e-1],d=n[e+1];return a?o<e?l?a.top-(l.top+l.height):d?d.top-(a.top+a.height):0:d?d.top-(a.top+a.height):l?a.top-(l.top+l.height):0:0}const yy="Sortable",Sy=on.createContext({activeIndex:-1,containerId:yy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_y,disabled:{draggable:!1,droppable:!1}});function Hb(n){let{children:e,id:o,items:a,strategy:l=_y,disabled:d=!1}=n;const{active:h,dragOverlay:v,droppableRects:y,over:_,measureDroppableContainers:x}=Rb(),E=pl(yy,o),M=v.rect!==null,R=D.useMemo(()=>a.map(X=>typeof X=="object"&&"id"in X?X.id:X),[a]),O=h!=null,P=h?R.indexOf(h.id):-1,H=_?R.indexOf(_.id):-1,I=D.useRef(R),q=!Pb(R,I.current),B=H!==-1&&P===-1||q,ee=Ub(d);ji(()=>{q&&O&&x(R)},[q,R,O,x]),D.useEffect(()=>{I.current=R},[R]);const j=D.useMemo(()=>({activeIndex:P,containerId:E,disabled:ee,disableTransforms:B,items:R,overIndex:H,useDragOverlay:M,sortedRects:Lb(R,y),strategy:l}),[P,E,ee.draggable,ee.droppable,B,R,H,y,M,l]);return on.createElement(Sy.Provider,{value:j},e)}const Ob=n=>{let{id:e,items:o,activeIndex:a,overIndex:l}=n;return lh(o,a,l).indexOf(e)},Bb=n=>{let{containerId:e,isSorting:o,wasDragging:a,index:l,items:d,newIndex:h,previousItems:v,previousContainerId:y,transition:_}=n;return!_||!a||v!==d&&l===h?!1:o?!0:h!==l&&e===y},qb={duration:200,easing:"ease"},Ty="transform",Gb=dl.Transition.toString({property:Ty,duration:0,easing:"linear"}),Vb={roleDescription:"sortable"};function Fb(n){let{disabled:e,index:o,node:a,rect:l}=n;const[d,h]=D.useState(null),v=D.useRef(o);return ji(()=>{if(!e&&o!==v.current&&a.current){const y=l.current;if(y){const _=ja(a.current,{ignoreTransform:!0}),x={x:y.left-_.left,y:y.top-_.top,scaleX:y.width/_.width,scaleY:y.height/_.height};(x.x||x.y)&&h(x)}}o!==v.current&&(v.current=o)},[e,o,a,l]),D.useEffect(()=>{d&&h(null)},[d]),d}function Zb(n){let{animateLayoutChanges:e=Bb,attributes:o,disabled:a,data:l,getNewIndex:d=Ob,id:h,strategy:v,resizeObserverConfig:y,transition:_=qb}=n;const{items:x,containerId:E,activeIndex:M,disabled:R,disableTransforms:O,sortedRects:P,overIndex:H,useDragOverlay:I,strategy:q}=D.useContext(Sy),B=Yb(a,R),ee=x.indexOf(h),j=D.useMemo(()=>({sortable:{containerId:E,index:ee,items:x},...l}),[E,l,ee,x]),X=D.useMemo(()=>x.slice(x.indexOf(h)),[x,h]),{rect:Y,node:oe,isOver:le,setNodeRef:pe}=Db({id:h,data:j,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:X,...y}}),{active:me,activatorEvent:ne,activeNodeRect:Pe,attributes:ve,setNodeRef:Ge,listeners:Z,isDragging:ue,over:de,setActivatorNodeRef:Fe,transform:_e}=bb({id:h,data:j,attributes:{...Vb,...o},disabled:B.draggable}),z=uM(pe,Ge),$=!!me,fe=$&&!O&&ku(M)&&ku(H),he=!I&&ue,ye=he&&fe?_e:null,Ae=fe?ye??(v??q)({rects:P,activeNodeRect:Pe,activeIndex:M,overIndex:H,index:ee}):null,Ie=ku(M)&&ku(H)?d({id:h,items:x,activeIndex:M,overIndex:H}):ee,Oe=me==null?void 0:me.id,Ee=D.useRef({activeId:Oe,items:x,newIndex:Ie,containerId:E}),sn=x!==Ee.current.items,nt=e({active:me,containerId:E,isDragging:ue,isSorting:$,id:h,index:ee,items:x,newIndex:Ee.current.newIndex,previousItems:Ee.current.items,previousContainerId:Ee.current.containerId,transition:_,wasDragging:Ee.current.activeId!=null}),bn=Fb({disabled:!nt,index:ee,node:oe,rect:Y});return D.useEffect(()=>{$&&Ee.current.newIndex!==Ie&&(Ee.current.newIndex=Ie),E!==Ee.current.containerId&&(Ee.current.containerId=E),x!==Ee.current.items&&(Ee.current.items=x)},[$,Ie,E,x]),D.useEffect(()=>{if(Oe===Ee.current.activeId)return;if(Oe!=null&&Ee.current.activeId==null){Ee.current.activeId=Oe;return}const Ot=setTimeout(()=>{Ee.current.activeId=Oe},50);return()=>clearTimeout(Ot)},[Oe]),{active:me,activeIndex:M,attributes:ve,data:j,rect:Y,index:ee,newIndex:Ie,items:x,isOver:le,isSorting:$,isDragging:ue,listeners:Z,node:oe,overIndex:H,over:de,setNodeRef:z,setActivatorNodeRef:Fe,setDroppableNodeRef:pe,setDraggableNodeRef:Ge,transform:bn??Ae,transition:Ne()};function Ne(){if(bn||sn&&Ee.current.newIndex===ee)return Gb;if(!(he&&!ih(ne)||!_)&&($||nt))return dl.Transition.toString({..._,property:Ty})}}function Yb(n,e){var o,a;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(o=n==null?void 0:n.draggable)!=null?o:e.draggable,droppable:(a=n==null?void 0:n.droppable)!=null?a:e.droppable}}function nc(n){if(!n)return!1;const e=n.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Jb=[ft.Down,ft.Right,ft.Up,ft.Left],Kb=(n,e)=>{let{context:{active:o,collisionRect:a,droppableRects:l,droppableContainers:d,over:h,scrollableAncestors:v}}=e;if(Jb.includes(n.code)){if(n.preventDefault(),!o||!a)return;const y=[];d.getEnabled().forEach(E=>{if(!E||E!=null&&E.disabled)return;const M=l.get(E.id);if(M)switch(n.code){case ft.Down:a.top<M.top&&y.push(E);break;case ft.Up:a.top>M.top&&y.push(E);break;case ft.Left:a.left>M.left&&y.push(E);break;case ft.Right:a.left<M.left&&y.push(E);break}});const _=wM({collisionRect:a,droppableRects:l,droppableContainers:y});let x=sy(_,"id");if(x===(h==null?void 0:h.id)&&_.length>1&&(x=_[1].id),x!=null){const E=d.get(o.id),M=d.get(x),R=M?l.get(M.id):null,O=M==null?void 0:M.node.current;if(O&&R&&E&&M){const H=fc(O).some((X,Y)=>v[Y]!==X),I=xy(E,M),q=Xb(E,M),B=H||!I?{x:0,y:0}:{x:q?a.width-R.width:0,y:q?a.height-R.height:0},ee={x:R.left,y:R.top};return B.x&&B.y?ee:cl(ee,B)}}}};function xy(n,e){return!nc(n)||!nc(e)?!1:n.data.current.sortable.containerId===e.data.current.sortable.containerId}function Xb(n,e){return!nc(n)||!nc(e)||!xy(n,e)?!1:n.data.current.sortable.index<e.data.current.sortable.index}const Qb=({stops:n,onSequenceChange:e,onRequestOptimization:o,optimizationResult:a,onAcceptOptimization:l})=>{const[d,h]=D.useState(n.map(H=>H.id)),[v,y]=D.useState(!1),[_,x]=D.useState(!1),E=EM(Zv(rh),Zv(sh,{coordinateGetter:Kb}));D.useEffect(()=>{h(n.map(H=>H.id))},[n]);const M=H=>{const{active:I,over:q}=H;if(!q||I.id===q.id)return;const B=d.indexOf(I.id),ee=d.indexOf(q.id),j=lh(d,B,ee);h(j),e(j)},R=async()=>{x(!0),await o(),x(!1),y(!0)},O=()=>{a&&(h(a.optimizedSequence),l(),y(!1))},P=a&&a.timeSavings>0;return A.jsxs("div",{className:"stop-sequencer bg-white rounded-lg shadow-md p-4",children:[A.jsxs("div",{className:"flex justify-between items-center mb-4",children:[A.jsxs("div",{children:[A.jsx("h3",{className:"font-bold text-lg text-gray-800",children:"Last-Mile Stop Sequence"}),A.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Drag stops to reorder or use AI optimization"})]}),A.jsx("button",{onClick:R,disabled:_||n.length<2,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:_?A.jsxs(A.Fragment,{children:[A.jsx(Ze,{name:"spinner",className:"h-4 w-4 animate-spin"}),A.jsx("span",{children:"Optimizing..."})]}):A.jsxs(A.Fragment,{children:[A.jsx(Ze,{name:"zap",className:"h-4 w-4"}),A.jsx("span",{children:"AI Optimize"})]})})]}),v&&P&&A.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-4 mb-4 shadow-lg",children:[A.jsxs("div",{className:"flex justify-between items-start mb-3",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"bg-green-600 p-2 rounded-full",children:A.jsx(Ze,{name:"zap",className:"h-5 w-5 text-white"})}),A.jsxs("div",{children:[A.jsx("p",{className:"font-bold text-green-900 text-lg",children:"AI Optimization Available"}),A.jsxs("p",{className:"text-sm text-green-700",children:["Save ",A.jsxs("strong",{children:[a.timeSavings.toFixed(0)," minutes"]})," with optimized sequence"]})]})]}),A.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:A.jsx(Ze,{name:"x-circle",className:"h-5 w-5"})})]}),A.jsx("div",{className:"mb-3",children:A.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[A.jsx(Ze,{name:"shield-check",className:"h-4 w-4 text-green-600"}),A.jsx("span",{className:"text-gray-700",children:"Confidence:"}),A.jsx("div",{className:"bg-white rounded-full h-2 w-32 overflow-hidden",children:A.jsx("div",{className:"bg-green-500 h-full",style:{width:`${(a.confidence||.5)*100}%`}})}),A.jsxs("span",{className:"font-bold text-green-800",children:[((a.confidence||.5)*100).toFixed(0),"%"]})]})}),A.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[A.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[A.jsxs("p",{className:"font-bold mb-2 text-gray-600 flex items-center",children:[A.jsx(Ze,{name:"list",className:"h-4 w-4 mr-1"}),"Current Order"]}),A.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-700",children:[d.slice(0,5).map(H=>{const I=n.find(q=>q.id===H);return A.jsx("li",{className:"text-xs truncate",children:(I==null?void 0:I.name)||"Unknown"},H)}),d.length>5&&A.jsxs("li",{className:"text-xs text-gray-400",children:["+",d.length-5," more"]})]})]}),A.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border-2 border-green-400",children:[A.jsxs("p",{className:"font-bold mb-2 text-green-700 flex items-center",children:[A.jsx(Ze,{name:"zap",className:"h-4 w-4 mr-1"}),"Optimized Order"]}),A.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-green-800",children:[a.optimizedSequence.slice(0,5).map((H,I)=>{const q=n.find(ee=>ee.id===H),B=d[I]!==H;return A.jsxs("li",{className:`text-xs truncate ${B?"font-bold bg-green-100 px-1 rounded":""}`,children:[(q==null?void 0:q.name)||"Unknown",B&&A.jsx("span",{className:"ml-1 text-green-600",children:""})]},H)}),a.optimizedSequence.length>5&&A.jsxs("li",{className:"text-xs text-green-600",children:["+",a.optimizedSequence.length-5," more"]})]})]})]}),A.jsxs("div",{className:"flex gap-3",children:[A.jsxs("button",{onClick:O,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition flex items-center justify-center space-x-2",children:[A.jsx(Ze,{name:"check-circle",className:"h-5 w-5"}),A.jsx("span",{children:"Apply Optimization"})]}),A.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg transition",children:"Keep Current"})]})]}),A.jsx(Ab,{sensors:E,collisionDetection:AM,onDragEnd:M,children:A.jsx(Hb,{items:d,strategy:zb,children:A.jsx("div",{className:"space-y-2",children:d.map((H,I)=>{const q=n.find(j=>j.id===H);if(!q)return null;const B=(a==null?void 0:a.optimizedSequence[I])===H,ee=a&&d[I]!==a.optimizedSequence[I];return A.jsx(Wb,{stop:q,index:I,isOptimized:B,isChanged:ee||!1,totalStops:d.length},H)})})})}),n.length===0&&A.jsxs("div",{className:"text-center py-8 text-gray-500",children:[A.jsx(Ze,{name:"inbox",className:"h-12 w-12 mx-auto mb-2 opacity-50"}),A.jsx("p",{children:"No last-mile stops to sequence"})]}),n.length===1&&A.jsxs("div",{className:"text-center py-4 text-sm text-gray-500",children:[A.jsx(Ze,{name:"info",className:"h-5 w-5 mx-auto mb-1"}),A.jsx("p",{children:"Need at least 2 stops to optimize sequence"})]})]})},Wb=({stop:n,index:e,isOptimized:o,isChanged:a,totalStops:l})=>{const{attributes:d,listeners:h,setNodeRef:v,transform:y,transition:_,isDragging:x}=Zb({id:n.id}),E={transform:dl.Transform.toString(y),transition:_,opacity:x?.5:1};return A.jsx("div",{ref:v,style:E,...d,...h,className:`stop-item flex items-center p-3 rounded-lg cursor-move transition-all ${x?"shadow-xl bg-indigo-50 border-2 border-indigo-400":o?"bg-green-50 border-2 border-green-400 shadow-md":a?"bg-yellow-50 border-2 border-yellow-300":"bg-white border border-gray-300 hover:shadow-md"}`,children:A.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[A.jsxs("div",{className:"flex flex-col items-center",children:[A.jsx(Ze,{name:"grip-vertical",className:"h-5 w-5 text-gray-400"}),A.jsx("span",{className:"text-xs font-bold text-gray-500 mt-1",children:e+1})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:"font-medium text-gray-900",children:n.name}),A.jsxs("div",{className:"flex items-center space-x-3 mt-1",children:[A.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[A.jsx(Ze,{name:"clock",className:"h-3 w-3 mr-1"}),n.unloadingTimeMinutes||0," min unload"]}),A.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${n.status==="Completed"?"bg-green-100 text-green-700":n.status==="In Progress"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:n.status})]})]}),o&&A.jsxs("div",{className:"flex items-center space-x-1 text-green-600",children:[A.jsx(Ze,{name:"check-circle",className:"h-5 w-5"}),A.jsx("span",{className:"text-xs font-bold",children:"Optimal"})]})]})})},$b=({evaluation:n,currentRoute:e,onAccept:o,onReject:a})=>{const[l,d]=D.useState(!1),[h,v]=D.useState(!1),y=async()=>{v(!0),await o(),v(!1)},_=()=>{a()};return A.jsxs("div",{className:"reroute-notification bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-indigo-600 p-4 rounded-lg shadow-lg animate-slide-down",children:[A.jsxs("div",{className:"flex items-start justify-between",children:[A.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[A.jsx("div",{className:"bg-indigo-600 p-2 rounded-full",children:A.jsx(Ze,{name:"zap",className:"h-6 w-6 text-white"})}),A.jsxs("div",{className:"flex-1",children:[A.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[A.jsx("p",{className:"font-bold text-indigo-900 text-lg",children:"Faster Route Available"}),A.jsxs("span",{className:`text-xs px-2 py-1 rounded ${n.confidence==="High"?"bg-green-100 text-green-700":n.confidence==="Medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[n.confidence," Confidence"]})]}),A.jsxs("p",{className:"text-indigo-700 mb-1",children:["Save ",A.jsx("span",{className:"font-bold text-xl text-indigo-900",children:Math.round(n.timeSavings)})," minutes by switching routes"]}),A.jsx("p",{className:"text-sm text-gray-600",children:n.reason})]})]}),A.jsx("button",{onClick:()=>d(!l),className:"text-indigo-600 hover:text-indigo-800 p-1",children:A.jsx(Ze,{name:l?"chevron-up":"chevron-down",className:"h-5 w-5"})})]}),l&&A.jsxs("div",{className:"mt-4 space-y-3 border-t border-indigo-200 pt-4",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[A.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[A.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center",children:[A.jsx(Ze,{name:"route",className:"h-3 w-3 mr-1"}),"Current Route"]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"ETA:"}),A.jsxs("span",{className:"font-bold text-gray-900",children:[n.comparisonData.currentETA," min"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Distance:"}),A.jsxs("span",{className:"font-medium",children:[n.comparisonData.currentDistance.toFixed(1)," mi"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-gray-600",children:"Type:"}),A.jsx("span",{className:"font-medium capitalize",children:e.metadata.routeType})]})]})]}),A.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border-2 border-indigo-300 shadow-sm",children:[A.jsxs("p",{className:"text-xs text-indigo-700 mb-2 flex items-center font-semibold",children:[A.jsx(Ze,{name:"zap",className:"h-3 w-3 mr-1"}),"New Route"]}),A.jsxs("div",{className:"space-y-1",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-indigo-600",children:"ETA:"}),A.jsxs("span",{className:"font-bold text-indigo-900",children:[n.comparisonData.newETA," min"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-indigo-600",children:"Distance:"}),A.jsxs("span",{className:"font-medium text-indigo-800",children:[n.comparisonData.newDistance.toFixed(1)," mi"]})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("span",{className:"text-indigo-600",children:"Type:"}),A.jsx("span",{className:"font-medium capitalize text-indigo-800",children:n.newRoute.metadata.routeType})]})]})]})]}),A.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:A.jsxs("div",{className:"flex items-center justify-between text-sm",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(Ze,{name:"activity",className:"h-4 w-4 text-gray-500"}),A.jsx("span",{className:"text-gray-700",children:"Historical Accuracy:"})]}),A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"bg-gray-200 h-2 w-24 rounded-full overflow-hidden",children:A.jsx("div",{className:"bg-green-500 h-full rounded-full",style:{width:`${n.historicalAccuracy}%`}})}),A.jsxs("span",{className:"font-bold text-gray-900",children:[n.historicalAccuracy.toFixed(0),"%"]})]})]})}),A.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[A.jsxs("div",{className:"flex items-center space-x-2 bg-white p-2 rounded border border-gray-200",children:[A.jsx(Ze,{name:"traffic",className:"h-4 w-4 text-gray-500"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-gray-500",children:"Traffic:"}),A.jsx("p",{className:"font-medium",children:n.newRoute.liveConditions.currentTrafficLevel})]})]}),A.jsxs("div",{className:"flex items-center space-x-2 bg-white p-2 rounded border border-gray-200",children:[A.jsx(Ze,{name:"cloud",className:"h-4 w-4 text-gray-500"}),A.jsxs("div",{children:[A.jsx("p",{className:"text-gray-500",children:"Weather:"}),A.jsx("p",{className:"font-medium",children:n.newRoute.liveConditions.weatherCondition})]})]})]})]}),A.jsxs("div",{className:"mt-4 flex gap-3",children:[A.jsx("button",{onClick:y,disabled:h,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center space-x-2",children:h?A.jsxs(A.Fragment,{children:[A.jsx(Ze,{name:"spinner",className:"h-5 w-5 animate-spin"}),A.jsx("span",{children:"Switching Route..."})]}):A.jsxs(A.Fragment,{children:[A.jsx(Ze,{name:"check-circle",className:"h-5 w-5"}),A.jsx("span",{children:"Accept New Route"})]})}),A.jsxs("button",{onClick:_,disabled:h,className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-4 rounded-lg transition-all hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[A.jsx(Ze,{name:"x-circle",className:"h-5 w-5"}),A.jsx("span",{children:"Keep Current"})]})]})]})},jb="modulepreload",e1=function(n){return"/Eta_new/"+n},o_={},zf=function(e,o,a){let l=Promise.resolve();if(o&&o.length>0){let h=function(_){return Promise.all(_.map(x=>Promise.resolve(x).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),y=(v==null?void 0:v.nonce)||(v==null?void 0:v.getAttribute("nonce"));l=h(o.map(_=>{if(_=e1(_),_ in o_)return;o_[_]=!0;const x=_.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${E}`))return;const M=document.createElement("link");if(M.rel=x?"stylesheet":jb,x||(M.as="script"),M.crossOrigin="",M.href=_,y&&M.setAttribute("nonce",y),document.head.appendChild(M),x)return new Promise((R,O)=>{M.addEventListener("load",R),M.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${_}`)))})}))}function d(h){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=h,window.dispatchEvent(v),!v.defaultPrevented)throw h}return l.then(h=>{for(const v of h||[])v.status==="rejected"&&d(v.reason);return e().catch(d)})},t1=3.85,n1=6.5;async function i1(n,e,o=3){try{const[a,l]=n,[d,h]=e,y=`https://router.project-osrm.org/route/v1/driving/${`${l},${a};${h},${d}`}?alternatives=${o}&overview=full&geometries=geojson&steps=true&annotations=true`,_=await fetch(y);if(!_.ok)return console.warn("OSRM alternatives failed, using single route"),[await sl([n,e])];const x=await _.json();if(x.code!=="Ok"||!x.routes||x.routes.length===0)return[await sl([n,e])];const E=[];for(const M of x.routes){const R=M.geometry.coordinates.map(B=>[B[1],B[0]]),O=[],{analyzeRoadSegment:P}=await zf(async()=>{const{analyzeRoadSegment:B}=await Promise.resolve().then(()=>Iw);return{analyzeRoadSegment:B}},void 0);for(let B=0;B<R.length-1;B++){const ee=P(R[B],R[B+1],B,R.length-1);O.push(ee)}const H=M.distance*621371e-9,I=M.duration,q=H/(I/3600);(q>100||q<5)&&console.warn(` OSRM route has suspicious speed: ${q.toFixed(1)} mph (${H.toFixed(1)} mi in ${(I/60).toFixed(0)} min)`),E.push({path:R,segments:O,totalDistance:H,baseDuration:I})}return console.log(` OSRM returned ${E.length} alternative routes:`,E.map((M,R)=>`Route ${R+1}: ${M.totalDistance.toFixed(1)} mi in ${(M.baseDuration/60).toFixed(0)} min`)),E}catch(a){return console.error("Error fetching OSRM alternatives:",a),[await sl([n,e])]}}function s_(n,e){const{segments:o,totalDistance:a,baseDuration:l}=n;let d=0,h=0,v=0;o.forEach(P=>{if(P.roadType==="highway"&&P.speedLimitMph>=65){const H=e===0?.48:.06;d+=P.distance*H}P.roadType==="highway"&&(h+=P.distance),v+=P.speedLimitMph*P.distance});const y=o.length>0?Math.round(v/a):60,_=o1(o),x=s1(o),E=h/a,M=a1(E,a,l/60,d),R=a/n1,O=R*t1;return{totalDistanceMiles:a,baseETAMinutes:Math.round(l/60),currentETAMinutes:Math.round(l/60),tollRoadMiles:Math.round(d*10)/10,highwayMiles:Math.round(h*10)/10,avgSpeedLimit:y,trafficRiskScore:_,weatherRiskScore:x,routeType:M,fuelCost:O,fuelConsumptionGallons:Math.round(R*100)/100}}function o1(n){let e=0,o=0;return n.forEach(a=>{o+=a.distance,a.roadType==="city"?e+=a.distance*.8:a.roadType==="arterial"?e+=a.distance*.5:a.roadType==="highway"?e+=a.distance*.2:e+=a.distance*.1}),o>0?Math.min(e/o,1):.5}function s1(n){return n.filter(o=>o.roadType==="highway").length/n.length*.7}function a1(n,e,o,a){const l=e/(o/60);return a/e<.05&&a<10?"toll-free":l>55&&n>.7?"fastest":e<100&&n<.4?"shortest":"balanced"}async function a_(n){try{const e=n[Math.floor(n.length/2)],{fetchRealTrafficData:o}=await zf(async()=>{const{fetchRealTrafficData:y}=await Promise.resolve().then(()=>Rw);return{fetchRealTrafficData:y}},void 0),{fetchRealWeatherData:a}=await zf(async()=>{const{fetchRealWeatherData:y}=await Promise.resolve().then(()=>Ew);return{fetchRealWeatherData:y}},void 0),[l,d]=await Promise.all([o(e).catch(()=>null),a(e).catch(()=>null)]);let h=0,v="High";return l&&(l.status==="Heavy"?(h+=15,v="Low"):l.status==="Moderate"&&(h+=8,v="Medium")),d&&d.condition!=="Clear"&&(d.condition==="Storm"?(h+=10,v="Low"):d.condition==="Rain"&&(h+=5,v==="High"&&(v="Medium"))),{currentTrafficLevel:(l==null?void 0:l.status)||"Light",weatherCondition:(d==null?void 0:d.description)||"Clear skies",estimatedDelay:h,confidence:v}}catch(e){return console.error("Error fetching live conditions:",e),{currentTrafficLevel:"Light",weatherCondition:"Unknown",estimatedDelay:0,confidence:"Medium"}}}function r1(n){if(n.length===0)return n;const e=n.map(I=>I.metadata.currentETAMinutes),o=n.map(I=>I.metadata.totalDistanceMiles),a=n.map(I=>I.metadata.tollRoadMiles),l=n.map(I=>I.metadata.fuelCost),d=I=>({min:Math.min(...I),max:Math.max(...I)}),{min:h,max:v}=d(e),{min:y,max:_}=d(o),{min:x,max:E}=d(a),{min:M,max:R}=d(l),O=(I,q,B)=>B===q?1:1-(I-q)/(B-q),P=n.map(I=>{const{metadata:q,liveConditions:B}=I,ee=O(q.currentETAMinutes,h,v),j=O(q.totalDistanceMiles,y,_),X=O(q.tollRoadMiles,x,E),Y=O(q.fuelCost,M,R),oe=1-q.trafficRiskScore,le=1-q.weatherRiskScore,pe=B.confidence==="High"?.05:B.confidence==="Medium"?.025:0,me=ee*.45+j*.15+Y*.15+X*.1+oe*.08+le*.07+pe;return{id:I.id,score:me}}),H=Object.fromEntries(P.map(({id:I,score:q})=>[I,q]));return[...n].sort((I,q)=>(H[q.id]??0)-(H[I.id]??0))}function l1(n){const e=n.reduce((l,d)=>d.metadata.currentETAMinutes<l.metadata.currentETAMinutes?d:l),o=n.reduce((l,d)=>d.metadata.totalDistanceMiles<l.metadata.totalDistanceMiles?d:l),a=n.find(l=>l.metadata.routeType==="balanced")||n[0];return{fastestRoute:e.id,shortestRoute:o.id,balancedRoute:a.id}}async function Ey(n,e,o={}){console.log(" Generating alternative routes...");const{maxAlternatives:a=4}=o;try{const l=await i1(n,e,a),d=await Promise.all(l.slice(0,a).map(async(y,_)=>{const x=s_(y,_),E=await a_(y.path);return x.currentETAMinutes=x.baseETAMinutes+E.estimatedDelay,{id:`route-${_+1}`,path:y.path,segments:y.segments,metadata:x,liveConditions:E}})),h=r1(d),v=l1(h);return console.log(` Generated ${h.length} alternative routes`),{routes:h,recommended:h[0].id,comparisonMatrix:v,generatedAt:new Date,validUntil:new Date(Date.now()+3e5)}}catch(l){console.error("Error generating alternative routes:",l);const d=await sl([n,e]),h=s_(d,0),v=await a_(d.path);return h.currentETAMinutes=h.baseETAMinutes+v.estimatedDelay,{routes:[{id:"route-1",path:d.path,segments:d.segments,metadata:h,liveConditions:v}],recommended:"route-1",comparisonMatrix:{fastestRoute:"route-1",shortestRoute:"route-1",balancedRoute:"route-1"},generatedAt:new Date,validUntil:new Date(Date.now()+3e5)}}}function u1(n,e){let o=1/0,a=0;n.path.forEach((v,y)=>{const _=r_(e,v);_<o&&(o=_,a=y)});let l=0;for(let v=a;v<n.path.length-1;v++)l+=r_(n.path[v],n.path[v+1]);const d=n.metadata.totalDistanceMiles/(n.metadata.currentETAMinutes/60),h=l/d*60;return{eta:Math.round(h),distance:l}}function r_(n,e){const a=n[0]*(Math.PI/180),l=e[0]*(Math.PI/180),d=l-a,h=(e[1]-n[1])*(Math.PI/180),v=Math.sin(d/2)*Math.sin(d/2)+Math.cos(a)*Math.cos(l)*Math.sin(h/2)*Math.sin(h/2);return 3958.8*(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)))}function c1(n,e,o,a){const[l,d]=D.useState(null),[h,v]=D.useState(12e4),[y,_]=D.useState(!1),x=D.useCallback(async()=>{if(!(a!==Vt.MANAGER||!o)&&!y){_(!0),console.log(" Evaluating rerouting options...");try{const E=d1(n);if(!E){d(null),_(!1);return}const M=await Ey(e,E.location,{includeHighways:!0,includeTolls:!0,maxAlternatives:3});if(M.routes.length===0){d(null),_(!1);return}const R=u1(o,e),O=M.routes[0],P=R.eta-O.metadata.currentETAMinutes,H=await p1(e,E.location),[I,q]=await Promise.all([Wf(e).catch(()=>null),Xf(e).catch(()=>null)]),B=f1({timeSavings:P,trafficData:I,weatherData:q,historicalAccuracy:H.avgAccuracy,routeSimilarity:h1(o,O)});P>5&&B.level!==wn.LOW?d({shouldReroute:!0,confidence:B.level,timeSavings:P,newRoute:O,reason:m1(R,O,B,I,q),historicalAccuracy:H.avgAccuracy,comparisonData:{currentETA:R.eta,newETA:O.metadata.currentETAMinutes,currentDistance:R.distance,newDistance:O.metadata.totalDistanceMiles}}):d(null)}catch(E){console.error("Error evaluating rerouting:",E),d(null)}finally{_(!1)}}},[n,e,o,a,y]);return D.useEffect(()=>{if(a!==Vt.MANAGER)return;x();const E=setInterval(x,h);return()=>clearInterval(E)},[a,x,h]),{rerouteEval:l,isEvaluating:y,forceEvaluation:x}}function d1(n){return[n.origin,...n.longHaulStops||[],n.hub,...n.lastMileStops].find(a=>a.status==="Pending"||a.status==="In Progress")||null}function f1(n){let e=0;e+=n.historicalAccuracy/100*.4;const o=(n.trafficData?.5:0)+(n.weatherData?.5:0);e+=o*.3;const a=Math.min(n.timeSavings/30,1);return e+=a*.2,e+=n.routeSimilarity*.1,e>=.75?{level:wn.HIGH,score:e}:e>=.5?{level:wn.MEDIUM,score:e}:{level:wn.LOW,score:e}}function h1(n,e){const o=n.metadata.totalDistanceMiles,a=e.metadata.totalDistanceMiles,l=1-Math.abs(o-a)/Math.max(o,a),d=n.metadata.highwayMiles/o,h=e.metadata.highwayMiles/a,v=1-Math.abs(d-h);return l*.6+v*.4}function m1(n,e,o,a,l){const d=[];a&&a.status==="Heavy"?d.push("heavy traffic on current route"):a&&a.status==="Moderate"&&d.push("moderate congestion ahead"),l&&l.condition==="Storm"?d.push("severe weather conditions"):l&&l.condition==="Rain"&&d.push("rain affecting travel times"),e.metadata.routeType==="fastest"&&d.push("faster alternative available"),d.length===0&&d.push("alternative route found");const h=n.eta-e.metadata.currentETAMinutes;return`${d.join(", ").charAt(0).toUpperCase()+d.join(", ").slice(1)}. Switch to save approximately ${Math.round(h)} minutes.`}async function p1(n,e){const o=g1(n,e);let a=70;return o<50?a=85:o>200&&(a=65),{avgAccuracy:a,totalPredictions:Math.floor(Math.random()*50)+20,successfulReroutes:Math.floor(Math.random()*30)+10}}function g1(n,e){const a=n[0]*(Math.PI/180),l=e[0]*(Math.PI/180),d=l-a,h=(e[1]-n[1])*(Math.PI/180),v=Math.sin(d/2)*Math.sin(d/2)+Math.cos(a)*Math.cos(l)*Math.sin(h/2)*Math.sin(h/2);return 3958.8*(2*Math.atan2(Math.sqrt(v),Math.sqrt(1-v)))}const kf="http://localhost:8000",v1=1e4,_1=2;async function l_(n,e,o=_1){for(let a=0;a<=o;a++)try{const l=new AbortController,d=setTimeout(()=>l.abort(),v1),h=await fetch(n,{...e,signal:l.signal});if(clearTimeout(d),!h.ok)throw new Error(`HTTP ${h.status}: ${h.statusText}`);return await h.json()}catch(l){const d=a===o;if(l.name==="AbortError"?console.warn(` ML request timeout (attempt ${a+1}/${o+1})`):console.warn(` ML request failed (attempt ${a+1}/${o+1}):`,l.message),d)return null;await new Promise(h=>setTimeout(h,Math.pow(2,a)*500))}return null}let Qs=null,Yu=0;const y1=6e4;async function Ou(){const n=Date.now();if(Qs!==null&&n-Yu<y1)return Qs;try{const e=new AbortController,o=setTimeout(()=>e.abort(),3e3),a=await fetch(`${kf}/health`,{signal:e.signal});clearTimeout(o),Qs=a.ok,Yu=n,Qs&&console.log(" ML Backend is available")}catch{Qs=!1,Yu=n}return Qs}const S1={isAvailable:Ou,async optimizeRoute(n){if(!await Ou())return console.log(" Skipping ML optimization - backend unavailable"),null;console.log(" Requesting ML route optimization...");const o=await l_(`${kf}/reroute/last-mile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});return o&&console.log(" ML Optimization Success:",{savings:o.time_savings_minutes,confidence:o.confidence}),o},async predictETA(n){return await Ou()?await l_(`${kf}/eta/predict`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}):null},async refreshHealth(){return Yu=0,Qs=null,await Ou()}},yf=new Map,T1=12e4;function x1(n){const e=n.stops.map(a=>a.id).sort().join("|"),o=n.vehicleStartPosition?`${n.vehicleStartPosition.lat.toFixed(4)},${n.vehicleStartPosition.lng.toFixed(4)}`:"default";return`${e}:${o}`}async function E1(n){const e=x1(n),o=yf.get(e);if(o&&Date.now()-o.timestamp<T1)return console.log(" Using cached optimization result"),o.result;try{const a=await S1.optimizeRoute({currentLocation:n.vehicleStartPosition||{lat:0,lng:0},remainingStops:n.stops.map(d=>({id:d.id,name:d.name,location:hs(d.location),unloadingTimeMinutes:d.unloadingTimeMinutes||0})),currentTraffic:{congestionLevel:"light",currentSpeed:30},currentWeather:{description:"clear"},timeOfDay:new Date().toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}),dayOfWeek:new Date().toLocaleDateString("en-US",{weekday:"long"})});if(!a){console.warn("ML backend returned null, using fallback optimization.");const d=u_(n);return yf.set(e,{result:d,timestamp:Date.now()}),d}const l={optimizedSequence:a.optimized_sequence,timeSavings:a.time_savings_minutes||0,distanceSavings:a.distance_savings_miles||0,confidence:a.confidence||.7,routePath:a.route_path||[],estimatedDurations:a.segment_durations||[],reasoning:a.reasoning||"Optimized using graph neural network analysis",comparisonMetrics:a.comparison_metrics||Cy(n.stops)};return yf.set(e,{result:l,timestamp:Date.now()}),console.log(` ML optimization cached for ${n.stops.length} stops`),l}catch(a){return console.warn("Last-mile optimization connection failed, using fallback:",a),u_(n)}}function u_(n){const{stops:e,vehicleStartPosition:o,currentSequence:a}=n;if(e.length<=1)return{optimizedSequence:e.map(P=>P.id),timeSavings:0,distanceSavings:0,confidence:1,routePath:e.map(P=>hs(P.location)),estimatedDurations:[],reasoning:"Single stop - no optimization needed",comparisonMetrics:Cy(e)};const l=o||hs(e[0].location),d=new Set(e.map(P=>P.id)),h=[];let v=l,y=0;const _=[l];for(;d.size>0;){let P=null,H=1/0;for(const I of d){const q=e.find(ee=>ee.id===I),B=uh(v,hs(q.location));B<H&&(H=B,P=I)}if(P){h.push(P),d.delete(P);const I=e.find(B=>B.id===P);v=hs(I.location),_.push(v),y+=H}}const x=C1(a||e.map(P=>P.id),e,l),E=(x-y)*2,M=x-y,R=x>0?(x-y)/x:0;let O=.65;return R>.25?O=.85:R>.15?O=.75:R>.05&&(O=.7),{optimizedSequence:h,timeSavings:Math.max(0,E),distanceSavings:Math.max(0,M),confidence:O,routePath:_,estimatedDurations:A1(h,e),reasoning:"Optimized using nearest-neighbor heuristic (ML backend unavailable)",comparisonMetrics:{currentRoute:{totalDistance:x,totalTime:x*2,averageStopDistance:x/e.length},optimizedRoute:{totalDistance:y,totalTime:y*2,averageStopDistance:y/e.length}}}}function uh(n,e){const a=Bu(e.lat-n.lat),l=Bu(e.lng-n.lng),d=Math.sin(a/2)*Math.sin(a/2)+Math.cos(Bu(n.lat))*Math.cos(Bu(e.lat))*Math.sin(l/2)*Math.sin(l/2);return 3959*(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)))}function Bu(n){return n*(Math.PI/180)}function hs(n){return{lat:n[0],lng:n[1]}}function C1(n,e,o){let a=0,l=o;for(const d of n){const h=e.find(y=>y.id===d);if(!h)continue;const v=hs(h.location);a+=uh(l,v),l=v}return a}function A1(n,e){const o=[];for(let a=0;a<n.length-1;a++){const l=e.find(v=>v.id===n[a]),d=e.find(v=>v.id===n[a+1]),h=uh(hs(l.location),hs(d.location));o.push({fromStopId:l.id,toStopId:d.id,distanceMiles:h,durationMinutes:h*2})}return o}function Cy(n){const e=n.length>1?5:0;return{currentRoute:{totalDistance:e*n.length,totalTime:e*n.length*2,averageStopDistance:e},optimizedRoute:{totalDistance:e*n.length,totalTime:e*n.length*2,averageStopDistance:e}}}function c_(n,e){if(n.length!==e.length)return{valid:!1,error:`Sequence length mismatch: expected ${n.length}, got ${e.length}`};const o=new Set(n.map(l=>l.id)),a=new Set(e);if(o.size!==a.size)return{valid:!1,error:"Stop ID count mismatch"};for(const l of e)if(!o.has(l))return{valid:!1,error:`Unknown stop ID in optimized sequence: ${l}`};return{valid:!0}}function w1({stops:n,vehiclePosition:e,onSequenceChange:o,onOptimizationAccepted:a}){const[l,d]=D.useState(n.map(H=>H.id)),[h,v]=D.useState(null),[y,_]=D.useState(!1),[x,E]=D.useState(null),M=D.useCallback(async()=>{if(n.length<=1){E("Need at least 2 stops to optimize");return}_(!0),E(null);try{const H=await E1({stops:n,vehicleStartPosition:e,currentSequence:l}),I=c_(n,H.optimizedSequence);if(!I.valid)throw new Error(I.error);v(H),console.log(" Optimization complete:",{timeSavings:`${H.timeSavings.toFixed(1)} min`,distanceSavings:`${H.distanceSavings.toFixed(1)} mi`,confidence:`${(H.confidence*100).toFixed(0)}%`})}catch(H){const I=H instanceof Error?H.message:"Optimization failed";E(I),console.error(" Optimization error:",H)}finally{_(!1)}},[n,e,l]),R=D.useCallback(()=>{if(!h)return;const H=h.optimizedSequence;d(H),v(null),o==null||o(H),a==null||a(h),console.log(" Optimization accepted:",H)},[h,o,a]),O=D.useCallback(()=>{v(null),console.log(" Optimization rejected")},[]),P=D.useCallback(H=>{const I=c_(n,H);if(!I.valid){E(I.error||"Invalid sequence");return}d(H),v(null),E(null),o==null||o(H),console.log(" Manual reorder:",H)},[n,o]);return{currentSequence:l,optimizationResult:h,isOptimizing:y,error:x,requestOptimization:M,acceptOptimization:R,rejectOptimization:O,manuallyReorderStops:P}}const d_=({shipment:n,role:e,onUpdate:o})=>{const a=J_(n,e);return D.useEffect(()=>{a&&o(a)},[a.truckPosition,a.eta,a.shipment,a.visiblePath,a.visibleStops,a.isUnloading,a.unloadingTimeRemaining,a.traffic,a.weather,a.delayReason,a.currentSpeed,a.lastApiUpdate]),null},M1=({trackingNumber:n,shipment:e,allShipments:o,trackingNumberMap:a,onShipmentUpdate:l})=>{const[d,h]=D.useState([e.trackingNumber]),[v,y]=D.useState(e.trackingNumber),[_,x]=D.useState({}),[E,M]=D.useState(!1),[R,O]=D.useState(""),[P,H]=D.useState(null),I=_[v],q=on.useRef(0);D.useEffect(()=>{const ce=Date.now();I&&I.shipment&&ce-q.current>2e3&&(l(v,I.shipment),q.current=ce)},[I,v,l]);const B=(ce,Te)=>{x(be=>({...be,[ce]:Te}))},ee=()=>{if(!R)return;const ce=a[R];if(!ce){H("Invalid tracking number");return}const Te=ce.shipmentId;if(d.includes(Te)){H("Shipment already added");return}h(be=>[...be,Te]),M(!1),O(""),H(null)},j=D.useMemo(()=>{if(!I)return null;const ce=d.filter(Te=>Te!==v).map(Te=>{const be=_[Te];return be?{id:Te,truckPosition:be.truckPosition,routePath:be.visiblePath,stops:be.visibleStops,color:"#9ca3af"}:null}).filter(Te=>Te!==null);return{truckPosition:I.truckPosition,routePath:I.visiblePath,stops:I.visibleStops,otherShipments:ce}},[d,v,_,I]),[X,Y]=D.useState([]),[oe,le]=D.useState(""),[pe,me]=D.useState(""),[ne,Pe]=D.useState(!1),[ve,Ge]=D.useState(null),[Z,ue]=D.useState(null),[de,Fe]=D.useState(-1),[_e,z]=D.useState(!1),[$,fe]=D.useState({lastUpdate:"0s ago",nextUpdate:"60s"}),he=D.useRef(Z);D.useEffect(()=>{he.current=Z},[Z]);const ye=(I==null?void 0:I.visibleStops)||[],ge=I==null?void 0:I.truckPosition,Ae=I==null?void 0:I.shipment,Ie=I==null?void 0:I.updateStopSequence,Oe=w1({stops:ye.filter(ce=>{var Te,be;return ce.status!=="Completed"&&ce.id!==((Te=Ae==null?void 0:Ae.hub)==null?void 0:Te.id)&&ce.id!==((be=Ae==null?void 0:Ae.origin)==null?void 0:be.id)}),vehiclePosition:ge?{lat:ge[0],lng:ge[1]}:void 0,onSequenceChange:ce=>{if(!Ae||!Ie)return;console.log(" Stop sequence updated via optimization/reorder:",ce);const Te=Ae.lastMileStops.filter(Et=>Et.status==="Completed"),be=ce.map(Et=>Ae.lastMileStops.find(Tt=>Tt.id===Et)).filter(Et=>Et!==void 0);if(be.length>0){const Et=[...Te,...be];Ie(Et)}},onOptimizationAccepted:ce=>{console.log(" Optimization accepted:",ce),Ae&&$u.publishRerouteEvent({eventId:crypto.randomUUID(),timestamp:new Date,shipmentId:Ae.trackingNumber,eventType:"LAST_MILE_RESEQUENCE",changes:{affectedStops:ce.optimizedSequence,newETAs:{},oldETAs:{},reason:ce.reasoning||"Route optimized for efficiency"},triggeredBy:"MANAGER"})}}),{rerouteEval:Ee,isEvaluating:sn}=c1(Ae,ge||[0,0],ve,Vt.MANAGER),nt=D.useCallback(async()=>{!Ee||!Ee.newRoute||!Ae||(console.log(" Accepting reroute suggestion"),le(Ee.newRoute.id),ue(Ee.newRoute.id),he.current=Ee.newRoute.id,Ge(Ee.newRoute),I!=null&&I.switchRoute&&I.switchRoute(Ee.newRoute.path,Ee.newRoute.segments),await $u.publishRerouteEvent({eventId:crypto.randomUUID(),timestamp:new Date,shipmentId:Ae.trackingNumber,eventType:"LONG_HAUL_REROUTE",changes:{affectedStops:[],newETAs:{nextStop:Ee.comparisonData.newETA},oldETAs:{nextStop:Ee.comparisonData.currentETA},reason:Ee.reason,routeChange:{oldRouteId:(ve==null?void 0:ve.id)||"unknown",newRouteId:Ee.newRoute.id}},triggeredBy:"MANAGER"}),console.log(" Route switched and event published"))},[Ee,Ae,ve,I]),bn=D.useCallback(()=>{console.log(" Reroute suggestion rejected")},[]);D.useEffect(()=>{const ce=setTimeout(()=>{_e||(z(!0),console.log(" Initial data loaded, enabling route generation"))},3e3);return()=>clearTimeout(ce)},[]);const{shipment:Ne,truckPosition:Ot,eta:pn=0,confidence:ni=wn.HIGH,traffic:Be=null,weather:Ue=null,delayReason:Le=null,visiblePath:Xe=[],visibleStops:Ye=[],currentSpeed:St=0,isUnloading:tt=!1,unloadingTimeRemaining:an=0,currentUnloadingStop:Jt=null,switchRoute:ze,updateStopSequence:Ut}=I||{},rn=(I==null?void 0:I.lastApiUpdate)||new Date,Ft=D.useMemo(()=>{var Te,be;if(!Ne)return{};const ce={};return Ne.origin&&(ce[Ne.origin.id]="O"),Ne.hub&&(ce[Ne.hub.id]="D"),(Te=Ne.longHaulStops)==null||Te.forEach((Et,Tt)=>{ce[Et.id]=`S${Tt+1}`}),(be=Ne.lastMileStops)==null||be.forEach((Et,Tt)=>{ce[Et.id]=`${Tt+1}`}),ce},[Ne]);D.useEffect(()=>{Ne&&Ne.currentLegIndex!==de&&(ue(null),he.current=null,Fe(Ne.currentLegIndex),console.log(` Moved to leg ${Ne.currentLegIndex}, resetting route selection`))},[Ne==null?void 0:Ne.currentLegIndex,de]),D.useEffect(()=>{if(!_e||!Ne)return;(async()=>{if(!Ot||Ye.length===0)return;const Te=Ye[Ne.currentLegIndex+1];if(Te){console.log(` Generating routes from [${Ot[0].toFixed(4)}, ${Ot[1].toFixed(4)}] to ${Te.name}`),Pe(!0);try{const be=await Ey(Ot,Te.location,{includeHighways:!0,includeTolls:!0,maxAlternatives:3});Y(be.routes),me(be.recommended),console.log(` Generated ${be.routes.length} routes:`,be.routes.map(we=>`${we.id} (${we.metadata.routeType}, ETA: ${we.metadata.currentETAMinutes}min)`)),console.log(` Recommended route: ${be.recommended}`);const Et=he.current,Tt=Et?be.routes.find(we=>we.id===Et):null;let He=Tt,it=(Tt==null?void 0:Tt.id)||"";Tt?console.log(` Preserving preferred route: ${he.current}`):(Et&&(console.log(` Preferred route ${Et} unavailable, falling back to recommendation`),ue(null),he.current=null),He=be.routes.find(we=>we.id===be.recommended)||be.routes[0],it=(He==null?void 0:He.id)||""),le(it),Ge(He||null),console.log(` Active route set to ${it}`)}catch(be){console.error(" Error generating routes:",be)}finally{Pe(!1)}}})()},[_e,Ot,Ne==null?void 0:Ne.currentLegIndex,Ye]),D.useEffect(()=>{const ce=()=>{if(!rn)return;const Et=Math.floor((new Date().getTime()-rn.getTime())/1e3);fe({lastUpdate:(He=>{if(He<60)return`${He}s ago`;const it=Math.floor(He/60),we=He%60;return`${it}:${we.toString().padStart(2,"0")} ago`})(Et),nextUpdate:""})};ce();const Te=setInterval(ce,1e3);return()=>clearInterval(Te)},[rn]);const wt=ce=>{le(ce),ue(ce),he.current=ce;const Te=X.find(be=>be.id===ce);Te&&(Ge(Te),console.log(` User selected route: ${ce} (${Te.metadata.routeType})`),console.log(" Route locked to user selection - will persist across updates"),ze&&(ze(Te.path,Te.segments),console.log(` Truck will now follow the ${Te.metadata.routeType} route from current position`)))};if(!I||!Ne||!Ot)return A.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gray-50",style:{minHeight:"100vh"},children:A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),A.jsx("p",{className:"text-gray-600",children:"Loading shipment data..."}),d.map(ce=>{const Te=o[ce];return Te?A.jsx(d_,{shipment:Te,role:Vt.MANAGER,onUpdate:be=>B(ce,be)},ce):null})]})});const Kt=Ne.currentLegIndex,gn=Ye[Kt+1],dt=Z&&ve?ve.path:Xe;return A.jsxs("div",{className:"h-full w-full flex flex-col md:flex-row bg-gray-50",children:[A.jsxs("div",{className:"w-16 md:w-20 bg-gray-900 flex flex-col items-center py-4 space-y-4 shrink-0",children:[d.map(ce=>A.jsx("button",{onClick:()=>y(ce),className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${v===ce?"bg-indigo-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,title:`Switch to ${ce}`,children:A.jsx(Ze,{name:"truck",className:"h-6 w-6"})},ce)),A.jsx("button",{onClick:()=>M(!0),className:"w-10 h-10 rounded-full bg-gray-800 text-gray-400 hover:bg-gray-700 flex items-center justify-center border border-gray-600",title:"Add Shipment",children:A.jsx("span",{className:"text-2xl font-light text-white",children:"+"})})]}),A.jsxs("div",{className:"flex-1 h-1/2 md:h-full relative",children:[A.jsx(j_,{truckPosition:Ot,routePath:dt,stops:Ye,currentSpeed:St,isUnloading:tt,unloadingMinutesRemaining:Math.ceil(an/60),alternativeRoutes:X,activeRouteId:oe,onRouteSelect:wt,otherShipments:j==null?void 0:j.otherShipments,customStopLabels:Ft}),E&&A.jsxs("div",{className:"absolute top-4 left-4 z-[1000] bg-white p-4 rounded-lg shadow-xl border border-gray-200 w-72",children:[A.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Track Another Shipment"}),A.jsx("input",{type:"text",value:R,onChange:ce=>O(ce.target.value),placeholder:"Enter Tracking Number",className:"w-full border border-gray-300 rounded px-3 py-2 mb-2 text-sm"}),P&&A.jsx("p",{className:"text-red-500 text-xs mb-2",children:P}),A.jsxs("div",{className:"flex justify-end space-x-2",children:[A.jsx("button",{onClick:()=>M(!1),className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),A.jsx("button",{onClick:ee,className:"px-3 py-1 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Add"})]})]})]}),A.jsxs("div",{className:"md:w-1/3 h-1/2 md:h-full p-4 overflow-y-auto space-y-4 border-l border-gray-200 bg-white",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Manager Dashboard"}),A.jsxs("p",{className:"text-sm text-gray-500 -mt-3 pb-2 border-b",children:["Tracking #",Ne.trackingNumber]}),A.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-3 text-xs",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"animate-pulse h-2 w-2 bg-green-500 rounded-full"}),A.jsx(Ze,{name:"clock",className:"h-4 w-4 text-blue-600"}),A.jsxs("span",{className:"text-gray-700",children:["Last updated: ",A.jsx("span",{className:"font-semibold text-blue-600",children:$.lastUpdate})]})]})}),tt&&Jt&&A.jsxs("div",{className:"bg-gradient-to-r from-orange-100 to-amber-100 border-l-4 border-orange-500 text-orange-900 p-4 rounded-md shadow-lg",children:[A.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[A.jsx(Ze,{name:"truck",className:"h-6 w-6 text-orange-600"}),A.jsx("p",{className:"font-bold text-lg",children:" Unloading in Progress"})]}),A.jsx("p",{className:"text-sm",children:(()=>{const ce=Ye.find(be=>be.id===Jt),Te=Math.ceil(an/60);return`Unloading at ${(ce==null?void 0:ce.name)||"delivery location"} - ${Te} minutes remaining`})()})]}),A.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[A.jsx(fs,{icon:"clock",title:"ETA to Next Stop",value:new Date(Date.now()+pn*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),colorClass:"bg-blue-500",subtext:gn==null?void 0:gn.name}),A.jsx(fs,{icon:"pin",title:"Confidence",value:ni,colorClass:ni===wn.HIGH?"bg-green-500":"bg-yellow-500"}),A.jsx(fs,{icon:"traffic",title:"Traffic",value:(Be==null?void 0:Be.status)||"N/A",colorClass:"bg-red-500",subtext:Be==null?void 0:Be.description}),A.jsx(fs,{icon:"cloud",title:"Weather",value:(Ue==null?void 0:Ue.condition)||"N/A",colorClass:"bg-purple-500",subtext:Ue==null?void 0:Ue.description})]}),Ee&&Ee.shouldReroute&&ve&&A.jsx($b,{evaluation:Ee,currentRoute:ve,onAccept:nt,onReject:bn}),sn&&A.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 p-2 rounded-md text-xs flex items-center space-x-2",children:[A.jsx("div",{className:"animate-spin h-3 w-3 border-2 border-blue-600 border-t-transparent rounded-full"}),A.jsx("span",{children:"Evaluating alternative routes..."})]}),X.length>0&&pn>0&&A.jsx(sM,{currentETA:pn,routes:X,activeRouteId:oe,recommendedRouteId:pe,trafficData:Be,weatherData:Ue,onSelectRoute:wt,truckPosition:Ot}),ne&&A.jsx("div",{className:"bg-blue-50 border border-blue-200 text-blue-700 p-3 rounded-md text-sm",children:A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"}),A.jsx("span",{children:"Calculating alternative routes..."})]})}),Ne.status!=="Delivered"&&Ye.filter(ce=>{var Te,be;return ce.status!=="Completed"&&ce.id!==((Te=Ne==null?void 0:Ne.hub)==null?void 0:Te.id)&&ce.id!==((be=Ne==null?void 0:Ne.origin)==null?void 0:be.id)}).length>=2&&A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[A.jsx(Qb,{stops:Ye.filter(ce=>{var Te,be;return ce.status!=="Completed"&&ce.id!==((Te=Ne==null?void 0:Ne.hub)==null?void 0:Te.id)&&ce.id!==((be=Ne==null?void 0:Ne.origin)==null?void 0:be.id)}),onSequenceChange:ce=>{console.log(" Manual reorder:",ce),Oe.manuallyReorderStops(ce)},onRequestOptimization:Oe.requestOptimization,optimizationResult:Oe.optimizationResult,onAcceptOptimization:()=>{console.log(" Accepting optimization"),Oe.acceptOptimization()}}),Oe.error&&A.jsxs("div",{className:"mt-2 text-sm text-red-600",children:[" ",Oe.error]})]}),A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Shipment Details"}),A.jsxs("p",{children:[A.jsx("strong",{children:"Status:"})," ",A.jsx("span",{className:"font-medium text-indigo-600",children:Ne.status})]}),A.jsxs("div",{className:"mt-2",children:[A.jsx("p",{children:A.jsx("strong",{children:"Manifest:"})}),A.jsx("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mt-1 pl-2",children:Ne.shipmentItems.map(ce=>{const Te=Ye.find(be=>be.id===ce.destinationStopId);return A.jsxs("li",{children:[A.jsxs("span",{className:"font-semibold text-indigo-600",children:[ce.quantity,"x"]})," ",ce.contents," ",A.jsxs("span",{className:"text-gray-500",children:["to ",(Te==null?void 0:Te.name)||"Unknown"]})]},ce.id)})})]})]}),A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[A.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Full Route"}),A.jsx("ul",{className:"space-y-3",children:Ye.map((ce,Te)=>{const be=ce.status==="Unloading"?`Unloading (${ce.unloadingTimeMinutes||0} min)`:ce.status==="Completed"?"Completed":Te===Kt+1?"In Progress":"Pending",Et=ce.status==="Unloading"&&ce.id===Jt;return A.jsxs("li",{className:"flex items-start",children:[A.jsx(Ze,{name:ce.status==="Completed"?"check-circle":"x-circle",className:`h-6 w-6 mr-3 mt-1 ${ce.status==="Completed"?"text-green-500":Et?"text-orange-500 animate-pulse":Te===Kt+1?"text-blue-500":"text-gray-400"}`}),A.jsxs("div",{className:"flex-1",children:[A.jsx("p",{className:`font-medium ${ce.status==="Completed"?"text-gray-500":"text-gray-800"}`,children:ce.name}),A.jsx("p",{className:`text-sm ${Et?"text-orange-600 font-semibold":"text-gray-500"}`,children:be})]})]},ce.id)})})]})]}),d.map(ce=>{const Te=o[ce];return Te?A.jsx(d_,{shipment:Te,role:Vt.MANAGER,onUpdate:be=>B(ce,be)},ce):null})]})},b1=({onShipmentCreated:n,onBack:e})=>{const[o,a]=D.useState({id:"stop-0",name:"Austin, TX",coords:null,status:"idle"}),[l,d]=D.useState([]),[h,v]=D.useState({id:"stop-1",name:"Beaumont, TX",coords:null,status:"idle"}),[y,_]=D.useState([{id:"stop-2",name:"Port Arthur, TX",coords:null,status:"idle",contents:"Mattresses",quantity:10}]),[x,E]=D.useState(!1),M=async X=>{if(!X.trim())return null;try{const oe=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(X)}`)).json();return oe&&oe.length>0?[parseFloat(oe[0].lat),parseFloat(oe[0].lon)]:null}catch(Y){return console.error("Geocoding error:",Y),null}},R=async(X,Y)=>{let oe,le;if(X==="origin")oe=o,le=a,oe.status="loading",a({...oe});else if(X==="hub")oe=h,le=v,oe.status="loading",v({...oe});else if((X==="longHaul"||X==="lastMile")&&Y!==void 0){const pe=X==="longHaul"?l:y,me=X==="longHaul"?d:_,ne=[...pe];oe=ne[Y],oe.status="loading",me(ne),le=Pe=>{const ve=typeof Pe=="function"?Pe(ne[Y]):Pe;ne[Y]=ve,me([...ne])}}if(oe&&le){const pe=await M(oe.name);le(me=>({...me,coords:pe,status:pe?"verified":"error"}))}},O=(X,Y,oe)=>{const le={coords:null,status:"idle"};if(Y==="origin")a(pe=>({...pe,name:X,...le}));else if(Y==="hub")v(pe=>({...pe,name:X,...le}));else if((Y==="longHaul"||Y==="lastMile")&&oe!==void 0){const pe=Y==="longHaul"?l:y,me=Y==="longHaul"?d:_,ne=[...pe];ne[oe]={...ne[oe],name:X,...le},me(ne)}},P=(X,Y)=>{const oe=[...y];oe[Y].contents=X,_(oe)},H=X=>{const Y=`stop-${Date.now()}-${Math.random()}`;X==="lastMile"?_([...y,{id:Y,name:"",coords:null,status:"idle",contents:""}]):d([...l,{id:Y,name:"",coords:null,status:"idle"}])},I=(X,Y)=>{(Y==="longHaul"?d:_)((Y==="longHaul"?l:y).filter((pe,me)=>me!==X))},q=D.useMemo(()=>{const X=h.status==="verified",Y=y.length>0&&y.every(oe=>oe.status==="verified"&&oe.contents&&oe.contents.trim()!=="");return x?X&&Y:o.status==="verified"&&X&&l.every(oe=>oe.status==="verified")&&Y},[o,h,l,y,x]),B=X=>{if(X.preventDefault(),!q){alert("Please verify all addresses and fill in contents for all last-mile stops before creating the shipment.");return}const Y=x?{id:h.id,name:h.name,location:h.coords,status:"Completed"}:{id:o.id,name:o.name,location:o.coords,status:"Completed"},oe=x?[]:l.filter(ve=>ve.name.trim()!=="").map((ve,Ge)=>({id:`lh-${Ge}-${ve.name.replace(/[^a-zA-Z0-9]/g,"").slice(0,4)}`,name:ve.name,location:ve.coords,status:"Pending"})),le=[],pe=[];y.filter(ve=>ve.name.trim()!=="").forEach((ve,Ge)=>{const Z=`lm-${Ge}-${ve.name.replace(/[^a-zA-Z0-9]/g,"").slice(0,4)}`;le.push({id:Z,name:ve.name,location:ve.coords,status:"Pending"}),ve.contents&&ve.contents.trim()!==""&&pe.push({id:`item-${Ge}-${ve.name.replace(/[^a-zA-Z0-9]/g,"").slice(0,4)}`,contents:ve.contents,quantity:ve.quantity||1,destinationStopId:Z})});const me=1+oe.length,Pe={trackingNumber:`SHIP-${(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ve){var Ge=Math.random()*16|0,Z=ve=="x"?Ge:Ge&3|8;return Z.toString(16)})).slice(0,8).toUpperCase()}`,shipmentItems:pe,origin:Y,longHaulStops:oe,hub:{id:h.id,name:h.name,location:h.coords,status:"Pending"},lastMileStops:le,status:x?ei.AT_HUB:ei.PENDING,currentLegIndex:x?me:0};n(Pe)},ee=(X,Y,oe,le,pe)=>A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700",children:le}),A.jsxs("div",{className:"mt-1 flex items-center space-x-2",children:[A.jsx("input",{type:"text",value:X.name,onChange:me=>Y(me.target.value),placeholder:pe,className:"flex-grow px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 bg-white text-gray-900 placeholder-gray-500"}),A.jsx("button",{type:"button",onClick:oe,disabled:!X.name||X.status==="loading",className:"px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Verify"}),A.jsxs("div",{className:"w-6 h-6",children:[X.status==="loading"&&A.jsx(Ze,{name:"spinner",className:"h-5 w-5 text-gray-400"}),X.status==="verified"&&A.jsx(Ze,{name:"check-circle",className:"h-6 w-6 text-green-500"}),X.status==="error"&&A.jsx(Ze,{name:"x-circle",className:"h-6 w-6 text-red-500"})]})]}),X.status==="error"&&A.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Address not found. Please try again."})]}),j=X=>{const Y=X==="longHaul"?l:y,oe=X==="longHaul"?"Long-Haul Stops (optional)":"Last-Mile Delivery Stops",le=X==="longHaul"?"e.g., Rest Stop, Houston, TX":"e.g., Super 8, Port Arthur, TX";return A.jsxs("div",{children:[A.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:oe}),A.jsx("div",{className:"space-y-4",children:Y.map((pe,me)=>A.jsxs("div",{className:"flex items-start space-x-2",children:[A.jsxs("div",{className:"flex-grow space-y-2 p-3 border rounded-md bg-gray-50",children:[ee(pe,ne=>O(ne,X,me),()=>R(X,me),`Stop ${me+1} Address`,le),X==="lastMile"&&A.jsxs("div",{className:"space-y-2",children:[A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Shipment Contents for this Stop"}),A.jsx("input",{type:"text",value:pe.contents,onChange:ne=>P(ne.target.value,me),placeholder:"e.g., Mattresses, Furniture",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 bg-white",required:!0})]}),A.jsxs("div",{children:[A.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),A.jsx("input",{type:"number",min:"1",value:pe.quantity||1,onChange:ne=>{const Pe=[...y];Pe[me].quantity=parseInt(ne.target.value)||1,_(Pe)},placeholder:"e.g., 10",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500 bg-white",required:!0})]})]})]}),A.jsx("button",{type:"button",onClick:()=>I(me,X),className:"p-2 text-red-500 hover:bg-red-100 rounded-full mt-7",children:A.jsx(Ze,{name:"trash",className:"h-5 w-5"})})]},pe.id))}),A.jsxs("button",{type:"button",onClick:()=>H(X),className:"mt-2 text-sm text-indigo-600 hover:text-indigo-800 font-medium flex items-center",children:[A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:A.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Stop"]})]})};return A.jsx("div",{className:"h-full bg-gray-100 flex flex-col items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-2xl p-8 overflow-y-auto max-h-full",children:[A.jsxs("div",{className:"flex justify-between items-center mb-6",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Create New Shipment"}),A.jsx("button",{onClick:e,className:"text-sm text-gray-500 hover:text-indigo-600",children:" Back to Home"})]}),A.jsxs("form",{onSubmit:B,className:"space-y-6",children:[!x&&A.jsxs(A.Fragment,{children:[ee(o,X=>O(X,"origin"),()=>R("origin"),"Origin Point","e.g., Manufacturer, Austin, TX"),j("longHaul")]}),ee(h,X=>O(X,"hub"),()=>R("hub"),"Distribution Hub","e.g., Warehouse, Beaumont, TX"),A.jsxs("div",{className:"flex items-center",children:[A.jsx("input",{id:"last-mile-only",type:"checkbox",checked:x,onChange:X=>E(X.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),A.jsx("label",{htmlFor:"last-mile-only",className:"ml-2 block text-sm text-gray-900",children:"Create a Last-Mile only shipment (starts from Distribution Hub)"})]}),j("lastMile"),A.jsx("button",{type:"submit",disabled:!q,className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed disabled:transform-none",children:"Create Shipment & Generate Tracking IDs"})]})]})})},R1=({trackingNumbers:n,onTrackAsManager:e,onGoHome:o})=>{var l;const a=(l=n.find(d=>d.role==="Manager"))==null?void 0:l.id;return A.jsx("div",{className:"h-full bg-gray-100 flex flex-col items-center justify-center p-4",children:A.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-xl shadow-2xl p-8 text-center",children:[A.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Shipment Created!"}),A.jsx("p",{className:"text-gray-500 mt-2 mb-6",children:"Use the following tracking numbers to monitor the shipment."}),A.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3 text-left",children:n.map(({role:d,id:h})=>A.jsxs("div",{className:"flex justify-between items-center",children:[A.jsxs("span",{className:"font-medium text-gray-700",children:[d,":"]}),A.jsx("code",{className:"bg-gray-200 text-gray-800 font-mono px-3 py-1 rounded",children:h})]},h))}),A.jsxs("div",{className:"mt-8 flex flex-col md:flex-row gap-4",children:[a&&A.jsx("button",{onClick:()=>e(a),className:"w-full bg-indigo-600 text-white font-bold py-3 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition",children:"Track as Manager"}),A.jsx("button",{onClick:o,className:"w-full bg-gray-200 text-gray-700 font-bold py-3 px-4 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition",children:"Back to Home"})]})]})})},qu={SHIPMENTS:"logistics_shipments",TRACKING_NUMBERS:"logistics_tracking_numbers"},N1={MANAGER:/^MGR-[A-Z0-9]{6}$/,SUPPLIER:/^SUP-[A-Z0-9]{6}$/,RECIPIENT:/^[A-Z]{2,4}-[A-Z0-9]{6}$/,DEMO_SUPPLIER:/^SUPPLIER\d*$/,DEMO_RECIPIENT:/^RECIPIENT\d*$/,DEMO_MANAGER:/^MANAGER\d*$/},I1=n=>Object.values(N1).some(e=>e.test(n)),Sf=n=>{const e="ABCDEFGHJKMNPQRSTUVWXYZ23456789";let o="";for(let a=0;a<6;a++)o+=e.charAt(Math.floor(Math.random()*e.length));return`${n}-${o}`},Ws="SHIP001",D1=n=>JSON.parse(JSON.stringify(n)),Gu=n=>({...n,status:"Pending"}),Hf=()=>{const n=D1(Ju);return{...n,origin:Gu(n.origin),hub:Gu(n.hub),longHaulStops:(n.longHaulStops||[]).map(Gu),lastMileStops:(n.lastMileStops||[]).map(Gu),currentLegIndex:0,status:ei.PENDING,currentEta:void 0,currentLocation:n.origin.location}},f_=n=>{var y,_,x,E,M;const e={...n},o=e[Ws],a=((_=(y=o==null?void 0:o.origin)==null?void 0:y.name)==null?void 0:_.toLowerCase().includes("austin"))??!1,l=(x=o==null?void 0:o.origin)!=null&&x.location?Math.abs(o.origin.location[0]-Ju.origin.location[0])>.01||Math.abs(o.origin.location[1]-Ju.origin.location[1])>.01:!0,d=(((E=o==null?void 0:o.longHaulStops)==null?void 0:E.length)??0)>0,h=(((M=o==null?void 0:o.lastMileStops)==null?void 0:M.length)??0)<10;return!o||a||d||h||l?(e[Ws]=Hf(),console.log(" Migrated demo shipment SHIP001 to Beaumont-only last-mile scenario")):e[Ws]&&(e[Ws]=Hf(),console.log(" Reset demo shipment progress for fresh session")),e},L1=()=>{const[n,e]=D.useState("home"),[o,a]=D.useState(null),[l,d]=D.useState(null),[h,v]=D.useState(()=>{try{const I=localStorage.getItem(qu.SHIPMENTS);if(I){const q=JSON.parse(I);return console.log(" Loaded shipments from localStorage:",Object.keys(q)),f_(q)}}catch(I){console.error("Failed to load shipments from localStorage:",I)}return f_({[Ws]:Ju})}),[y,_]=D.useState(()=>{try{const I=localStorage.getItem(qu.TRACKING_NUMBERS);if(I){const q=JSON.parse(I);return console.log(" Loaded tracking numbers from localStorage:",Object.keys(q)),q}}catch(I){console.error("Failed to load tracking numbers from localStorage:",I)}return j0}),[x,E]=D.useState([]);D.useEffect(()=>{try{localStorage.setItem(qu.SHIPMENTS,JSON.stringify(h)),console.log(" Saved shipments to localStorage:",Object.keys(h))}catch(I){console.error("Failed to save shipments to localStorage:",I)}},[h]),D.useEffect(()=>{try{localStorage.setItem(qu.TRACKING_NUMBERS,JSON.stringify(y)),console.log(" Saved tracking numbers to localStorage:",Object.keys(y))}catch(I){console.error("Failed to save tracking numbers to localStorage:",I)}},[y]);const M=D.useCallback(I=>{const q=I.trim().toUpperCase().replace(/\s+/g,"");if(console.log(` Attempting to track: "${q}"`),!q){d("Please enter a tracking number."),a(null);return}if(q.length<4){d("Tracking number is too short. Please check and try again."),a(null);return}I1(q)||console.warn(" Tracking number format is unusual:",q),console.log(" Available tracking numbers:",Object.keys(y));const B=y[q];if(B){console.log(" Found session data:",B),_(j=>{var X;return{...j,[q]:{...j[q],accessCount:(((X=j[q])==null?void 0:X.accessCount)||0)+1}}});let ee=h[B.shipmentId];if(B.shipmentId===Ws&&(ee=Hf(),v(j=>({...j,[Ws]:ee})),console.log(" Resetting SUPPLIER123 demo shipment for new simulation")),ee){console.log(" Found shipment data:",ee.trackingNumber),a({...B,trackingNumber:q,shipment:ee}),e("tracking"),d(null);return}else console.error(" Shipment data missing for ID:",B.shipmentId),console.log(" Available shipments:",Object.keys(h))}else console.warn(" Tracking number not found in map");d(`Invalid tracking number "${q}". Please try again.`),a(null)},[y,h]),R=()=>{a(null),e("home")},O=I=>{const q=I.trackingNumber,B=new Date().toISOString(),ee={},j=[],X=Sf("MGR");ee[X]={role:Vt.MANAGER,shipmentId:q,createdAt:B,accessCount:0},j.push({role:"Manager",id:X});const Y=Sf("SUP");ee[Y]={role:Vt.SUPPLIER,shipmentId:q,createdAt:B,accessCount:0},j.push({role:"Supplier",id:Y}),I.lastMileStops.forEach(oe=>{const le=oe.name.replace(/[^A-Z0-9]/gi,"").toUpperCase(),pe=le.length>=2?le.substring(0,Math.min(4,le.length)):"RCP",me=Sf(pe);ee[me]={role:Vt.RECIPIENT,shipmentId:q,recipientStopId:oe.id,createdAt:B,accessCount:0},j.push({role:`Recipient: ${oe.name}`,id:me})}),console.log(` Created ${Object.keys(ee).length} tracking numbers for shipment ${q}`),v(oe=>({...oe,[q]:I})),_(oe=>({...oe,...ee})),E(j),e("post_creation")},P=(I,q)=>{v(B=>({...B,[I]:q}))},H=()=>{switch(n){case"home":return A.jsx(mg,{onCreate:()=>e("create"),onTrack:()=>e("login")});case"create":return A.jsx(b1,{onShipmentCreated:O,onBack:()=>e("home")});case"login":return A.jsx(pg,{onTrack:M,error:l,onBack:()=>e("home")});case"post_creation":return A.jsx(R1,{trackingNumbers:x,onTrackAsManager:q=>M(q),onGoHome:()=>e("home")});case"tracking":if(!o)return A.jsx(pg,{onTrack:M,error:"Session expired.",onBack:()=>e("home")});const I=h[o.shipmentId]||o.shipment;return o.role===Vt.MANAGER?A.jsx(M1,{trackingNumber:o.trackingNumber,shipment:I,allShipments:h,trackingNumberMap:y,onShipmentUpdate:P}):A.jsx(oM,{trackingNumber:o.trackingNumber,role:o.role,recipientStopId:o.recipientStopId,shipment:I});default:return A.jsx(mg,{onCreate:()=>e("create"),onTrack:()=>e("login")})}};return A.jsxs("div",{className:"h-screen w-screen font-sans text-gray-900",children:[n==="tracking"&&o&&A.jsxs("header",{className:"absolute top-0 left-0 w-full bg-black bg-opacity-30 text-white flex justify-between items-center p-3 z-10",children:[A.jsxs("div",{className:"flex items-center space-x-2",children:[A.jsx(Ze,{name:"truck",className:"h-8 w-8 text-indigo-400"}),A.jsx("span",{className:"font-bold text-lg",children:"Logistics Tracker"})]}),A.jsx("button",{onClick:R,className:"bg-red-500 hover:bg-red-600 text-white text-sm font-bold py-2 px-4 rounded",children:"End Session"})]}),A.jsx("main",{className:`h-full w-full ${n==="tracking"?"pt-16":""} bg-gray-50`,children:H()})]})},Ay=document.getElementById("root");if(!Ay)throw new Error("Could not find root element to mount to");const P1=W0.createRoot(Ay);P1.render(A.jsx(on.StrictMode,{children:A.jsx(L1,{})}));
